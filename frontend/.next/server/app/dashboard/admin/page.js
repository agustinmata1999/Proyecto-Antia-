(()=>{var e={};e.id=305,e.ids=[305],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1825:()=>{},5469:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(7318),t(4954),t(5866);var a=t(3191),r=t(8716),l=t(7922),i=t.n(l),d=t(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7318)),"/app/frontend/src/app/dashboard/admin/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4954)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/app/frontend/src/app/dashboard/admin/page.tsx"],x="/dashboard/admin/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/admin/page",pathname:"/dashboard/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4372:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},1434:(e,s,t)=>{Promise.resolve().then(t.bind(t,4662))},8610:(e,s,t)=>{Promise.resolve().then(t.bind(t,8149))},6464:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},7027:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4662:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(326),r=t(7577),l=t(5047),i=t(8069),d=t(1664),n=t(3855),c=t(6557);let o=(0,c.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var x=t(8091);let m=(0,c.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),u=(0,c.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=t(7027),h=t(4019);let g=()=>"";function y(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[v,f]=(0,r.useState)(null),[C,w]=(0,r.useState)(null),[D,k]=(0,r.useState)({name:"",slug:"",description:"",status:"ACTIVE"}),[E,S]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),[T,R]=(0,r.useState)({bettingHouseId:"",affiliateUrl:"",trackingParamName:"subid",commissionCents:0}),[I,$]=(0,r.useState)(!1),U=async()=>{c(!0),b(null);try{let e=localStorage.getItem("access_token"),t={Authorization:`Bearer ${e}`},a=await fetch(`${g()}/api/admin/promotions`,{headers:t});if(!a.ok)throw Error("Error al cargar promociones");let r=await a.json();s(r||[]);let i=await fetch(`${g()}/api/affiliate/admin/houses?includeInactive=true`,{headers:t});if(i.ok){let e=await i.json();l(e||[])}}catch(e){b(e.message||"Error al cargar datos")}finally{c(!1)}},F=()=>{f(null),k({name:"",slug:"",description:"",status:"ACTIVE"}),N(!0)},M=e=>{f(e),k({name:e.name,slug:e.slug,description:e.description||"",status:e.status}),N(!0)},L=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),O=e=>{k(s=>({...s,name:e,slug:v?s.slug:L(e)}))},V=async()=>{if(!D.name||!D.slug){b("Nombre y slug son obligatorios");return}$(!0),b(null);try{let e=localStorage.getItem("access_token"),s={Authorization:`Bearer ${e}`,"Content-Type":"application/json"},t=v?`${g()}/api/admin/promotions/${v.id}`:`${g()}/api/admin/promotions`,a=await fetch(t,{method:v?"PUT":"POST",headers:s,body:JSON.stringify(D)});if(!a.ok){let e=await a.json();throw Error(e.message||"Error al guardar")}N(!1),await U()}catch(e){b(e.message||"Error al guardar promoci\xf3n")}finally{$(!1)}},z=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar esta promoci\xf3n? Se eliminar\xe1n todos los enlaces asociados."))try{let s=localStorage.getItem("access_token");if(!(await fetch(`${g()}/api/admin/promotions/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Error al eliminar");await U()}catch(e){b(e.message||"Error al eliminar promoci\xf3n")}},G=async e=>{try{let s=localStorage.getItem("access_token"),t="ACTIVE"===e.status?"INACTIVE":"ACTIVE";if(!(await fetch(`${g()}/api/admin/promotions/${e.id}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Error al actualizar estado");await U()}catch(e){b(e.message||"Error al actualizar estado")}},q=async t=>{if(C===t){w(null);return}let a=e.find(e=>e.id===t);if(a&&(!a.houseLinks||0===a.houseLinks.length)&&(a.housesCount||0)>0)try{let e=localStorage.getItem("access_token"),a=await fetch(`${g()}/api/admin/promotions/${t}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();s(s=>s.map(s=>s.id===t?{...s,houseLinks:e.houseLinks||[]}:s))}}catch(e){console.error("Error loading house links:",e)}w(t)},B=e=>{A(e),R({bettingHouseId:"",affiliateUrl:"",trackingParamName:"subid",commissionCents:5e3}),S(!0)},_=async()=>{if(!P||!T.bettingHouseId||!T.affiliateUrl){b("Casa y URL de afiliado son obligatorios");return}$(!0),b(null);try{let e=localStorage.getItem("access_token"),s=await fetch(`${g()}/api/admin/promotions/${P}/houses`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!s.ok){let e=await s.json();throw Error(e.message||"Error al a\xf1adir casa")}S(!1),await U()}catch(e){b(e.message||"Error al a\xf1adir enlace de casa")}finally{$(!1)}},H=async e=>{if(confirm("\xbfEliminar este enlace de casa?"))try{let s=localStorage.getItem("access_token");if(!(await fetch(`${g()}/api/admin/promotions/houses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw Error("Error al eliminar enlace");await U()}catch(e){b(e.message||"Error al eliminar enlace")}},Z=e=>"ACTIVE"===e?a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-green-100 text-green-800",children:"Activo"}):a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-800",children:"Inactivo"});return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Campa\xf1as de Afiliaci\xf3n"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Crea campa\xf1as con enlaces espec\xedficos de afiliaci\xf3n por casa de apuestas"})]}),(0,a.jsxs)(d.z,{onClick:F,className:"bg-red-600 hover:bg-red-700",children:[a.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Nueva Campa\xf1a"]})]}),y&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-red-600 text-sm",children:y}),a.jsx("button",{onClick:()=>b(null),className:"text-xs text-red-500 underline mt-1",children:"Cerrar"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"\xbfC\xf3mo funciona?"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["1. Crea una ",a.jsx("strong",{children:"Campa\xf1a"}),' (ej: "Campa\xf1a Navidad 2025")',a.jsx("br",{}),"2. A\xf1ade las ",a.jsx("strong",{children:"casas de apuestas"})," con el ",a.jsx("strong",{children:"link espec\xedfico"})," y la ",a.jsx("strong",{children:"comisi\xf3n"})," de esa campa\xf1a",a.jsx("br",{}),"3. Los tipsters seleccionan la campa\xf1a al crear sus landings",a.jsx("br",{}),"4. Cuando un usuario hace clic, ser\xe1 redirigido al ",a.jsx("strong",{children:"link espec\xedfico de la campa\xf1a"})]})]}),0===e.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(n.Z,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay campa\xf1as creadas"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primera campa\xf1a para que los tipsters puedan usarla"}),a.jsx(d.z,{onClick:F,className:"bg-red-600 hover:bg-red-700",children:"Crear Primera Campa\xf1a"})]}):a.jsx("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>q(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"\uD83C\uDF81"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.housesCount||e.houseLinks?.length||0," casas • Slug: ",e.slug]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[Z(e.status),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:s=>{s.stopPropagation(),M(e)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(o,{className:"w-4 h-4"})}),a.jsx("button",{onClick:s=>{s.stopPropagation(),G(e)},className:`p-2 rounded ${"ACTIVE"===e.status?"text-yellow-600 hover:bg-yellow-50":"text-green-600 hover:bg-green-50"}`,children:"ACTIVE"===e.status?"⏸️":"▶️"}),a.jsx("button",{onClick:s=>{s.stopPropagation(),z(e.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded",children:a.jsx(x.Z,{className:"w-4 h-4"})})]}),C===e.id?a.jsx(m,{className:"w-5 h-5 text-gray-400"}):a.jsx(u,{className:"w-5 h-5 text-gray-400"})]})]}),C===e.id&&(0,a.jsxs)("div",{className:"border-t border-gray-100 p-4 bg-gray-50",children:[e.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-medium text-gray-700",children:"Casas de Apuestas con Link Espec\xedfico"}),(0,a.jsxs)(d.z,{size:"sm",variant:"outline",onClick:()=>B(e.id),children:[a.jsx(n.Z,{className:"w-4 h-4 mr-1"}),"A\xf1adir Casa"]})]}),e.houseLinks&&0!==e.houseLinks.length?a.jsx("div",{className:"space-y-2",children:e.houseLinks.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.house?.logoUrl?a.jsx("img",{src:e.house.logoUrl,alt:e.house?.name,className:"w-8 h-8 object-contain"}):a.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center text-xs font-bold",children:e.house?.name?.charAt(0)||"?"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.house?.name||"Casa desconocida",e.commissionCents&&(0,a.jsxs)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:["€",(e.commissionCents/100).toFixed(2)," / conversi\xf3n"]})]}),a.jsx("div",{className:"text-xs text-gray-500 truncate max-w-md",children:e.affiliateUrl})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:e.affiliateUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-blue-600 rounded",onClick:e=>e.stopPropagation(),children:a.jsx(p.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>H(e.id),className:"p-2 text-gray-400 hover:text-red-600 rounded",children:a.jsx(x.Z,{className:"w-4 h-4"})})]})]})},e.id))}):(0,a.jsxs)("div",{className:"text-center py-6 bg-white rounded-lg border border-dashed border-gray-300",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"No hay casas configuradas"}),a.jsx(d.z,{size:"sm",variant:"outline",onClick:()=>B(e.id),children:"A\xf1adir Primera Casa"})]})]})]},e.id))}),j&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:v?"Editar Campa\xf1a":"Nueva Campa\xf1a"}),a.jsx("button",{onClick:()=>N(!1),className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(h.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Campa\xf1a *"}),a.jsx("input",{type:"text",value:D.name,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Ej: Campa\xf1a Navidad 2025"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug (URL) *"}),a.jsx("input",{type:"text",value:D.slug,onChange:e=>k({...D,slug:e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"campana-navidad-2025",disabled:!!v}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo letras min\xfasculas, n\xfameros y guiones"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),a.jsx("textarea",{value:D.description,onChange:e=>k({...D,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",rows:3,placeholder:"Descripci\xf3n de la campa\xf1a..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:D.status,onChange:e=>k({...D,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[a.jsx("option",{value:"ACTIVE",children:"Activo"}),a.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(d.z,{variant:"outline",onClick:()=>N(!1),children:"Cancelar"}),a.jsx(d.z,{onClick:V,disabled:I||!D.name||!D.slug,className:"bg-red-600 hover:bg-red-700",children:I?"Guardando...":v?"Guardar Cambios":"Crear Campa\xf1a"})]})]})})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"A\xf1adir Casa a la Campa\xf1a"}),a.jsx("button",{onClick:()=>S(!1),className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(h.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casa de Apuestas *"}),(0,a.jsxs)("select",{value:T.bettingHouseId,onChange:e=>R({...T,bettingHouseId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[a.jsx("option",{value:"",children:"Selecciona una casa..."}),t.filter(e=>"ACTIVE"===e.status).map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de Afiliaci\xf3n Espec\xedfico *"}),a.jsx("input",{type:"url",value:T.affiliateUrl,onChange:e=>R({...T,affiliateUrl:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"https://casa.com/promo-especial?aff=..."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Este es el link espec\xedfico de esta campa\xf1a para esta casa"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n por Conversi\xf3n (€) *"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:(T.commissionCents/100).toFixed(2),onChange:e=>R({...T,commissionCents:Math.round(100*parseFloat(e.target.value||"0"))}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"50.00"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comisi\xf3n que recibir\xe1 el tipster por cada conversi\xf3n en esta campa\xf1a"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par\xe1metro de Tracking (opcional)"}),a.jsx("input",{type:"text",value:T.trackingParamName,onChange:e=>R({...T,trackingParamName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"subid"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Par\xe1metro donde se a\xf1adir\xe1 el ID del tipster (default: subid)"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(d.z,{variant:"outline",onClick:()=>S(!1),children:"Cancelar"}),a.jsx(d.z,{onClick:_,disabled:I||!T.bettingHouseId||!T.affiliateUrl,className:"bg-red-600 hover:bg-red-700",children:I?"A\xf1adiendo...":"A\xf1adir Casa"})]})]})})})]})}let b=(0,c.Z)("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),j=(0,c.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),N=(0,c.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var v=t(6464);let f=(0,c.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),C=(0,c.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),w={ES:"Espa\xf1a",MX:"M\xe9xico",AR:"Argentina",CO:"Colombia",CL:"Chile",PE:"Per\xfa",DE:"Alemania",IT:"Italia",PT:"Portugal",FR:"Francia",UK:"Reino Unido",US:"Estados Unidos"};function D(){let[e,s]=(0,r.useState)(!0),[t,l]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[i,d]=(0,r.useState)({totalClicks:0,uniqueUsers:0,conversions:0,conversionRate:0}),[n,c]=(0,r.useState)([]),[o,x]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[D,k]=(0,r.useState)(""),[E,S]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[T,R]=(0,r.useState)([]),[I,$]=(0,r.useState)([]),[U,F]=(0,r.useState)([]);return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCCA Estad\xedsticas de Afiliaci\xf3n"}),a.jsx("p",{className:"text-sm text-gray-500",children:"M\xe9tricas de clicks, conversiones y comisiones por tipster, campa\xf1a y casa"})]})}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:t.startDate,onChange:e=>l({...t,startDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:t.endDate,onChange:e=>l({...t,endDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:D,onChange:e=>k(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),T.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Campa\xf1a"}),(0,a.jsxs)("select",{value:E,onChange:e=>S(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todas"}),I.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Casa"}),(0,a.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todas"}),U.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(b,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalClicks.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500",children:"Clicks Totales"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(j,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.uniqueUsers.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500",children:"Usuarios \xdanicos"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(N,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.conversions.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500",children:"Conversiones"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(v.Z,{className:"w-5 h-5 text-yellow-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[i.conversionRate.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Tasa Conversi\xf3n"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(j,{className:"w-5 h-5 text-gray-500"}),"Por Tipster"]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Conversiones"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Conv."})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===g.length?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No hay datos para el per\xedodo seleccionado"})}):g.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3 font-medium",children:e.tipsterName}),a.jsx("td",{className:"px-4 py-3 text-right",children:e.totalClicks.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:e.conversions.toLocaleString()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-blue-600 font-medium",children:["€",(e.commissionEarned/100).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-gray-500",children:[e.totalClicks>0?(e.conversions/e.totalClicks*100).toFixed(1):0,"%"]})]},e.tipsterId))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(f,{className:"w-5 h-5 text-gray-500"}),"Por Pa\xeds"]})}),a.jsx("div",{className:"p-4",children:0===n.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):a.jsx("div",{className:"space-y-3",children:n.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:{ES:"\uD83C\uDDEA\uD83C\uDDF8",MX:"\uD83C\uDDF2\uD83C\uDDFD",AR:"\uD83C\uDDE6\uD83C\uDDF7",CO:"\uD83C\uDDE8\uD83C\uDDF4",CL:"\uD83C\uDDE8\uD83C\uDDF1",PE:"\uD83C\uDDF5\uD83C\uDDEA",DE:"\uD83C\uDDE9\uD83C\uDDEA",IT:"\uD83C\uDDEE\uD83C\uDDF9",PT:"\uD83C\uDDF5\uD83C\uDDF9",FR:"\uD83C\uDDEB\uD83C\uDDF7",UK:"\uD83C\uDDEC\uD83C\uDDE7",US:"\uD83C\uDDFA\uD83C\uDDF8"}[e.country]||"\uD83C\uDF0D"}),a.jsx("span",{className:"text-sm",children:w[e.country]||e.country})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.clicks," clicks"]}),(0,a.jsxs)("span",{className:"text-sm text-green-600",children:[e.conversions," conv."]})]})]},e.country))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(C,{className:"w-5 h-5 text-gray-500"}),"Por Casa de Apuestas"]})}),a.jsx("div",{className:"p-4",children:0===o.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):a.jsx("div",{className:"space-y-3",children:o.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.houseLogo?a.jsx("img",{src:e.houseLogo,alt:e.houseName,className:"w-6 h-6 object-contain"}):a.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center text-xs font-bold",children:e.houseName.charAt(0)}),a.jsx("span",{className:"text-sm",children:e.houseName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.clicks," clicks"]}),(0,a.jsxs)("span",{className:"text-sm text-green-600",children:[e.conversions," conv."]})]})]},e.houseId))})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDCE2 Por Campa\xf1a"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campa\xf1a"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Conversiones"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Conv."})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===p.length?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500",children:"No hay datos para el per\xedodo seleccionado"})}):p.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3 font-medium",children:e.campaignName}),a.jsx("td",{className:"px-4 py-3 text-right",children:e.clicks.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right text-green-600",children:e.conversions.toLocaleString()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-gray-500",children:[e.clicks>0?(e.conversions/e.clicks*100).toFixed(1):0,"%"]})]},e.campaignId))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDCC8 Evoluci\xf3n Diaria"})}),a.jsx("div",{className:"p-4",children:0===m.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):a.jsx("div",{className:"space-y-2",children:m.slice(-14).map(e=>{let s=Math.max(...m.map(e=>e.clicks),1),t=e.clicks/s*100;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-20 text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),a.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full",style:{width:`${t}%`}})}),(0,a.jsxs)("div",{className:"w-24 text-right text-sm",children:[a.jsx("span",{className:"text-gray-700",children:e.clicks}),(0,a.jsxs)("span",{className:"text-green-600 ml-2",children:["+",e.conversions]})]})]},e.date)})})})]})]})}let k=[{code:"ES",name:"Espa\xf1a"},{code:"DE",name:"Alemania"},{code:"IT",name:"Italia"},{code:"AT",name:"Austria"},{code:"PT",name:"Portugal"},{code:"GR",name:"Grecia"},{code:"BE",name:"B\xe9lgica"},{code:"NL",name:"Pa\xedses Bajos"},{code:"MX",name:"M\xe9xico"},{code:"CO",name:"Colombia"},{code:"AR",name:"Argentina"},{code:"CL",name:"Chile"},{code:"PE",name:"Per\xfa"},{code:"US",name:"Estados Unidos"},{code:"UK",name:"Reino Unido"},{code:"FR",name:"Francia"}];function E(){let[e,s]=(0,r.useState)("campaigns"),[t,l]=(0,r.useState)(!0),[d,n]=(0,r.useState)([]),[c,o]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[b,j]=(0,r.useState)(!1),[N,v]=(0,r.useState)({tipsterId:"",houseId:"",status:"",startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[f,C]=(0,r.useState)({total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),[w,E]=(0,r.useState)([]),[S,P]=(0,r.useState)(!1),[A,T]=(0,r.useState)(null),[R,I]=(0,r.useState)(!1),[$,U]=(0,r.useState)(null),[F,M]=(0,r.useState)(!1),[L,O]=(0,r.useState)(!1),[V,z]=(0,r.useState)(null),[G,q]=(0,r.useState)({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""}),[B,_]=(0,r.useState)({name:"",slug:"",description:"",houseIds:[],targetCountries:[]}),[H,Z]=(0,r.useState)({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),[Q,J]=(0,r.useState)({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),[Y,K]=(0,r.useState)(!1),[W,X]=(0,r.useState)(null),ee=async()=>{if("campaigns"===e||"stats"===e){l(!1);return}l(!0),X(null);try{if("houses"===e){let e=await i.Qm.admin.getHouses(!0);n(e.data||[])}else if("import"===e){let[e,s]=await Promise.all([i.Qm.admin.getHouses(!0),i.Qm.admin.getImportBatches()]);n(e.data||[]),m(s.data||[])}else if("conversions"===e)await es();else if("payouts"===e){let e=await i.Qm.admin.getPayouts();p(e.data||[])}}catch(e){X(e.response?.data?.message||"Error al cargar datos")}finally{l(!1)}},es=async()=>{j(!0);try{let[e,s,t]=await Promise.all([i.Qm.admin.getReferrals(N),i.Qm.admin.getHouses(!0),i.Qm.admin.getTipsters()]);g(e.data.referrals||[]),C(e.data.stats||{total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),n(s.data||[]),E(t.data||[])}catch(e){console.error("Error loading referrals:",e)}finally{j(!1)}},et=async(e,s)=>{try{await i.Qm.admin.updateReferralStatus(e,s),await es()}catch(e){console.error("Error updating referral status:",e),alert("Error al actualizar estado")}},ea=e=>{e?(T(e),q({name:e.name,slug:e.slug,logoUrl:e.logoUrl||"",masterAffiliateUrl:e.masterAffiliateUrl,trackingParamName:e.trackingParamName,commissionPerReferralCents:e.commissionPerReferralCents,allowedCountries:e.allowedCountries,blockedCountries:e.blockedCountries,description:e.description||"",websiteUrl:e.websiteUrl||""})):(T(null),q({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""})),P(!0)},er=async()=>{K(!0),X(null);try{A?await i.Qm.admin.updateHouse(A.id,G):await i.Qm.admin.createHouse(G),P(!1),ee()}catch(e){X(e.response?.data?.message||"Error al guardar casa")}finally{K(!1)}},el=async e=>{try{await i.Qm.admin.updateHouse(e.id,{status:"ACTIVE"===e.status?"INACTIVE":"ACTIVE"}),ee()}catch(e){X(e.response?.data?.message||"Error al cambiar estado")}},ei=async()=>{K(!0),X(null);try{$?await i.Qm.admin.updateCampaign($.id,B):await i.Qm.admin.createCampaign(B),I(!1),ee()}catch(e){X(e.response?.data?.message||"Error al guardar campa\xf1a")}finally{K(!1)}},ed=async()=>{if(!H.file||!H.houseId){X("Selecciona una casa y un archivo CSV");return}K(!0),X(null);try{let e=new FormData;e.append("file",H.file),e.append("houseId",H.houseId),e.append("periodMonth",H.periodMonth),await i.Qm.admin.importCsv(e),M(!1),Z({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),ee()}catch(e){X(e.response?.data?.message||"Error al importar CSV")}finally{K(!1)}},en=async()=>{let e=prompt("Ingresa el per\xedodo (formato: YYYY-MM)",new Date().toISOString().slice(0,7));if(e){K(!0),X(null);try{await i.Qm.admin.generatePayouts(e),ee()}catch(e){X(e.response?.data?.message||"Error al generar liquidaciones")}finally{K(!1)}}},ec=e=>{z(e),J({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),O(!0)},eo=async()=>{if(V){K(!0),X(null);try{await i.Qm.admin.markPayoutPaid(V.id,Q),O(!1),ee()}catch(e){X(e.response?.data?.message||"Error al marcar como pagado")}finally{K(!1)}}},ex=e=>a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${{ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",PAID:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-blue-100 text-blue-800",FAILED:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e});return t?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83E\uDD1D Afiliaci\xf3n"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona casas de apuestas, campa\xf1as y liquidaciones de afiliados"})]}),W&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-red-600",children:W}),a.jsx("button",{onClick:()=>X(null),className:"text-sm text-red-500 underline mt-1",children:"Cerrar"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex -mb-px overflow-x-auto",children:[{id:"campaigns",label:"\uD83D\uDCE2 Campa\xf1as"},{id:"houses",label:"\uD83C\uDFE0 Casas de Apuestas"},{id:"stats",label:"\uD83D\uDCCA Estad\xedsticas"},{id:"conversions",label:"\uD83D\uDC65 Conversiones"},{id:"import",label:"\uD83D\uDCE4 Importar CSV"},{id:"payouts",label:"\uD83D\uDCB5 Liquidaciones"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:`px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap ${e===t.id?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.label,"conversions"===t.id&&f.pending>0&&a.jsx("span",{className:"ml-2 bg-yellow-500 text-white px-2 py-0.5 rounded-full text-xs",children:f.pending})]},t.id))})}),(0,a.jsxs)("div",{className:"p-6",children:["campaigns"===e&&a.jsx(y,{}),"houses"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Casas de Apuestas"}),a.jsx("button",{onClick:()=>ea(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Nueva Casa"})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pa\xedses"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.logoUrl?a.jsx("img",{src:e.logoUrl,alt:e.name,className:"w-10 h-10 object-contain"}):a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center font-bold",children:e.name.charAt(0)}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsx("div",{className:"text-sm text-gray-500",children:e.slug})]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-green-600 font-medium",children:["€",e.commissionPerReferralEur,"/ref"]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.allowedCountries.length>0?`✅ ${e.allowedCountries.join(", ")}`:e.blockedCountries.length>0?`❌ ${e.blockedCountries.join(", ")}`:"Todos"}),a.jsx("td",{className:"px-4 py-3 text-center",children:ex(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[a.jsx("button",{onClick:()=>ea(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Editar"}),a.jsx("button",{onClick:()=>el(e),className:"ACTIVE"===e.status?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800",children:"ACTIVE"===e.status?"Desactivar":"Activar"})]})]},e.id))})]})})]}),"stats"===e&&a.jsx(D,{}),"conversions"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDC65 Listado de Referidos"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.total}),a.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:f.pending}),a.jsx("div",{className:"text-xs text-gray-500",children:"Pendientes"})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.approved}),a.jsx("div",{className:"text-xs text-gray-500",children:"Aprobados"})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.rejected}),a.jsx("div",{className:"text-xs text-gray-500",children:"Rechazados"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["€",(f.totalCommissionCents/100).toFixed(2)]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Comisiones"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:N.tipsterId,onChange:e=>v({...N,tipsterId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),w.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Casa"}),(0,a.jsxs)("select",{value:N.houseId,onChange:e=>v({...N,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todas"}),d.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:N.status,onChange:e=>v({...N,status:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"PENDING",children:"Pendiente"}),a.jsx("option",{value:"APPROVED",children:"Aprobado"}),a.jsx("option",{value:"REJECTED",children:"Rechazado"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:N.startDate,onChange:e=>v({...N,startDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:N.endDate,onChange:e=>v({...N,endDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:es,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"\uD83D\uDD0D Aplicar Filtros"})})]})]}),a.jsx("div",{className:"overflow-x-auto",children:b?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===h.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDC65"}),a.jsx("p",{className:"text-gray-500",children:"No hay referidos con los filtros seleccionados"})]}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),a.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usuario"}),a.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),a.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),a.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),a.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",children:new Date(e.clickedAt||e.convertedAt||new Date).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-900",children:e.tipsterName}),a.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:e.houseName}),(0,a.jsxs)("td",{className:"px-3 py-3",children:[a.jsx("div",{className:"text-sm text-gray-900",children:e.userEmail||"An\xf3nimo"}),e.userTelegram&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.userTelegram]}),e.externalRefId&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.externalRefId]})]}),a.jsx("td",{className:"px-3 py-3 text-center text-sm",children:e.country||"\uD83C\uDF0D"}),a.jsx("td",{className:"px-3 py-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"DEPOSIT"===e.eventType?"bg-green-100 text-green-700":"REGISTER"===e.eventType?"bg-blue-100 text-blue-700":"QUALIFIED"===e.eventType?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:"DEPOSIT"===e.eventType?"\uD83D\uDCB0 Dep\xf3sito":"REGISTER"===e.eventType?"\uD83D\uDCDD Registro":"QUALIFIED"===e.eventType?"✅ Calificado":e.eventType||"Click"})}),(0,a.jsxs)("td",{className:"px-3 py-3 text-right text-sm font-medium text-green-600",children:["€",(e.commissionCents/100).toFixed(2)]}),a.jsx("td",{className:"px-3 py-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"APPROVED"===e.status?"bg-green-100 text-green-700":"REJECTED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:"PENDING"===e.status?"⏳ Pendiente":"APPROVED"===e.status?"✅ Aprobado":"REJECTED"===e.status?"❌ Rechazado":e.status})}),a.jsx("td",{className:"px-3 py-3 text-center",children:"PENDING"===e.status&&(0,a.jsxs)("div",{className:"flex gap-1 justify-center",children:[a.jsx("button",{onClick:()=>et(e.id,"APPROVED"),className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200",children:"✓"}),a.jsx("button",{onClick:()=>et(e.id,"REJECTED"),className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200",children:"✗"})]})})]},e.id))})]})})]}),"import"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Importar Conversiones (CSV)"}),a.jsx("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Importar CSV"})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Formato CSV est\xe1ndar:"})," tipster_tracking_id, event_type (REGISTER/DEPOSIT/QUALIFIED), status (PENDING/APPROVED/REJECTED), occurred_at, external_ref_id (opcional), amount (opcional)"]})}),a.jsx("h3",{className:"font-medium mb-3",children:"Historial de Importaciones"}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Archivo"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Filas"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3 font-medium",children:e.houseName}),a.jsx("td",{className:"px-4 py-3",children:e.periodMonth}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.fileName}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[e.processedRows,"/",e.totalRows,e.errorRows>0&&(0,a.jsxs)("span",{className:"text-red-500 ml-1",children:["(",e.errorRows," err)"]})]}),a.jsx("td",{className:"px-4 py-3 text-center",children:ex(e.status)}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.importedAt).toLocaleDateString("es-ES")})]},e.id))})]})})]}),"payouts"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Liquidaciones de Afiliaci\xf3n"}),a.jsx("button",{onClick:en,disabled:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Generando...":"⚡ Generar Liquidaciones"})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Referidos"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-3 font-medium",children:e.tipsterName}),a.jsx("td",{className:"px-4 py-3",children:e.periodMonth}),a.jsx("td",{className:"px-4 py-3 text-center",children:e.totalReferrals}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-green-600",children:["€",e.totalAmountEur.toFixed(2)]}),a.jsx("td",{className:"px-4 py-3 text-center",children:ex(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:["PENDING"===e.status&&a.jsx("button",{onClick:()=>ec(e),className:"text-green-600 hover:text-green-800 font-medium",children:"Marcar Pagado"}),"PAID"===e.status&&a.jsx("span",{className:"text-sm text-gray-500",children:e.paidAt?new Date(e.paidAt).toLocaleDateString("es-ES"):"-"})]})]},e.id))})]})})]})]})]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto py-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:A?"Editar Casa de Apuestas":"Nueva Casa de Apuestas"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:G.name,onChange:e=>q({...G,name:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Bwin"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),a.jsx("input",{type:"text",value:G.slug,onChange:e=>q({...G,slug:e.target.value.toLowerCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"bwin",disabled:!!A})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del Logo"}),a.jsx("input",{type:"url",value:G.logoUrl,onChange:e=>q({...G,logoUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Maestro de Afiliaci\xf3n *"}),a.jsx("input",{type:"url",value:G.masterAffiliateUrl,onChange:e=>q({...G,masterAffiliateUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://bwin.com/register?affiliate=antia"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par\xe1metro de Tracking"}),a.jsx("input",{type:"text",value:G.trackingParamName,onChange:e=>q({...G,trackingParamName:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"subid"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n por Referido (€) *"}),a.jsx("input",{type:"number",value:G.commissionPerReferralCents/100,onChange:e=>q({...G,commissionPerReferralCents:Math.round(100*parseFloat(e.target.value))}),className:"w-full border rounded-lg px-3 py-2",step:"0.01",min:"0"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Permitidos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[a.jsx("input",{type:"checkbox",checked:G.allowedCountries.includes(e.code),onChange:s=>{s.target.checked?q({...G,allowedCountries:[...G.allowedCountries,e.code]}):q({...G,allowedCountries:G.allowedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Bloqueados"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[a.jsx("input",{type:"checkbox",checked:G.blockedCountries.includes(e.code),onChange:s=>{s.target.checked?q({...G,blockedCountries:[...G.blockedCountries,e.code]}):q({...G,blockedCountries:G.blockedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),a.jsx("textarea",{value:G.description,onChange:e=>q({...G,description:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL"}),a.jsx("input",{type:"url",value:G.websiteUrl,onChange:e=>q({...G,websiteUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://www.bwin.com"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:er,disabled:Y||!G.name||!G.slug||!G.masterAffiliateUrl,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Guardando...":"Guardar"})]})]})})}),R&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:$?"Editar Campa\xf1a":"Nueva Campa\xf1a"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:B.name,onChange:e=>_({...B,name:e.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),a.jsx("input",{type:"text",value:B.slug,onChange:e=>_({...B,slug:e.target.value.toLowerCase()}),className:"w-full border rounded-lg px-3 py-2",disabled:!!$})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),a.jsx("textarea",{value:B.description,onChange:e=>_({...B,description:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casas incluidas *"}),a.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-2",children:d.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-1",children:[a.jsx("input",{type:"checkbox",checked:B.houseIds.includes(e.id),onChange:s=>{s.target.checked?_({...B,houseIds:[...B.houseIds,e.id]}):_({...B,houseIds:B.houseIds.filter(s=>s!==e.id)})}}),a.jsx("span",{children:e.name})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:ei,disabled:Y||!B.name||!B.slug,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Guardando...":"Guardar"})]})]})})}),F&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Importar CSV"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casa de Apuestas *"}),(0,a.jsxs)("select",{value:H.houseId,onChange:e=>Z({...H,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Selecciona una casa"}),d.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per\xedodo (YYYY-MM) *"}),a.jsx("input",{type:"month",value:H.periodMonth,onChange:e=>Z({...H,periodMonth:e.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo CSV *"}),a.jsx("input",{type:"file",accept:".csv",onChange:e=>Z({...H,file:e.target.files?.[0]||null}),className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:ed,disabled:Y||!H.houseId||!H.file,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Importando...":"Importar"})]})]})})}),L&&V&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Marcar como Pagado"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Tipster"}),a.jsx("div",{className:"font-medium",children:V.tipsterName}),a.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Monto"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600",children:["€",V.totalAmountEur.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de Pago"}),(0,a.jsxs)("select",{value:Q.paymentMethod,onChange:e=>J({...Q,paymentMethod:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"BANK_TRANSFER",children:"Transferencia Bancaria"}),a.jsx("option",{value:"PAYPAL",children:"PayPal"}),a.jsx("option",{value:"OTHER",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia de Pago"}),a.jsx("input",{type:"text",value:Q.paymentReference,onChange:e=>J({...Q,paymentReference:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"N\xfamero de transferencia, ID, etc."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),a.jsx("textarea",{value:Q.notes,onChange:e=>J({...Q,notes:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:eo,disabled:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:Y?"Procesando...":"Confirmar Pago"})]})]})})})]})}var S=t(2940),P=t(8149);function A(){let e=(0,l.useRouter)(),{formatPrice:s,symbol:t}=(0,P.U)(),[d,n]=(0,r.useState)("tipsters"),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[u,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[v,f]=(0,r.useState)([]),[C,w]=(0,r.useState)(null),[D,k]=(0,r.useState)(!1),[A,T]=(0,r.useState)({customFeePercent:10,useCustomFee:!1,autoTierEnabled:!0,notes:""}),[R,I]=(0,r.useState)([]),[$,U]=(0,r.useState)(!1),[F,M]=(0,r.useState)({baseCurrency:"EUR",targetCurrency:"USD",rate:1.08}),[L,O]=(0,r.useState)("summary"),[V,z]=(0,r.useState)(null),[G,q]=(0,r.useState)("EUR"),[B,_]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[H,Z]=(0,r.useState)(!1),[Q,J]=(0,r.useState)([]),[Y,K]=(0,r.useState)({pending:0,approved:0,rejected:0}),[W,X]=(0,r.useState)("PENDING"),[ee,es]=(0,r.useState)(null),[et,ea]=(0,r.useState)(!1),[er,el]=(0,r.useState)(!1),[ei,ed]=(0,r.useState)(""),[en,ec]=(0,r.useState)([]),[eo,ex]=(0,r.useState)(!1),[em,eu]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""}),[ep,eh]=(0,r.useState)({totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0}),[eg,ey]=(0,r.useState)([]),[eb,ej]=(0,r.useState)(!1),[eN,ev]=(0,r.useState)(""),[ef,eC]=(0,r.useState)(null),[ew,eD]=(0,r.useState)(""),[ek,eE]=(0,r.useState)(!1),[eS,eP]=(0,r.useState)({open:0,inProgress:0,resolved:0}),eA=async()=>{ex(!0);try{let e=await i.Nq.sales.getAll(em);ec(e.data.sales||[]),eh(e.data.stats||{totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0})}catch(e){console.error("Error loading sales:",e)}finally{ex(!1)}},eT=async()=>{ej(!0);try{let e=await i.Nq.support.getAll(eN||void 0);ey(e.data.tickets||[])}catch(e){console.error("Error loading tickets:",e)}finally{ej(!1)}},eR=async()=>{try{let e=await i.Nq.support.getStats();eP(e.data)}catch(e){console.error("Error loading ticket stats:",e)}},eI=async()=>{if(ef&&ew.trim()){eE(!0);try{await i.Nq.support.reply(ef.id,ew.trim()),eD("");let e=await i.Nq.support.getOne(ef.id);eC(e.data.ticket),eT()}catch(e){console.error("Error sending reply:",e),alert("Error al enviar respuesta")}finally{eE(!1)}}},e$=async(e,s)=>{try{await i.Nq.support.updateStatus(e,s),eT(),eR(),ef?.id===e&&eC({...ef,status:s})}catch(e){console.error("Error updating ticket status:",e),alert("Error al actualizar estado")}},eU=async()=>{try{let e=await i.Nq.applications.getAll(W);J(e.data.applications||[])}catch(e){console.error("Error loading applications:",e)}},eF=async()=>{try{let e=await i.Nq.applications.getStats();K(e.data)}catch(e){console.error("Error loading application stats:",e)}},eM=async e=>{if(ee){if("REJECT"===e&&!ei.trim()){alert("Por favor, indica el motivo del rechazo");return}el(!0);try{(await i.Nq.applications.review(ee.id,{action:e,rejectionReason:"REJECT"===e?ei:void 0})).data.success&&(alert("APPROVE"===e?"✅ Solicitud aprobada. El tipster ya puede acceder.":"❌ Solicitud rechazada."),ea(!1),es(null),ed(""),eU(),eF())}catch(e){alert("Error: "+(e.response?.data?.message||"Error al procesar"))}finally{el(!1)}}},eL=async()=>{try{let e=await i.Nq.commissions.getAll();f(e.data||[])}catch(e){console.error("Error loading commissions:",e)}},eO=async()=>{try{let e=await i.jk.getRates();I(e.data.rates||[])}catch(e){console.error("Error loading exchange rates:",e)}},eV=async()=>{Z(!0);try{let e;let s={...B,currency:G};switch(L){case"summary":e=await i.Nq.reports.getSummary(G);break;case"sales":e=await i.Nq.reports.getSales(s);break;case"platform":e=await i.Nq.reports.getPlatform(s);break;case"settlements":e=await i.Nq.reports.getSettlements(s);break;case"tipsters":e=await i.Nq.reports.getTipsters(s)}z(e?.data)}catch(e){console.error("Error loading report:",e),z(null)}finally{Z(!1)}},ez=async(e,s,t)=>{g(e);try{await i.Nq.tipsters.updateModules(e,"forecasts"===s?{moduleForecasts:!t}:{moduleAffiliate:!t}),p(a=>a.map(a=>a.id===e?{...a,modules:{...a.modules,[s]:!t}}:a))}catch(e){alert("Error al actualizar m\xf3dulo")}finally{g(null)}},eG=e=>{b(e),N(!0)},eq=e=>{w(e),T({customFeePercent:e.config.customFeePercent||e.config.platformFeePercent,useCustomFee:e.config.useCustomFee,autoTierEnabled:e.config.autoTierEnabled,notes:e.config.notes||""}),k(!0)},eB=async()=>{if(C)try{await i.Nq.commissions.update(C.tipsterId,A),k(!1),eL()}catch(e){alert("Error al guardar comisi\xf3n")}},e_=async()=>{try{await i.jk.admin.setRate(F.baseCurrency,F.targetCurrency,F.rate),U(!1),eO()}catch(e){alert("Error al establecer tipo de cambio")}},eH=async(e,s)=>{try{await i.jk.admin.removeOverride(e,s),eO()}catch(e){alert("Error al eliminar override")}},eZ=async()=>{try{let e=await i.Nq.reports.exportCSV(L,{...B}),s=new Blob([e.data],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`antia_${L}_${new Date().toISOString().split("T")[0]}.csv`,a.click()}catch(e){alert("Error al exportar CSV")}},eQ=async()=>{try{await i.iJ.logout()}catch(e){}localStorage.removeItem("access_token"),e.push("/")},eJ=(e,s="EUR")=>`${"USD"===s?"$":"€"}${(e/100).toFixed(2)}`;return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):x?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 mb-4",children:x}),a.jsx("button",{onClick:()=>e.push("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Volver al Login"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("aside",{className:"fixed top-0 left-0 w-64 h-full bg-white border-r border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"Antia Admin"}),a.jsx("div",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded inline-block mb-6",children:"SuperAdmin"}),(0,a.jsxs)("nav",{className:"space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>n("applications"),className:`w-full text-left px-4 py-2 rounded-lg flex items-center justify-between ${"applications"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83D\uDCCB Solicitudes"}),Y.pending>0&&a.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse",children:Y.pending})]}),a.jsx("button",{onClick:()=>n("tipsters"),className:`w-full text-left px-4 py-2 rounded-lg ${"tipsters"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"\uD83D\uDC65 Gesti\xf3n Tipsters"}),a.jsx("button",{onClick:()=>n("sales"),className:`w-full text-left px-4 py-2 rounded-lg ${"sales"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"\uD83D\uDED2 Ventas Checkout"}),(0,a.jsxs)("button",{onClick:()=>n("support"),className:`w-full text-left px-4 py-2 rounded-lg flex items-center justify-between ${"support"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83C\uDFAB Soporte"}),eS.open>0&&a.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:eS.open})]}),a.jsx("button",{onClick:()=>n("affiliate"),className:`w-full text-left px-4 py-2 rounded-lg ${"affiliate"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"\uD83E\uDD1D Afiliaci\xf3n"}),a.jsx("button",{onClick:()=>n("commissions"),className:`w-full text-left px-4 py-2 rounded-lg ${"commissions"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"\uD83D\uDCB0 Comisiones"}),a.jsx("button",{onClick:()=>n("reports"),className:`w-full text-left px-4 py-2 rounded-lg ${"reports"===d?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:"\uD83D\uDCCA Reportes"}),a.jsx("button",{onClick:eQ,className:"w-full text-left px-4 py-2 rounded-lg text-red-600 hover:bg-red-50",children:"\uD83D\uDEAA Cerrar Sesi\xf3n"})]})]})}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:[a.jsx("div",{className:"fixed top-4 right-8 z-50",children:a.jsx(S.Z,{variant:"pill"})}),"applications"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCB Solicitudes de Registro"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Revisa y aprueba las solicitudes de nuevos tipsters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>X("PENDING"),className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"PENDING"===W?"border-yellow-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Pendientes"}),a.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:Y.pending})]}),(0,a.jsxs)("div",{onClick:()=>X("APPROVED"),className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"APPROVED"===W?"border-green-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Aprobadas"}),a.jsx("div",{className:"text-3xl font-bold text-green-600",children:Y.approved})]}),(0,a.jsxs)("div",{onClick:()=>X("REJECTED"),className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"REJECTED"===W?"border-red-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"❌ Rechazadas"}),a.jsx("div",{className:"text-3xl font-bold text-red-600",children:Y.rejected})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Total"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Y.pending+Y.approved+Y.rejected})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["PENDING"===W&&"⏳ Solicitudes Pendientes","APPROVED"===W&&"✅ Solicitudes Aprobadas","REJECTED"===W&&"❌ Solicitudes Rechazadas"]})}),0===Q.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["No hay solicitudes ",W.toLowerCase()]})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:Q.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:e.publicName}),"PENDING"===e.applicationStatus&&a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"⏳ Pendiente"}),"APPROVED"===e.applicationStatus&&a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"✅ Aprobado"}),"REJECTED"===e.applicationStatus&&a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"❌ Rechazado"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-400",children:"\uD83D\uDCE7 Email:"}),a.jsx("p",{className:"font-medium",children:e.email||"N/A"})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-400",children:"\uD83D\uDCF1 Telegram:"}),a.jsx("p",{className:"font-medium",children:e.telegramUsername||"N/A"})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-400",children:"\uD83C\uDF0D Pa\xeds:"}),a.jsx("p",{className:"font-medium",children:e.country||"N/A"})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-400",children:"\uD83D\uDCC5 Fecha:"}),a.jsx("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]}),e.experience&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2 line-clamp-1",children:[a.jsx("span",{className:"font-medium",children:"Experiencia:"})," ",e.experience]}),e.rejectionReason&&(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:[a.jsx("span",{className:"font-medium",children:"Motivo rechazo:"})," ",e.rejectionReason]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>{es(e),ea(!0)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Ver Detalles"}),"PENDING"===e.applicationStatus&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{es(e),eM("APPROVE")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"✅ Aprobar"}),a.jsx("button",{onClick:()=>{es(e),ea(!0)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"❌ Rechazar"})]})]})]})},e.id))})]})]}),"tipsters"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDC65 Gesti\xf3n de Tipsters"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Controla los m\xf3dulos habilitados para cada tipster"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Con Pron\xf3sticos"}),a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:u.filter(e=>e.modules.forecasts).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Con Afiliaci\xf3n"}),a.jsx("div",{className:"text-3xl font-bold text-purple-600",children:u.filter(e=>e.modules.affiliate).length})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Lista de Tipsters"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"KYC"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pron\xf3sticos"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Afiliaci\xf3n"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-semibold",children:e.publicName?.charAt(0).toUpperCase()||"?"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.publicName}),e.telegramUsername&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.telegramUsername]})]})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.email||"-"}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:e.kycCompleted?"✓ Completo":"Pendiente"})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("button",{onClick:()=>ez(e.id,"forecasts",e.modules.forecasts),disabled:h===e.id,className:`relative inline-flex h-6 w-11 rounded-full transition-colors ${e.modules.forecasts?"bg-blue-600":"bg-gray-200"} ${h===e.id?"opacity-50":""}`,children:a.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${e.modules.forecasts?"translate-x-5":"translate-x-0"}`})})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("button",{onClick:()=>ez(e.id,"affiliate",e.modules.affiliate),disabled:h===e.id,className:`relative inline-flex h-6 w-11 rounded-full transition-colors ${e.modules.affiliate?"bg-purple-600":"bg-gray-200"} ${h===e.id?"opacity-50":""}`,children:a.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${e.modules.affiliate?"translate-x-5":"translate-x-0"}`})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("button",{onClick:()=>eG(e),className:"px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 text-sm font-medium transition",children:"Ver Info"})})]},e.id))})]})})]})]}),"sales"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDED2 Ventas Checkout"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Listado completo de todas las ventas de la plataforma"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB0 Volumen Bruto"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s(ep.totalGrossCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Comisi\xf3n Antia"}),a.jsx("div",{className:"text-2xl font-bold text-red-600",children:s(ep.totalPlatformFeeCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB5 Neto Tipsters"}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:s(ep.totalNetCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDED2 Total Ventas"}),a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ep.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"\uD83D\uDD0D Filtros"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:em.startDate,onChange:e=>eu({...em,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:em.endDate,onChange:e=>eu({...em,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:em.tipsterId,onChange:e=>eu({...em,tipsterId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),u.map(e=>a.jsx("option",{value:e.id,children:e.publicName},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:em.status,onChange:e=>eu({...em,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"PAGADA",children:"Pagada"}),a.jsx("option",{value:"ACCESS_GRANTED",children:"Acceso Otorgado"}),a.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),a.jsx("option",{value:"REFUNDED",children:"Reembolsada"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Pasarela"}),(0,a.jsxs)("select",{value:em.paymentProvider,onChange:e=>eu({...em,paymentProvider:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Todas"}),a.jsx("option",{value:"stripe",children:"Stripe"}),a.jsx("option",{value:"redsys",children:"Redsys"}),a.jsx("option",{value:"test",children:"Test"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Pa\xeds"}),(0,a.jsxs)("select",{value:em.country,onChange:e=>eu({...em,country:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"ES",children:"Espa\xf1a"}),a.jsx("option",{value:"MX",children:"M\xe9xico"}),a.jsx("option",{value:"AR",children:"Argentina"}),a.jsx("option",{value:"CO",children:"Colombia"}),a.jsx("option",{value:"US",children:"Estados Unidos"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[a.jsx("button",{onClick:eA,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"\uD83D\uDD0D Aplicar Filtros"}),a.jsx("button",{onClick:()=>{eu({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm",children:"Limpiar"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:eo?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-500",children:"Cargando ventas..."})]}):0===en.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No hay ventas"}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ajusta los filtros o espera a tener ventas"})]}):(0,a.jsxs)("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pasarela"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:en.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"text-sm text-gray-900",children:e.clientEmail||"An\xf3nimo"}),e.clientTelegramId&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.clientTelegramId]})]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-[200px] truncate",children:e.productTitle})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.tipsterName}),a.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:s(e.grossAmountCents)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-red-600",children:["-",s(e.platformFeeCents),(0,a.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",e.platformFeePercent,"%)"]})]}),a.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-green-600",children:s(e.netAmountCents)}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"stripe"===e.paymentProvider?"bg-purple-100 text-purple-700":"redsys"===e.paymentProvider?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"stripe"===e.paymentProvider?"\uD83D\uDCB3 Stripe":"redsys"===e.paymentProvider?"\uD83C\uDFE6 Redsys":e.paymentProvider||"N/A"})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:"text-sm",children:e.country||"\uD83C\uDF0D"})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"PAGADA"===e.status||"ACCESS_GRANTED"===e.status?"bg-green-100 text-green-700":"PENDIENTE"===e.status?"bg-yellow-100 text-yellow-700":"REFUNDED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:"ACCESS_GRANTED"===e.status?"✅ Acceso":"PAGADA"===e.status?"✅ Pagada":"PENDIENTE"===e.status?"⏳ Pendiente":"REFUNDED"===e.status?"↩️ Reembolso":e.status})})]},e.id))})]})})})]}),"support"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83C\uDFAB Centro de Soporte"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona los tickets de soporte de tipsters y clientes"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>{ev(""),eT()},className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${eN?"border-transparent hover:border-gray-200":"border-gray-400"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Todos"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:eS.open+eS.inProgress+eS.resolved})]}),(0,a.jsxs)("div",{onClick:()=>{ev("OPEN"),eT()},className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"OPEN"===eN?"border-yellow-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Abiertos"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:eS.open})]}),(0,a.jsxs)("div",{onClick:()=>{ev("IN_PROGRESS"),eT()},className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"IN_PROGRESS"===eN?"border-blue-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDD04 En Proceso"}),a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:eS.inProgress})]}),(0,a.jsxs)("div",{onClick:()=>{ev("RESOLVED"),eT()},className:`bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ${"RESOLVED"===eN?"border-green-500":"border-transparent hover:border-gray-200"}`,children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Resueltos"}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:eS.resolved})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h2",{className:"font-bold text-gray-900",children:"\uD83D\uDCCB Tickets"})}),eb?a.jsx("div",{className:"p-8 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===eg.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay tickets"})]}):a.jsx("div",{className:"divide-y divide-gray-100 max-h-[600px] overflow-y-auto",children:eg.map(e=>a.jsx("div",{onClick:()=>eC(e),className:`p-4 cursor-pointer hover:bg-gray-50 transition ${ef?.id===e.id?"bg-red-50 border-l-4 border-red-500":""}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"TIPSTER"===e.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:"TIPSTER"===e.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"OPEN"===e.status?"bg-yellow-100 text-yellow-700":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:"OPEN"===e.status?"Abierto":"IN_PROGRESS"===e.status?"En proceso":"Resuelto"})]}),a.jsx("h4",{className:"font-medium text-gray-900 mt-1 truncate",children:e.subject}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.userName||e.userEmail}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),e.responses?.length>0&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e.responses.length})]})},e.id))})]})}),a.jsx("div",{className:"lg:col-span-2",children:ef?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"TIPSTER"===ef.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:"TIPSTER"===ef.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),a.jsx("span",{className:"text-sm text-gray-500",children:"•"}),a.jsx("span",{className:"text-sm text-gray-600",children:ef.userName||ef.userEmail})]}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:ef.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Creado: ",new Date(ef.createdAt).toLocaleString("es-ES")]})]}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("select",{value:ef.status,onChange:e=>e$(ef.id,e.target.value),className:`px-3 py-1.5 rounded-lg border text-sm font-medium ${"OPEN"===ef.status?"border-yellow-300 bg-yellow-50 text-yellow-700":"IN_PROGRESS"===ef.status?"border-blue-300 bg-blue-50 text-blue-700":"border-green-300 bg-green-50 text-green-700"}`,children:[a.jsx("option",{value:"OPEN",children:"⏳ Abierto"}),a.jsx("option",{value:"IN_PROGRESS",children:"\uD83D\uDD04 En Proceso"}),a.jsx("option",{value:"RESOLVED",children:"✅ Resuelto"})]})})]})}),(0,a.jsxs)("div",{className:"p-6 max-h-[400px] overflow-y-auto space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 mr-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["TIPSTER"===ef.userRole?"\uD83D\uDC64":"\uD83D\uDC65"," ",ef.userName||"Usuario"]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(ef.createdAt).toLocaleString("es-ES")})]}),a.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:ef.message})]}),ef.responses?.map((e,s)=>a.jsxs("div",{className:`p-4 rounded-lg ${e.isAdmin?"bg-red-50 ml-12":"bg-gray-50 mr-12"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${e.isAdmin?"text-red-600":"text-gray-700"}`,children:e.isAdmin?"\uD83D\uDD27 Soporte Antia":`${"TIPSTER"===ef.userRole?"\uD83D\uDC64":"\uD83D\uDC65"} ${ef.userName||"Usuario"}`}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("es-ES")})]}),a.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:e.message})]},s))]}),"RESOLVED"!==ef.status&&(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[a.jsx("div",{className:"flex gap-2",children:a.jsx("textarea",{value:ew,onChange:e=>eD(e.target.value),placeholder:"Escribe tu respuesta...",rows:3,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{eI(),e$(ef.id,"IN_PROGRESS")},disabled:!ew.trim()||ek,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm disabled:opacity-50",children:ek?"...":"\uD83D\uDCAC Responder"}),a.jsx("button",{onClick:()=>{eI(),e$(ef.id,"RESOLVED")},disabled:!ew.trim()||ek,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium text-sm disabled:opacity-50",children:ek?"...":"✅ Responder y Cerrar"})]})]})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAB"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Selecciona un ticket"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Haz clic en un ticket de la lista para ver los detalles y responder"})]})})]})]}),"commissions"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCB0 Gesti\xf3n de Comisiones"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Configura las comisiones de plataforma y tipos de cambio"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCB1 Tipos de Cambio"}),a.jsx("p",{className:"text-sm text-gray-500",children:"EUR / USD - API externa + override manual"})]}),a.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Establecer Manual"})]}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.baseCurrency," → ",e.targetCurrency]}),a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.rate.toFixed(4)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Fuente: ",e.source," ",e.isManualOverride&&"(Manual)"]})]}),e.isManualOverride&&a.jsx("button",{onClick:()=>eH(e.baseCurrency,e.targetCurrency),className:"text-red-600 hover:text-red-800 text-sm",children:"Usar API"})]},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"⚙️ Comisiones por Tipster"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Est\xe1ndar: 10% | Alto volumen (≥€100k/mes): 7%"})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Volumen Mensual"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tier"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"% Efectivo"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Auto-Tier"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.tipsterName}),(0,a.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:["€",e.monthlyVolumeEur]}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"HIGH_VOLUME"===e.currentTier?"bg-green-100 text-green-800":"CUSTOM"===e.currentTier?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:e.currentTier})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-center font-bold text-blue-600",children:[e.effectivePercent,"%"]}),a.jsx("td",{className:"px-6 py-4 text-center",children:e.config.autoTierEnabled?"✅":"❌"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>eq(e),className:"text-blue-600 hover:text-blue-800",children:"Editar"})})]},e.tipsterId))})]})})]})]}),"reports"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Reportes"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Anal\xedtica y exportaci\xf3n de datos"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Reporte"}),(0,a.jsxs)("select",{value:L,onChange:e=>O(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[a.jsx("option",{value:"summary",children:"Resumen General"}),a.jsx("option",{value:"sales",children:"Ventas"}),a.jsx("option",{value:"platform",children:"Ingresos Plataforma"}),a.jsx("option",{value:"settlements",children:"Liquidaciones"}),a.jsx("option",{value:"tipsters",children:"Ranking Tipsters"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),(0,a.jsxs)("select",{value:G,onChange:e=>q(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[a.jsx("option",{value:"EUR",children:"€ EUR"}),a.jsx("option",{value:"USD",children:"$ USD"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),a.jsx("input",{type:"date",value:B.startDate,onChange:e=>_(s=>({...s,startDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),a.jsx("input",{type:"date",value:B.endDate,onChange:e=>_(s=>({...s,endDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),a.jsx("button",{onClick:eV,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Generar"}),"summary"!==L&&a.jsx("button",{onClick:eZ,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDCE5 Exportar CSV"})]})}),H?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):V?(0,a.jsxs)("div",{className:"space-y-6",children:["summary"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Ventas (30 d\xedas)"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:V.last30Days?.totalSales||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto (30 d\xedas)"}),a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:eJ(V.last30Days?.totalGrossCents||0,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia (30 d\xedas)"}),a.jsx("div",{className:"text-3xl font-bold text-green-600",children:eJ(V.last30Days?.platformIncomeCents||0,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Liquidaciones Pendientes"}),a.jsx("div",{className:"text-3xl font-bold text-orange-600",children:eJ(V.settlements?.pendingCents||0,G)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Tipsters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total registrados"}),a.jsx("span",{className:"font-medium",children:V.tipsters?.total||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Con ventas"}),a.jsx("span",{className:"font-medium",children:V.tipsters?.active||0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Liquidaciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Pendientes"}),a.jsx("span",{className:"font-medium text-orange-600",children:V.settlements?.pendingCount||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Pagadas"}),a.jsx("span",{className:"font-medium text-green-600",children:V.settlements?.paidCount||0})]})]})]})]})]}),"sales"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),a.jsx("div",{className:"text-3xl font-bold",children:V.totalSales})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto"}),a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:eJ(V.totalGrossCents,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),a.jsx("div",{className:"text-3xl font-bold text-green-600",children:eJ(V.totalPlatformFeesCents,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Neto Tipsters"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:eJ(V.totalNetCents,G)})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"font-bold",children:"Por Tipster"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:V.byTipster?.map((e,s)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),a.jsx("td",{className:"px-6 py-4 text-right",children:e.sales}),a.jsx("td",{className:"px-6 py-4 text-right text-blue-600",children:eJ(e.grossCents,G)}),a.jsx("td",{className:"px-6 py-4 text-right",children:eJ(e.netCents,G)})]},s))})]})})]})]}),"platform"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Total Pedidos"}),a.jsx("div",{className:"text-3xl font-bold",children:V.totalOrders})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Volumen Bruto"}),a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:eJ(V.totalGrossCents,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),a.jsx("div",{className:"text-3xl font-bold text-green-600",children:eJ(V.totalPlatformFeesCents,G)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"% Promedio"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[V.avgPlatformFeePercent,"%"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"font-bold",children:"Por Mes"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mes"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pedidos"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n Antia"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Fee Pasarela"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:V.byMonth?.map((e,s)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 font-medium",children:e.month}),a.jsx("td",{className:"px-6 py-4 text-right",children:e.orders}),a.jsx("td",{className:"px-6 py-4 text-right text-blue-600",children:eJ(e.grossCents,G)}),a.jsx("td",{className:"px-6 py-4 text-right text-green-600",children:eJ(e.platformFeesCents,G)}),a.jsx("td",{className:"px-6 py-4 text-right text-gray-500",children:eJ(e.gatewayFeesCents,G)})]},s))})]})})]})]}),"tipsters"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),a.jsx("div",{className:"text-3xl font-bold",children:V.totalTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Tipsters Activos"}),a.jsx("div",{className:"text-3xl font-bold text-green-600",children:V.activeTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:V.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"font-bold",children:"Ranking de Tipsters"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Productos"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:V.rankings?.map((e,s)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 font-bold text-gray-400",children:s+1}),a.jsx("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),a.jsx("td",{className:"px-6 py-4 text-right",children:e.totalSales}),a.jsx("td",{className:"px-6 py-4 text-right text-blue-600",children:eJ(e.totalGrossCents,G)}),a.jsx("td",{className:"px-6 py-4 text-right",children:eJ(e.totalNetCents,G)}),a.jsx("td",{className:"px-6 py-4 text-center",children:e.activeProducts})]},s))})]})})]})]})]}):a.jsx("div",{className:"text-center py-12 text-gray-500",children:"Selecciona un reporte y haz clic en Generar"})]}),"affiliate"===d&&a.jsx(E,{})]}),D&&C&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[a.jsx("div",{className:"p-6 border-b",children:(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["Editar Comisi\xf3n: ",C.tipsterName]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:A.useCustomFee,onChange:e=>T(s=>({...s,useCustomFee:e.target.checked})),className:"rounded"}),a.jsx("span",{children:"Usar comisi\xf3n personalizada"})]})}),A.useCustomFee&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Comisi\xf3n"}),a.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:A.customFeePercent,onChange:e=>T(s=>({...s,customFeePercent:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"})]}),a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:A.autoTierEnabled,onChange:e=>T(s=>({...s,autoTierEnabled:e.target.checked})),className:"rounded"}),a.jsx("span",{children:"Auto-tier (7% para ≥€100k/mes)"})]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),a.jsx("textarea",{value:A.notes,onChange:e=>T(s=>({...s,notes:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[a.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),a.jsx("button",{onClick:eB,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})}),$&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-xl font-bold",children:"Establecer Tipo de Cambio Manual"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Base"}),(0,a.jsxs)("select",{value:F.baseCurrency,onChange:e=>M(s=>({...s,baseCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[a.jsx("option",{value:"EUR",children:"EUR"}),a.jsx("option",{value:"USD",children:"USD"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Destino"}),(0,a.jsxs)("select",{value:F.targetCurrency,onChange:e=>M(s=>({...s,targetCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cambio"}),a.jsx("input",{type:"number",step:"0.0001",value:F.rate,onChange:e=>M(s=>({...s,rate:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["1 ",F.baseCurrency," = ",F.rate," ",F.targetCurrency]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),a.jsx("button",{onClick:e_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Establecer"})]})]})}),et&&ee&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{ea(!1),ed("")},children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white sticky top-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Solicitud de Registro"}),a.jsx("p",{className:"text-blue-200 text-sm",children:ee.email})]}),a.jsx("button",{onClick:()=>{ea(!1),ed("")},className:"text-white/70 hover:text-white text-2xl",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Nombre P\xfablico"}),a.jsx("div",{className:"font-semibold text-gray-900",children:ee.publicName})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Telegram"}),a.jsx("div",{className:"font-semibold text-gray-900",children:ee.telegramUsername||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("div",{className:"font-semibold text-gray-900",children:ee.email||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Tel\xe9fono"}),a.jsx("div",{className:"font-semibold text-gray-900",children:ee.phone||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Pa\xeds"}),a.jsx("div",{className:"font-semibold text-gray-900",children:ee.country||"No especificado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Fecha Solicitud"}),a.jsx("div",{className:"font-semibold text-gray-900",children:new Date(ee.createdAt).toLocaleString("es-ES")})]})]}),ee.experience&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCBC Experiencia como Tipster"}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg text-gray-700",children:ee.experience})]}),ee.socialMedia&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCF1 Redes Sociales"}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg text-gray-700",children:ee.socialMedia})]}),ee.website&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83C\uDF10 Sitio Web"}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsx("a",{href:ee.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:ee.website})})]}),ee.applicationNotes&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCDD Notas del Solicitante"}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg text-gray-700",children:ee.applicationNotes})]}),"PENDING"===ee.applicationStatus&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo de Rechazo (requerido para rechazar)"}),a.jsx("textarea",{value:ei,onChange:e=>ed(e.target.value),placeholder:"Indica el motivo por el cual se rechaza esta solicitud...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),"REJECTED"===ee.applicationStatus&&ee.rejectionReason&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo del Rechazo"}),a.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 border border-red-200",children:ee.rejectionReason})]})]}),"PENDING"===ee.applicationStatus&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 sticky bottom-0 border-t",children:[a.jsx("button",{onClick:()=>{ea(!1),ed("")},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700",children:"Cancelar"}),a.jsx("button",{onClick:()=>eM("REJECT"),disabled:er||!ei.trim(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:er?"...":"❌ Rechazar"}),a.jsx("button",{onClick:()=>eM("APPROVE"),disabled:er,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:er?"...":"✅ Aprobar"})]}),"PENDING"!==ee.applicationStatus&&a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:a.jsx("button",{onClick:()=>{ea(!1),ed("")},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})}),j&&y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCCB Informaci\xf3n del Tipster"}),a.jsx("button",{onClick:()=>N(!1),className:"text-white/80 hover:text-white text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Nombre P\xfablico"}),a.jsx("div",{className:"font-semibold text-gray-900",children:y.publicName})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Estado"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${"ACTIVE"===y.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),a.jsx("div",{className:"text-gray-900",children:y.email||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tel\xe9fono"}),a.jsx("div",{className:"text-gray-900",children:y.phone||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Telegram"}),a.jsx("div",{className:"text-gray-900",children:y.telegramUsername||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Promoci\xf3n"}),a.jsx("div",{className:"text-gray-900 text-sm break-all",children:y.promotionChannel||"-"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDCCA Estad\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Totales"}),a.jsx("div",{className:"text-xl font-bold text-blue-600",children:y.totalSales||0})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Ganancias Totales"}),a.jsx("div",{className:"text-xl font-bold text-green-600",children:s(y.totalEarningsCents||0)})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"\uD83C\uDFE6 Datos de Cobro (KYC)"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:y.kycCompleted?"✓ Completo":"Pendiente"})]}),y.kycCompleted&&y.kycData?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Nombre/Raz\xf3n Social"}),a.jsx("div",{className:"font-medium",children:y.kycData.legalName||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Documento"}),(0,a.jsxs)("div",{className:"font-medium",children:[y.kycData.documentType,": ",y.kycData.documentNumber||"-"]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Pa\xeds"}),a.jsx("div",{className:"font-medium",children:y.kycData.country||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"M\xe9todo de Cobro"}),a.jsx("div",{className:"font-medium",children:y.kycData.bankAccountType||"-"})]}),y.kycData.bankAccountDetails&&(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Detalles de la Cuenta"}),(0,a.jsxs)("div",{className:"font-medium font-mono text-xs bg-gray-100 p-2 rounded mt-1",children:["IBAN"===y.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["IBAN: ",y.kycData.bankAccountDetails.iban]}),"PAYPAL"===y.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["PayPal: ",y.kycData.bankAccountDetails.email]}),"CRYPTO"===y.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["Wallet (",y.kycData.bankAccountDetails.network,"): ",y.kycData.bankAccountDetails.address]}),"OTHER"===y.kycData.bankAccountType&&a.jsx(a.Fragment,{children:y.kycData.bankAccountDetails.details})]})]})]}):a.jsx("div",{className:"text-sm text-gray-500 italic",children:"El tipster a\xfan no ha completado sus datos de cobro"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDD27 M\xf3dulos Habilitados"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:`px-3 py-1 rounded text-sm ${y.modules.forecasts?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-500"}`,children:[y.modules.forecasts?"✓":"✗"," Pron\xf3sticos"]}),(0,a.jsxs)("div",{className:`px-3 py-1 rounded text-sm ${y.modules.affiliate?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-500"}`,children:[y.modules.affiliate?"✓":"✗"," Afiliaci\xf3n"]})]})]})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:a.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})})]})}},2940:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var a=t(326),r=t(8149);function l({className:e="",size:s="md",variant:t="default"}){let{currency:l,setCurrency:i,loading:d}=(0,r.U)();return d?a.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${"sm"===s?"w-16 h-6":"w-20 h-8"}`}):"pill"===t?(0,a.jsxs)("div",{className:`inline-flex rounded-full bg-gray-100 p-1 ${e}`,children:[a.jsx("button",{onClick:()=>i("EUR"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${"EUR"===l?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"€ EUR"}),a.jsx("button",{onClick:()=>i("USD"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${"USD"===l?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"$ USD"})]}):"minimal"===t?(0,a.jsxs)("div",{className:`inline-flex gap-1 ${e}`,children:[a.jsx("button",{onClick:()=>i("EUR"),className:`p-1.5 rounded transition-colors ${"EUR"===l?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:"Euro",children:"€"}),a.jsx("button",{onClick:()=>i("USD"),className:`p-1.5 rounded transition-colors ${"USD"===l?"bg-green-100 text-green-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:"US Dollar",children:"$"})]}):(0,a.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:`border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer ${{sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[s]} ${e}`,children:[a.jsx("option",{value:"EUR",children:"€ EUR"}),a.jsx("option",{value:"USD",children:"$ USD"})]})}},1664:(e,s,t)=>{"use strict";t.d(s,{z:()=>c});var a=t(326),r=t(7577),l=t(4214),i=t(9360),d=t(1223);let n=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...i},c)=>{let o=r?l.g7:"button";return a.jsx(o,{className:(0,d.cn)(n({variant:s,size:t,className:e})),ref:c,...i})});c.displayName="Button"},8149:(e,s,t)=>{"use strict";t.d(s,{CurrencyProvider:()=>i,U:()=>d});var a=t(326),r=t(7577);t(8069);let l=(0,r.createContext)(void 0);function i({children:e}){let[s,t]=(0,r.useState)("EUR"),[i,d]=(0,r.useState)(1.08),[n,c]=(0,r.useState)(!0),o=(e,t="EUR")=>t===s?e:"EUR"===t&&"USD"===s?Math.round(e*i):"USD"===t&&"EUR"===s?Math.round(e/i):e;return a.jsx(l.Provider,{value:{currency:s,setCurrency:e=>{t(e),localStorage.setItem("preferredCurrency",e)},exchangeRate:i,convert:o,formatPrice:(e,t="EUR")=>{let a=o(e,t),r="USD"===s?"$":"€";return`${r}${(a/100).toFixed(2)}`},symbol:"USD"===s?"$":"€",loading:n},children:e})}function d(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},8069:(e,s,t)=>{"use strict";t.d(s,{$z:()=>c,Nq:()=>h,Q4:()=>n,Qm:()=>y,Ty:()=>p,a6:()=>u,bs:()=>i,fi:()=>d,g8:()=>l,hi:()=>a,iJ:()=>r,jk:()=>g,kn:()=>o,lY:()=>x,wT:()=>m});let a=t(4464).Z.create({baseURL:"https://affily-pro.preview.emergentagent.com/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let s=localStorage.getItem("access_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),a.interceptors.response.use(e=>e,e=>(e.response?.status!==401||["/login","/register","/"].includes("")||(localStorage.removeItem("access_token"),window.location.href="/login"),Promise.reject(e)));let r={registerTipster:e=>a.post("/auth/tipster/register",e),registerClient:e=>a.post("/auth/client/register",e),login:e=>a.post("/auth/login",e),logout:()=>a.post("/auth/logout"),sendOtp:e=>a.post("/auth/otp/send",{email:e}),verifyOtp:e=>a.post("/auth/otp/verify",{code:e})},l={getMe:()=>a.get("/users/me"),updateMe:e=>a.patch("/users/me",e)},i={getProfile:()=>a.get("/tipster/profile"),getKycStatus:()=>a.get("/tipster/kyc-status"),updateKyc:e=>a.put("/tipster/kyc",e)},d={create:e=>a.post("/products",e),getMy:()=>a.get("/products/my"),getOne:e=>a.get(`/products/${e}`),update:(e,s)=>a.patch(`/products/${e}`,s),publish:e=>a.post(`/products/${e}/publish`),pause:e=>a.post(`/products/${e}/pause`),getCheckoutLink:e=>a.get(`/products/${e}/checkout-link`)},n={getLinks:()=>a.get("/referrals/links"),getMetrics:e=>a.get("/referrals/metrics",{params:{range:e}}),getCommissions:()=>a.get("/referrals/commissions")},c={getChannelInfo:()=>a.get("/telegram/channel-info"),connect:e=>a.post("/telegram/connect",{channelIdentifier:e}),disconnect:()=>a.delete("/telegram/disconnect"),publishProduct:(e,s)=>a.post(`/products/${e}/publish-telegram`,s?{channelId:s}:{}),setPremiumChannel:e=>a.post("/telegram/premium-channel",{premiumChannelLink:e}),publicationChannel:{get:()=>a.get("/telegram/publication-channel"),set:(e,s)=>a.post("/telegram/publication-channel",{channelId:e,channelTitle:s}),remove:()=>a.delete("/telegram/publication-channel"),startLinking:()=>a.post("/telegram/publication-channel/start-linking"),cancelLinking:()=>a.post("/telegram/publication-channel/cancel-linking")},channels:{getAll:()=>a.get("/telegram/channels"),getOne:e=>a.get(`/telegram/channels/${e}`),create:e=>a.post("/telegram/channels",e),verify:e=>a.post("/telegram/channels/verify",{channelId:e}),update:(e,s)=>a.patch(`/telegram/channels/${e}`,s),delete:e=>a.delete(`/telegram/channels/${e}`),refresh:e=>a.post(`/telegram/channels/${e}/refresh`),generateInviteLink:e=>a.post(`/telegram/channels/${e}/invite-link`),connectByName:e=>a.post("/telegram/channels/connect-by-name",{channelName:e}),searchByName:e=>a.post("/telegram/channels/search-by-name",{channelName:e}),connectById:e=>a.post("/telegram/channels/connect-by-id",{channelId:e}),verifyById:e=>a.post("/telegram/channels/verify-by-id",{channelId:e})}},o={getMy:()=>a.get("/orders/my"),getMySales:()=>a.get("/orders/sales"),getMyStats:()=>a.get("/orders/stats")},x={getAll:()=>a.get("/settlements"),getPending:()=>a.get("/settlements/pending"),getHistory:()=>a.get("/settlements/history"),getTotalPaid:()=>a.get("/settlements/total-paid")},m={getMyModules:()=>a.get("/users/me/modules")},u={getProfile:()=>a.get("/client/profile"),updateProfile:e=>a.put("/client/profile",e),getPurchases:()=>a.get("/client/purchases"),getPurchaseDetails:e=>a.get(`/client/purchases/${e}`),getSubscriptions:()=>a.get("/client/subscriptions"),cancelSubscription:e=>a.post(`/client/subscriptions/${e}/cancel`),getPaymentHistory:()=>a.get("/client/payments")},p={createTicket:e=>a.post("/support/tickets",e),getMyTickets:()=>a.get("/support/tickets/my"),getTicketDetails:e=>a.get(`/support/tickets/my/${e}`),getTicket:e=>a.get(`/support/tickets/my/${e}`),replyToTicket:(e,s)=>a.post(`/support/tickets/${e}/reply`,s),admin:{getAllTickets:e=>a.get("/support/admin/tickets",{params:{status:e}}),updateTicket:(e,s)=>a.put(`/support/admin/tickets/${e}`,s)}},h={tipsters:{getAll:()=>a.get("/admin/tipsters"),getOne:e=>a.get(`/admin/tipsters/${e}`),updateModules:(e,s)=>a.patch(`/admin/tipsters/${e}/modules`,s)},sales:{getAll:e=>a.get("/admin/sales",{params:e})},support:{getAll:e=>a.get("/admin/support/tickets",{params:{status:e}}),getStats:()=>a.get("/admin/support/tickets/stats"),getOne:e=>a.get(`/admin/support/tickets/${e}`),reply:(e,s)=>a.post(`/admin/support/tickets/${e}/reply`,{message:s}),updateStatus:(e,s)=>a.patch(`/admin/support/tickets/${e}/status`,{status:s})},applications:{getAll:e=>a.get("/admin/applications",{params:{status:e}}),getStats:()=>a.get("/admin/applications/stats"),getOne:e=>a.get(`/admin/applications/${e}`),review:(e,s)=>a.post(`/admin/applications/${e}/review`,s)},commissions:{getAll:()=>a.get("/admin/commissions"),getOne:e=>a.get(`/admin/commissions/${e}`),getHistory:e=>a.get(`/admin/commissions/${e}/history`),update:(e,s)=>a.patch(`/admin/commissions/${e}`,s)},reports:{getSummary:e=>a.get("/admin/reports/summary",{params:{currency:e}}),getSales:e=>a.get("/admin/reports/sales",{params:e}),getPlatform:e=>a.get("/admin/reports/platform",{params:e}),getSettlements:e=>a.get("/admin/reports/settlements",{params:e}),getTipsters:e=>a.get("/admin/reports/tipsters",{params:e}),exportCSV:(e,s)=>a.get(`/admin/reports/export/${e}`,{params:s,responseType:"blob"})}},g={getRates:()=>a.get("/currency/rates"),getRate:(e,s)=>a.get(`/currency/rate/${e}/${s}`),convert:(e,s,t)=>a.get("/currency/convert",{params:{amount:e,from:s,to:t}}),admin:{setRate:(e,s,t)=>a.post("/currency/admin/rate",{baseCurrency:e,targetCurrency:s,rate:t}),removeOverride:(e,s)=>a.delete(`/currency/admin/rate/${e}/${s}`),getHistory:(e,s,t)=>a.get(`/currency/admin/history/${e}/${s}`,{params:{limit:t}})}},y={getHousesWithLinks:e=>a.get("/affiliate/houses",{params:{countryCode:e}}),getHouseWithLink:e=>a.get(`/affiliate/houses/${e}`),getMyLinks:()=>a.get("/affiliate/my-links"),generateLink:e=>a.post(`/affiliate/houses/${e}/link`),getCampaigns:()=>a.get("/affiliate/campaigns"),getCampaign:e=>a.get(`/affiliate/campaigns/${e}`),getMetrics:()=>a.get("/affiliate/metrics"),getPayouts:()=>a.get("/affiliate/payouts"),getPayoutDetails:e=>a.get(`/affiliate/payouts/${e}`),getMyReferrals:e=>a.get("/affiliate/my-referrals",{params:e}),admin:{getHouses:(e=!1)=>a.get("/admin/affiliate/houses",{params:{includeInactive:e}}),getHouse:e=>a.get(`/admin/affiliate/houses/${e}`),createHouse:e=>a.post("/admin/affiliate/houses",e),updateHouse:(e,s)=>a.patch(`/admin/affiliate/houses/${e}`,s),getCampaigns:(e=!1)=>a.get("/admin/affiliate/campaigns",{params:{includeInactive:e}}),getCampaign:e=>a.get(`/admin/affiliate/campaigns/${e}`),createCampaign:e=>a.post("/admin/affiliate/campaigns",e),updateCampaign:(e,s)=>a.patch(`/admin/affiliate/campaigns/${e}`,s),importCsv:e=>a.post("/admin/affiliate/import-csv",e,{headers:{"Content-Type":"multipart/form-data"}}),getImportBatches:e=>a.get("/admin/affiliate/import-batches",{params:{houseId:e}}),getConversions:e=>a.get("/admin/affiliate/conversions",{params:e}),updateConversionStatus:(e,s,t)=>a.patch(`/admin/affiliate/conversions/${e}/status`,{status:s,rejectionReason:t}),getReferrals:e=>a.get("/admin/affiliate/referrals",{params:e}),updateReferralStatus:(e,s)=>a.patch(`/admin/affiliate/referrals/${e}/status`,{status:s}),getTipsters:()=>a.get("/admin/affiliate/tipsters"),getPayouts:e=>a.get("/admin/affiliate/payouts",{params:e}),generatePayouts:e=>a.post("/admin/affiliate/payouts/generate",{periodMonth:e}),markPayoutPaid:(e,s)=>a.patch(`/admin/affiliate/payouts/${e}/pay`,s)}}},1223:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(1135),r=t(1009);function l(...e){return(0,r.m6)((0,a.W)(e))}},7318:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/app/frontend/src/app/dashboard/admin/page.tsx#default`)},4954:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>i});var a=t(9510);t(5023);var r=t(8570);let l=(0,r.createProxy)(String.raw`/app/frontend/src/contexts/CurrencyContext.tsx#CurrencyProvider`);(0,r.createProxy)(String.raw`/app/frontend/src/contexts/CurrencyContext.tsx#useCurrency`);let i={title:"Antia - Plataforma de Pron\xf3sticos",description:"Monetiza tu contenido con Antia"};function d({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:a.jsx(l,{children:e})})})}},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,480,515],()=>t(5469));module.exports=a})();