(()=>{var e={};e.id=335,e.ids=[335],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6798:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(8303),t(4954),t(5866);var a=t(3191),r=t(8716),l=t(7922),i=t.n(l),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["client",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8303)),"/app/frontend/src/app/dashboard/client/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4954)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/app/frontend/src/app/dashboard/client/page.tsx"],x="/dashboard/client/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/client/page",pathname:"/dashboard/client",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5364:(e,s,t)=>{Promise.resolve().then(t.bind(t,7455))},5047:(e,s,t)=>{"use strict";var a=t(7389);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7455:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(326),r=t(7577),l=t(5047),i=t(8069);function n(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)("dashboard"),[n,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[b,j]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[D,C]=(0,r.useState)(!1),[w,E]=(0,r.useState)({category:"access",subject:"",description:"",orderId:""}),[P,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)(null),[I,T]=(0,r.useState)(""),[R,_]=(0,r.useState)(!1),[q,M]=(0,r.useState)(!1),[F,L]=(0,r.useState)({countryIso:"",telegramUserId:"",locale:"es"}),[O,G]=(0,r.useState)(!1),V=async()=>{try{await i.iJ.logout(),localStorage.removeItem("access_token"),e.push("/")}catch(s){console.error("Error logging out:",s),localStorage.removeItem("access_token"),e.push("/")}},$=async()=>{if(!w.subject.trim()||!w.description.trim()){alert("Por favor, completa todos los campos");return}k(!0);try{if((await i.Ty.createTicket({category:w.category,subject:w.subject.trim(),description:w.description.trim(),orderId:w.orderId||void 0})).data.success){alert("✅ Ticket creado correctamente"),C(!1),E({category:"access",subject:"",description:"",orderId:""});let e=await i.Ty.getMyTickets();N(e.data)}}catch(e){alert("Error al crear ticket: "+(e.response?.data?.message||"Error desconocido"))}finally{k(!1)}},U=async e=>{S(e);try{let s=await i.Ty.getTicket(e.id);s.data&&S(s.data)}catch(e){console.error("Error loading ticket:",e)}},z=async()=>{if(I.trim()&&A){_(!0);try{await i.Ty.replyToTicket(A.id,{message:I.trim()}),T("");let e=await i.Ty.getTicket(A.id);e.data&&(S(e.data),N(s=>s.map(s=>s.id===A.id?e.data:s)))}catch(e){alert("Error al enviar respuesta: "+(e.response?.data?.message||"Error desconocido"))}finally{_(!1)}}},B=async()=>{G(!0);try{if((await i.a6.updateProfile(F)).data.success){alert("✅ Perfil actualizado"),M(!1);let e=await i.a6.getProfile();m(e.data.profile)}}catch(e){alert("Error: "+(e.response?.data?.message||"Error al guardar"))}finally{G(!1)}},X=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres cancelar esta suscripci\xf3n?\n\nMantendr\xe1s el acceso hasta el final del periodo actual."))try{if((await i.a6.cancelSubscription(e)).data.success){alert("✅ Suscripci\xf3n cancelada. Mantendr\xe1s el acceso hasta el final del periodo actual.");let e=await i.a6.getSubscriptions();j(e.data||[])}}catch(e){alert("Error: "+(e.response?.data?.message||"Error al cancelar"))}},H=(e,s="EUR")=>new Intl.NumberFormat("es-ES",{style:"currency",currency:s}).format(e/100),W=e=>new Date(e).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),Y=e=>a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{ACTIVE:"bg-green-100 text-green-700",EXPIRED:"bg-red-100 text-red-700",PENDING:"bg-yellow-100 text-yellow-700",PENDING_ACCESS:"bg-blue-100 text-blue-700",REFUNDED:"bg-gray-100 text-gray-700"}[e]||"bg-gray-100 text-gray-600"}`,children:{ACTIVE:"✅ Activo",EXPIRED:"⏰ Vencido",PENDING:"⏳ Pendiente",PENDING_ACCESS:"\uD83D\uDD04 Procesando Acceso",REFUNDED:"↩️ Reembolsado"}[e]||e}),J=e=>a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{OPEN:"bg-yellow-100 text-yellow-700",IN_PROGRESS:"bg-blue-100 text-blue-700",RESOLVED:"bg-green-100 text-green-700",CLOSED:"bg-gray-100 text-gray-700"}[e]||"bg-gray-100 text-gray-600"}`,children:{OPEN:"\uD83D\uDD35 Abierto",IN_PROGRESS:"\uD83D\uDFE1 En Progreso",RESOLVED:"✅ Resuelto",CLOSED:"⚫ Cerrado"}[e]||e}),Q=g.filter(e=>"ACTIVE"===e.status).length,K=g.reduce((e,s)=>e+(s.amountCents||0),0),Z=y.filter(e=>"OPEN"===e.status||"IN_PROGRESS"===e.status).length;if(n)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})});let ee=e=>{t(e),o(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b border-gray-100 px-4 py-3",children:a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>o(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg","data-testid":"mobile-menu-button",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("span",{className:"text-xl font-bold text-blue-600",children:"Antia"})]})})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsx("aside",{className:`fixed top-0 left-0 w-64 h-full bg-white border-r border-gray-200 shadow-sm z-50 transition-transform duration-300 ease-in-out -translate-x-full lg:translate-x-0 ${c?"!translate-x-0":""}`,children:(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Antia"}),a.jsx("button",{onClick:()=>o(!1),className:"p-2 -mr-2 text-gray-600 hover:bg-gray-100 rounded-lg lg:hidden",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:u?.name||u?.email||"Mi Cuenta"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:u?.email})]}),(0,a.jsxs)("nav",{className:"space-y-1 flex-1 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>ee("dashboard"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"dashboard"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83C\uDFE0"})," Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>ee("purchases"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"purchases"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83D\uDED2"})," Mis Compras",Q>0&&a.jsx("span",{className:"ml-auto bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs",children:Q})]}),(0,a.jsxs)("button",{onClick:()=>ee("subscriptions"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"subscriptions"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83D\uDD04"})," Mis Suscripciones",b.filter(e=>"active"===e.status).length>0&&a.jsx("span",{className:"ml-auto bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs",children:b.filter(e=>"active"===e.status).length})]}),(0,a.jsxs)("button",{onClick:()=>ee("payments"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"payments"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83D\uDCC4"})," Facturas y Pagos"]}),(0,a.jsxs)("button",{onClick:()=>ee("support"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"support"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"\uD83D\uDCAC"})," Soporte",Z>0&&a.jsx("span",{className:"ml-auto bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded text-xs",children:Z})]}),(0,a.jsxs)("button",{onClick:()=>ee("profile"),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition ${"profile"===s?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{children:"⚙️"})," Mi Perfil"]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 mt-4",children:(0,a.jsxs)("button",{onClick:()=>{V(),o(!1)},className:"w-full text-left px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 flex items-center gap-3 transition",children:[a.jsx("span",{children:"\uD83D\uDEAA"})," Cerrar Sesi\xf3n"]})})]})]})}),(0,a.jsxs)("main",{className:"pt-16 lg:pt-0 lg:ml-64 p-4 sm:p-6 lg:p-8",children:["dashboard"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 lg:mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["\xa1Hola",u?.name?`, ${u.name}`:"","!"]}),a.jsx("p",{className:"text-gray-600 mt-1 text-sm lg:text-base",children:"Gestiona tus compras y accesos"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 lg:p-6 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:"✅"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Accesos Activos"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Q})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:"\uD83D\uDED2"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Total Compras"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:g.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:"\uD83D\uDCB0"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Total Invertido"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:H(K)})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Accesos Activos"})}),a.jsx("div",{className:"p-6",children:0===g.filter(e=>"ACTIVE"===e.status).length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"No tienes accesos activos"}),a.jsx("a",{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Explorar Pron\xf3sticos"})]}):a.jsx("div",{className:"space-y-4",children:g.filter(e=>"ACTIVE"===e.status).map(e=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.productTitle}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Por: ",e.tipsterName]}),e.expiresAt&&(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Vence: ",W(e.expiresAt)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[Y(e.status),a.jsx("a",{href:"https://t.me",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm flex items-center gap-2",children:"\uD83D\uDCF1 Ir al Canal"})]})]})},e.id))})})]})]}),"purchases"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Compras"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Historial de todas tus compras y accesos"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:0===g.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDED2"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No tienes compras a\xfan"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Explora los mejores pron\xf3sticos y empieza a ganar"}),a.jsx("a",{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Explorar Pron\xf3sticos"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:g.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:e.productTitle}),Y(e.status)]}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm mb-2",children:["Por: ",e.tipsterName]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["\uD83D\uDCC5 Comprado: ",W(e.createdAt)]}),e.validityDays&&(0,a.jsxs)("span",{children:["⏱️ Duraci\xf3n: ",e.validityDays," d\xedas"]}),e.expiresAt&&(0,a.jsxs)("span",{className:e.isExpired?"text-red-500":"",children:[e.isExpired?"❌ Venci\xf3":"\uD83D\uDCC6 Vence",": ",W(e.expiresAt)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:H(e.amountCents,e.currency)}),(0,a.jsxs)("div",{className:"flex gap-2",children:["ACTIVE"===e.status&&a.jsx("a",{href:"https://t.me",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"\uD83D\uDCF1 Ir al Canal"}),"EXPIRED"===e.status&&a.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"\uD83D\uDD04 Renovar"})]})]})]})},e.id))})})]}),"subscriptions"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Suscripciones"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona tus suscripciones activas"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:0===b.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDD04"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No tienes suscripciones activas"}),a.jsx("p",{className:"text-gray-500",children:"Las suscripciones a productos premium aparecer\xe1n aqu\xed"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:b.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.productTitle}),a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"active"===e.status?"bg-green-100 text-green-700":e.cancelAtPeriodEnd?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:"active"===e.status?e.cancelAtPeriodEnd?"⏳ Cancelada al final del periodo":"✅ Activa":"canceled"===e.status?"❌ Cancelada":e.status})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Por ",e.tipsterName]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mt-3 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Precio:"})," ",H(e.amountCents,e.currency),"/","MONTHLY"===e.billingInterval?"mes":"QUARTERLY"===e.billingInterval?"trimestre":"a\xf1o"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Pr\xf3ximo cobro:"})," ",W(e.currentPeriodEnd)]})]}),e.telegramChannelId&&a.jsx("div",{className:"mt-3",children:a.jsx("a",{href:`https://t.me/${e.telegramChannelId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800",children:"\uD83D\uDCF1 Acceder al canal de Telegram"})})]}),a.jsx("div",{className:"flex items-center gap-2",children:"active"===e.status&&!e.cancelAtPeriodEnd&&a.jsx("button",{onClick:()=>X(e.id),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm font-medium transition",children:"Cancelar"})})]})},e.id))})})]}),"payments"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Facturas y Pagos"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Historial de todos tus pagos realizados"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:0===f.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No hay pagos registrados"}),a.jsx("p",{className:"text-gray-500",children:"Aqu\xed aparecer\xe1n tus recibos cuando realices una compra"})]}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"ID Orden"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xe9todo"}),a.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase",children:"Importe"}),a.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:f.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:W(e.createdAt)}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:["#",e.id.substring(0,8)]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:"stripe"===e.paymentProvider?"\uD83D\uDCB3 Stripe":"redsys"===e.paymentProvider?"\uD83C\uDFE6 Redsys":e.paymentMethod||"N/A"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-medium",children:H(e.amountCents,e.currency)}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:"✅ Pagado"})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm",children:"\uD83D\uDCE5 Recibo"})})]},e.id))})]})})})]}),"support"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Soporte"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"\xbfNecesitas ayuda? Estamos aqu\xed para ti"})]}),(0,a.jsxs)("button",{onClick:()=>C(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition flex items-center gap-2",children:[a.jsx("span",{children:"➕"})," Nuevo Ticket"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("button",{onClick:()=>{E({...w,category:"access",subject:"No tengo acceso al canal"}),C(!0)},className:"bg-white p-6 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition text-left",children:[a.jsx("div",{className:"text-3xl mb-3",children:"\uD83D\uDD10"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Problemas de Acceso"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pagu\xe9 y no tengo acceso al canal"})]}),(0,a.jsxs)("button",{onClick:()=>{E({...w,category:"payment",subject:"Problema con el pago"}),C(!0)},className:"bg-white p-6 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition text-left",children:[a.jsx("div",{className:"text-3xl mb-3",children:"\uD83D\uDCB3"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Problemas de Pago"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Error al procesar el pago"})]}),(0,a.jsxs)("button",{onClick:()=>{E({...w,category:"telegram_change",subject:"Cambio de cuenta Telegram"}),C(!0)},className:"bg-white p-6 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition text-left",children:[a.jsx("div",{className:"text-3xl mb-3",children:"\uD83D\uDCF1"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Cambiar Telegram"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cambi\xe9 de cuenta o celular"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Mis Tickets"})}),0===y.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCAC"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No tienes tickets"}),a.jsx("p",{className:"text-gray-500",children:"Si tienes alg\xfan problema, crea un ticket y te ayudaremos"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:y.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50 transition cursor-pointer",onClick:()=>U(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e.subject}),J(e.status),e.responses&&e.responses.length>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:[e.responses.length," respuesta",e.responses.length>1?"s":""]})]}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Creado: ",W(e.createdAt)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition",onClick:s=>{s.stopPropagation(),U(e)},children:"Ver detalle"}),(0,a.jsxs)("span",{className:"text-xs text-gray-400 font-mono",children:["#",e.id.substring(0,8)]})]})]})},e.id))})]}),A&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:A.subject}),J(A.status)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Ticket #",A.id.substring(0,8)," • Creado: ",W(A.createdAt)]})]}),a.jsx("button",{onClick:()=>S(null),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:"✕"})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-lg",children:"\uD83D\uDC64"}),a.jsx("span",{className:"font-medium text-gray-900",children:"T\xfa"}),a.jsx("span",{className:"text-xs text-gray-400",children:W(A.createdAt)})]}),a.jsx("p",{className:"text-gray-700",children:A.message||A.description})]}),(A.responses||[]).map((e,s)=>(0,a.jsxs)("div",{className:`rounded-xl p-4 ${e.isAdmin?"bg-green-50 ml-4":"bg-blue-50 mr-4"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-lg",children:e.isAdmin?"\uD83D\uDEE1️":"\uD83D\uDC64"}),a.jsx("span",{className:"font-medium text-gray-900",children:e.isAdmin?"Soporte":"T\xfa"}),a.jsx("span",{className:"text-xs text-gray-400",children:W(e.createdAt)})]}),a.jsx("p",{className:"text-gray-700",children:e.message}),e.attachments&&e.attachments.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.attachments.map((e,s)=>(0,a.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:["\uD83D\uDCCE Adjunto ",s+1]},s))})]},e.id||s)),(!A.responses||0===A.responses.length)&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"Esperando respuesta del equipo de soporte..."})})]}),"RESOLVED"!==A.status&&a.jsx("div",{className:"p-6 border-t border-gray-100 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("textarea",{value:I,onChange:e=>T(e.target.value),placeholder:"Escribe tu respuesta...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:2}),a.jsx("button",{onClick:z,disabled:R||!I.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:R?"...":"Enviar"})]})}),"RESOLVED"===A.status&&a.jsx("div",{className:"p-6 border-t border-gray-100 bg-green-50 text-center",children:a.jsx("p",{className:"text-green-700 font-medium",children:"✅ Este ticket ha sido resuelto"})})]})})]}),"profile"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mi Perfil"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona tu informaci\xf3n personal"})]}),(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-6 border-b border-gray-100",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:"\uD83D\uDC64"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:u?.name||"Usuario"}),a.jsx("p",{className:"text-gray-500",children:u?.email})]})]}),q?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xeds"}),(0,a.jsxs)("select",{value:F.countryIso,onChange:e=>L({...F,countryIso:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Seleccionar..."}),a.jsx("option",{value:"ES",children:"Espa\xf1a"}),a.jsx("option",{value:"MX",children:"M\xe9xico"}),a.jsx("option",{value:"AR",children:"Argentina"}),a.jsx("option",{value:"CO",children:"Colombia"}),a.jsx("option",{value:"CL",children:"Chile"}),a.jsx("option",{value:"PE",children:"Per\xfa"}),a.jsx("option",{value:"US",children:"Estados Unidos"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de Telegram"}),a.jsx("input",{type:"text",value:F.telegramUserId,onChange:e=>L({...F,telegramUserId:e.target.value}),placeholder:"Tu ID de Telegram",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idioma"}),(0,a.jsxs)("select",{value:F.locale,onChange:e=>L({...F,locale:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"es",children:"Espa\xf1ol"}),a.jsx("option",{value:"en",children:"English"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:B,disabled:O,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:O?"Guardando...":"Guardar Cambios"}),a.jsx("button",{onClick:()=>M(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Email"}),a.jsx("span",{className:"font-medium text-gray-900",children:u?.email})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Pa\xeds"}),a.jsx("span",{className:"font-medium text-gray-900",children:x?.countryIso||"No especificado"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Telegram ID"}),a.jsx("span",{className:"font-medium text-gray-900",children:x?.telegramUserId||"No vinculado"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Idioma"}),a.jsx("span",{className:"font-medium text-gray-900",children:x?.locale==="es"?"Espa\xf1ol":"English"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3",children:[a.jsx("span",{className:"text-gray-500",children:"Miembro desde"}),a.jsx("span",{className:"font-medium text-gray-900",children:x?.createdAt?W(x.createdAt):"N/A"})]}),a.jsx("button",{onClick:()=>M(!0),className:"w-full mt-4 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium",children:"✏️ Editar Perfil"})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Legal"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("a",{href:"#",className:"block text-blue-600 hover:underline",children:"\uD83D\uDCDC T\xe9rminos y Condiciones"}),a.jsx("a",{href:"#",className:"block text-blue-600 hover:underline",children:"\uD83D\uDD12 Pol\xedtica de Privacidad"}),a.jsx("a",{href:"#",className:"block text-blue-600 hover:underline",children:"⚠️ Disclaimer +18 (Apuestas)"})]})]})]})]})]}),D&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>C(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full mx-4",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Crear Ticket de Soporte"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda"}),(0,a.jsxs)("select",{value:w.category,onChange:e=>E({...w,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"access",children:"\uD83D\uDD10 Problemas de Acceso"}),a.jsx("option",{value:"payment",children:"\uD83D\uDCB3 Problemas de Pago"}),a.jsx("option",{value:"telegram_change",children:"\uD83D\uDCF1 Cambio de Telegram"}),a.jsx("option",{value:"other",children:"❓ Otro"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto"}),a.jsx("input",{type:"text",value:w.subject,onChange:e=>E({...w,subject:e.target.value}),placeholder:"Describe brevemente tu problema",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),a.jsx("textarea",{value:w.description,onChange:e=>E({...w,description:e.target.value}),placeholder:"Cu\xe9ntanos m\xe1s detalles...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),g.length>0&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compra relacionada (opcional)"}),(0,a.jsxs)("select",{value:w.orderId,onChange:e=>E({...w,orderId:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Ninguna"}),g.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.productTitle," - ",W(e.createdAt)]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>C(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{onClick:$,disabled:P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:P?"Enviando...":"Enviar Ticket"})]})]})})]})}},8303:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/app/frontend/src/app/dashboard/client/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,480,795],()=>t(6798));module.exports=a})();