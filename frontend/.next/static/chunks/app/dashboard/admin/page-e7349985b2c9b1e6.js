(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{9312:function(e,s,t){Promise.resolve().then(t.bind(t,9991))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},9991:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),l=t(2265),r=t(9376),d=t(1837);let i=[{code:"ES",name:"Espa\xf1a"},{code:"DE",name:"Alemania"},{code:"IT",name:"Italia"},{code:"AT",name:"Austria"},{code:"PT",name:"Portugal"},{code:"GR",name:"Grecia"},{code:"BE",name:"B\xe9lgica"},{code:"NL",name:"Pa\xedses Bajos"},{code:"MX",name:"M\xe9xico"},{code:"CO",name:"Colombia"},{code:"AR",name:"Argentina"},{code:"CL",name:"Chile"},{code:"PE",name:"Per\xfa"},{code:"US",name:"Estados Unidos"},{code:"UK",name:"Reino Unido"},{code:"FR",name:"Francia"}];function n(){let[e,s]=(0,l.useState)("houses"),[t,r]=(0,l.useState)(!0),[n,c]=(0,l.useState)([]),[o,x]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[j,y]=(0,l.useState)(!1),[N,v]=(0,l.useState)({tipsterId:"",houseId:"",status:"",startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[f,w]=(0,l.useState)({total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),[C,D]=(0,l.useState)([]),[E,S]=(0,l.useState)(!1),[k,P]=(0,l.useState)(null),[A,R]=(0,l.useState)(!1),[T,I]=(0,l.useState)(null),[F,U]=(0,l.useState)(!1),[O,G]=(0,l.useState)(!1),[V,M]=(0,l.useState)(null),[L,B]=(0,l.useState)({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""}),[z,_]=(0,l.useState)({name:"",slug:"",description:"",houseIds:[],targetCountries:[]}),[q,Q]=(0,l.useState)({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),[H,J]=(0,l.useState)({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),[Y,K]=(0,l.useState)(!1),[W,X]=(0,l.useState)(null);(0,l.useEffect)(()=>{$()},[e]);let $=async()=>{r(!0),X(null);try{if("houses"===e){let e=await d.Qm.admin.getHouses(!0);c(e.data||[])}else if("campaigns"===e){let e=await d.Qm.admin.getCampaigns(!0);x(e.data||[])}else if("import"===e){let[e,s]=await Promise.all([d.Qm.admin.getHouses(!0),d.Qm.admin.getImportBatches()]);c(e.data||[]),u(s.data||[])}else if("conversions"===e)await Z();else if("payouts"===e){let e=await d.Qm.admin.getPayouts();p(e.data||[])}}catch(e){var s,t;X((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al cargar datos")}finally{r(!1)}},Z=async()=>{y(!0);try{let[e,s,t]=await Promise.all([d.Qm.admin.getReferrals(N),d.Qm.admin.getHouses(!0),d.Qm.admin.getTipsters()]);b(e.data.referrals||[]),w(e.data.stats||{total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),c(s.data||[]),D(t.data||[])}catch(e){console.error("Error loading referrals:",e)}finally{y(!1)}},ee=async(e,s)=>{try{await d.Qm.admin.updateReferralStatus(e,s),await Z()}catch(e){console.error("Error updating referral status:",e),alert("Error al actualizar estado")}},es=e=>{e?(P(e),B({name:e.name,slug:e.slug,logoUrl:e.logoUrl||"",masterAffiliateUrl:e.masterAffiliateUrl,trackingParamName:e.trackingParamName,commissionPerReferralCents:e.commissionPerReferralCents,allowedCountries:e.allowedCountries,blockedCountries:e.blockedCountries,description:e.description||"",websiteUrl:e.websiteUrl||""})):(P(null),B({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""})),S(!0)},et=async()=>{K(!0),X(null);try{k?await d.Qm.admin.updateHouse(k.id,L):await d.Qm.admin.createHouse(L),S(!1),$()}catch(t){var e,s;X((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al guardar casa")}finally{K(!1)}},ea=async e=>{try{await d.Qm.admin.updateHouse(e.id,{status:"ACTIVE"===e.status?"INACTIVE":"ACTIVE"}),$()}catch(e){var s,t;X((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al cambiar estado")}},el=e=>{e?(I(e),_({name:e.name,slug:e.slug,description:e.description||"",houseIds:e.houseIds,targetCountries:e.targetCountries})):(I(null),_({name:"",slug:"",description:"",houseIds:[],targetCountries:[]})),R(!0)},er=async()=>{K(!0),X(null);try{T?await d.Qm.admin.updateCampaign(T.id,z):await d.Qm.admin.createCampaign(z),R(!1),$()}catch(t){var e,s;X((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al guardar campa\xf1a")}finally{K(!1)}},ed=async()=>{if(!q.file||!q.houseId){X("Selecciona una casa y un archivo CSV");return}K(!0),X(null);try{let e=new FormData;e.append("file",q.file),e.append("houseId",q.houseId),e.append("periodMonth",q.periodMonth),await d.Qm.admin.importCsv(e),U(!1),Q({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),$()}catch(t){var e,s;X((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al importar CSV")}finally{K(!1)}},ei=async()=>{let e=prompt("Ingresa el per\xedodo (formato: YYYY-MM)",new Date().toISOString().slice(0,7));if(e){K(!0),X(null);try{await d.Qm.admin.generatePayouts(e),$()}catch(e){var s,t;X((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al generar liquidaciones")}finally{K(!1)}}},en=e=>{M(e),J({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),G(!0)},ec=async()=>{if(V){K(!0),X(null);try{await d.Qm.admin.markPayoutPaid(V.id,H),G(!1),$()}catch(t){var e,s;X((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al marcar como pagado")}finally{K(!1)}}},eo=e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",PAID:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-blue-100 text-blue-800",FAILED:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:e});return t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83E\uDD1D Afiliaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona casas de apuestas, campa\xf1as y liquidaciones de afiliados"})]}),W&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("p",{className:"text-red-600",children:W}),(0,a.jsx)("button",{onClick:()=>X(null),className:"text-sm text-red-500 underline mt-1",children:"Cerrar"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex -mb-px overflow-x-auto",children:[{id:"houses",label:"\uD83C\uDFE0 Casas de Apuestas"},{id:"campaigns",label:"\uD83D\uDCE2 Campa\xf1as"},{id:"conversions",label:"\uD83D\uDC65 Referidos"},{id:"import",label:"\uD83D\uDCE4 Importar CSV"},{id:"payouts",label:"\uD83D\uDCB5 Liquidaciones"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap ".concat(e===t.id?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.label,"conversions"===t.id&&f.pending>0&&(0,a.jsx)("span",{className:"ml-2 bg-yellow-500 text-white px-2 py-0.5 rounded-full text-xs",children:f.pending})]},t.id))})}),(0,a.jsxs)("div",{className:"p-6",children:["houses"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Casas de Apuestas"}),(0,a.jsx)("button",{onClick:()=>es(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Nueva Casa"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pa\xedses"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.logoUrl?(0,a.jsx)("img",{src:e.logoUrl,alt:e.name,className:"w-10 h-10 object-contain"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center font-bold",children:e.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.slug})]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-green-600 font-medium",children:["€",e.commissionPerReferralEur,"/ref"]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.allowedCountries.length>0?"✅ ".concat(e.allowedCountries.join(", ")):e.blockedCountries.length>0?"❌ ".concat(e.blockedCountries.join(", ")):"Todos"}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:eo(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[(0,a.jsx)("button",{onClick:()=>es(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>ea(e),className:"ACTIVE"===e.status?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800",children:"ACTIVE"===e.status?"Desactivar":"Activar"})]})]},e.id))})]})})]}),"campaigns"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Campa\xf1as de Afiliaci\xf3n"}),(0,a.jsx)("button",{onClick:()=>el(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Nueva Campa\xf1a"})]}),0===o.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No hay campa\xf1as creadas"}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>{var s;return(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),eo(e.status)]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:null===(s=e.houses)||void 0===s?void 0:s.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded",children:e.name},e.id))}),(0,a.jsx)("button",{onClick:()=>el(e),className:"text-sm text-blue-600 hover:text-blue-800",children:"Editar"})]},e.id)})})]}),"conversions"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDC65 Listado de Referidos"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:f.total}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total"})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:f.pending}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Pendientes"})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:f.approved}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Aprobados"})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:f.rejected}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Rechazados"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["€",(f.totalCommissionCents/100).toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Comisiones"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:N.tipsterId,onChange:e=>v({...N,tipsterId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),C.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Casa"}),(0,a.jsxs)("select",{value:N.houseId,onChange:e=>v({...N,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),n.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:N.status,onChange:e=>v({...N,status:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"PENDING",children:"Pendiente"}),(0,a.jsx)("option",{value:"APPROVED",children:"Aprobado"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rechazado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:N.startDate,onChange:e=>v({...N,startDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:N.endDate,onChange:e=>v({...N,endDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("button",{onClick:Z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"\uD83D\uDD0D Aplicar Filtros"})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:j?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===g.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDC65"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay referidos con los filtros seleccionados"})]}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usuario"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),(0,a.jsx)("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-3 py-3 text-sm text-gray-500",children:new Date(e.clickedAt||e.convertedAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)("td",{className:"px-3 py-3 text-sm font-medium text-gray-900",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-3 py-3 text-sm text-gray-600",children:e.houseName}),(0,a.jsxs)("td",{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.userEmail||"An\xf3nimo"}),e.userTelegram&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.userTelegram]}),e.externalRefId&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.externalRefId]})]}),(0,a.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:e.country||"\uD83C\uDF0D"}),(0,a.jsx)("td",{className:"px-3 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("DEPOSIT"===e.eventType?"bg-green-100 text-green-700":"REGISTER"===e.eventType?"bg-blue-100 text-blue-700":"QUALIFIED"===e.eventType?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"),children:"DEPOSIT"===e.eventType?"\uD83D\uDCB0 Dep\xf3sito":"REGISTER"===e.eventType?"\uD83D\uDCDD Registro":"QUALIFIED"===e.eventType?"✅ Calificado":e.eventType||"Click"})}),(0,a.jsxs)("td",{className:"px-3 py-3 text-right text-sm font-medium text-green-600",children:["€",(e.commissionCents/100).toFixed(2)]}),(0,a.jsx)("td",{className:"px-3 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("PENDING"===e.status?"bg-yellow-100 text-yellow-700":"APPROVED"===e.status?"bg-green-100 text-green-700":"REJECTED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"),children:"PENDING"===e.status?"⏳ Pendiente":"APPROVED"===e.status?"✅ Aprobado":"REJECTED"===e.status?"❌ Rechazado":e.status})}),(0,a.jsx)("td",{className:"px-3 py-3 text-center",children:"PENDING"===e.status&&(0,a.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,a.jsx)("button",{onClick:()=>ee(e.id,"APPROVED"),className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200",children:"✓"}),(0,a.jsx)("button",{onClick:()=>ee(e.id,"REJECTED"),className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200",children:"✗"})]})})]},e.id))})]})})]}),"import"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Importar Conversiones (CSV)"}),(0,a.jsx)("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Importar CSV"})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Formato CSV est\xe1ndar:"})," tipster_tracking_id, event_type (REGISTER/DEPOSIT/QUALIFIED), status (PENDING/APPROVED/REJECTED), occurred_at, external_ref_id (opcional), amount (opcional)"]})}),(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Historial de Importaciones"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Archivo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Filas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.houseName}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.periodMonth}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.fileName}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[e.processedRows,"/",e.totalRows,e.errorRows>0&&(0,a.jsxs)("span",{className:"text-red-500 ml-1",children:["(",e.errorRows," err)"]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:eo(e.status)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.importedAt).toLocaleDateString("es-ES")})]},e.id))})]})})]}),"payouts"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Liquidaciones de Afiliaci\xf3n"}),(0,a.jsx)("button",{onClick:ei,disabled:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Generando...":"⚡ Generar Liquidaciones"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Referidos"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.periodMonth}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.totalReferrals}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-green-600",children:["€",e.totalAmountEur.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:eo(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:["PENDING"===e.status&&(0,a.jsx)("button",{onClick:()=>en(e),className:"text-green-600 hover:text-green-800 font-medium",children:"Marcar Pagado"}),"PAID"===e.status&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.paidAt?new Date(e.paidAt).toLocaleDateString("es-ES"):"-"})]})]},e.id))})]})})]})]})]}),E&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto py-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:k?"Editar Casa de Apuestas":"Nueva Casa de Apuestas"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,a.jsx)("input",{type:"text",value:L.name,onChange:e=>B({...L,name:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Bwin"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,a.jsx)("input",{type:"text",value:L.slug,onChange:e=>B({...L,slug:e.target.value.toLowerCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"bwin",disabled:!!k})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del Logo"}),(0,a.jsx)("input",{type:"url",value:L.logoUrl,onChange:e=>B({...L,logoUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Maestro de Afiliaci\xf3n *"}),(0,a.jsx)("input",{type:"url",value:L.masterAffiliateUrl,onChange:e=>B({...L,masterAffiliateUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://bwin.com/register?affiliate=antia"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par\xe1metro de Tracking"}),(0,a.jsx)("input",{type:"text",value:L.trackingParamName,onChange:e=>B({...L,trackingParamName:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"subid"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n por Referido (€) *"}),(0,a.jsx)("input",{type:"number",value:L.commissionPerReferralCents/100,onChange:e=>B({...L,commissionPerReferralCents:Math.round(100*parseFloat(e.target.value))}),className:"w-full border rounded-lg px-3 py-2",step:"0.01",min:"0"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Permitidos"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:L.allowedCountries.includes(e.code),onChange:s=>{s.target.checked?B({...L,allowedCountries:[...L.allowedCountries,e.code]}):B({...L,allowedCountries:L.allowedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Bloqueados"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:L.blockedCountries.includes(e.code),onChange:s=>{s.target.checked?B({...L,blockedCountries:[...L.blockedCountries,e.code]}):B({...L,blockedCountries:L.blockedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:L.description,onChange:e=>B({...L,description:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL"}),(0,a.jsx)("input",{type:"url",value:L.websiteUrl,onChange:e=>B({...L,websiteUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://www.bwin.com"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:et,disabled:Y||!L.name||!L.slug||!L.masterAffiliateUrl,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Guardando...":"Guardar"})]})]})})}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:T?"Editar Campa\xf1a":"Nueva Campa\xf1a"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,a.jsx)("input",{type:"text",value:z.name,onChange:e=>_({...z,name:e.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,a.jsx)("input",{type:"text",value:z.slug,onChange:e=>_({...z,slug:e.target.value.toLowerCase()}),className:"w-full border rounded-lg px-3 py-2",disabled:!!T})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:z.description,onChange:e=>_({...z,description:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casas incluidas *"}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-2",children:n.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 py-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:z.houseIds.includes(e.id),onChange:s=>{s.target.checked?_({...z,houseIds:[...z.houseIds,e.id]}):_({...z,houseIds:z.houseIds.filter(s=>s!==e.id)})}}),(0,a.jsx)("span",{children:e.name})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:er,disabled:Y||!z.name||!z.slug,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Guardando...":"Guardar"})]})]})})}),F&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Importar CSV"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casa de Apuestas *"}),(0,a.jsxs)("select",{value:q.houseId,onChange:e=>Q({...q,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Selecciona una casa"}),n.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per\xedodo (YYYY-MM) *"}),(0,a.jsx)("input",{type:"month",value:q.periodMonth,onChange:e=>Q({...q,periodMonth:e.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo CSV *"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var s;return Q({...q,file:(null===(s=e.target.files)||void 0===s?void 0:s[0])||null})},className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>U(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:ed,disabled:Y||!q.houseId||!q.file,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y?"Importando...":"Importar"})]})]})})}),O&&V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Marcar como Pagado"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Tipster"}),(0,a.jsx)("div",{className:"font-medium",children:V.tipsterName}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Monto"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600",children:["€",V.totalAmountEur.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de Pago"}),(0,a.jsxs)("select",{value:H.paymentMethod,onChange:e=>J({...H,paymentMethod:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[(0,a.jsx)("option",{value:"BANK_TRANSFER",children:"Transferencia Bancaria"}),(0,a.jsx)("option",{value:"PAYPAL",children:"PayPal"}),(0,a.jsx)("option",{value:"OTHER",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia de Pago"}),(0,a.jsx)("input",{type:"text",value:H.paymentReference,onChange:e=>J({...H,paymentReference:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"N\xfamero de transferencia, ID, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),(0,a.jsx)("textarea",{value:H.notes,onChange:e=>J({...H,notes:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:ec,disabled:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:Y?"Procesando...":"Confirmar Pago"})]})]})})})]})}var c=t(4646),o=t(7120);function x(){var e,s,t,i,x,m,u,h,p,g,b,j;let y=(0,r.useRouter)(),{formatPrice:N,symbol:v}=(0,o.U)(),[f,w]=(0,l.useState)("tipsters"),[C,D]=(0,l.useState)(!0),[E,S]=(0,l.useState)(""),[k,P]=(0,l.useState)([]),[A,R]=(0,l.useState)(null),[T,I]=(0,l.useState)(null),[F,U]=(0,l.useState)(!1),[O,G]=(0,l.useState)([]),[V,M]=(0,l.useState)(null),[L,B]=(0,l.useState)(!1),[z,_]=(0,l.useState)({customFeePercent:10,useCustomFee:!1,autoTierEnabled:!0,notes:""}),[q,Q]=(0,l.useState)([]),[H,J]=(0,l.useState)(!1),[Y,K]=(0,l.useState)({baseCurrency:"EUR",targetCurrency:"USD",rate:1.08}),[W,X]=(0,l.useState)("summary"),[$,Z]=(0,l.useState)(null),[ee,es]=(0,l.useState)("EUR"),[et,ea]=(0,l.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[el,er]=(0,l.useState)(!1),[ed,ei]=(0,l.useState)([]),[en,ec]=(0,l.useState)({pending:0,approved:0,rejected:0}),[eo,ex]=(0,l.useState)("PENDING"),[em,eu]=(0,l.useState)(null),[eh,ep]=(0,l.useState)(!1),[eg,eb]=(0,l.useState)(!1),[ej,ey]=(0,l.useState)(""),[eN,ev]=(0,l.useState)([]),[ef,ew]=(0,l.useState)(!1),[eC,eD]=(0,l.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""}),[eE,eS]=(0,l.useState)({totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0}),[ek,eP]=(0,l.useState)([]),[eA,eR]=(0,l.useState)(!1),[eT,eI]=(0,l.useState)(""),[eF,eU]=(0,l.useState)(null),[eO,eG]=(0,l.useState)(""),[eV,eM]=(0,l.useState)(!1),[eL,eB]=(0,l.useState)({open:0,inProgress:0,resolved:0});(0,l.useEffect)(()=>{ez(),eW(),eH()},[]),(0,l.useEffect)(()=>{"tipsters"===f&&e_(),"applications"===f&&(eK(),eW()),"support"===f&&eQ(),"sales"===f&&eq(),"commissions"===f&&(e$(),eZ()),"reports"===f&&e0()},[f,W,ee,eo]);let ez=async()=>{if(!localStorage.getItem("access_token")){y.push("/login");return}D(!1)},e_=async()=>{try{let e=await d.Nq.tipsters.getAll();P(e.data.tipsters||[]),S("")}catch(s){var e;(null===(e=s.response)||void 0===e?void 0:e.status)===403?S("No tienes permisos de SuperAdmin"):S("Error al cargar tipsters")}},eq=async()=>{ew(!0);try{let e=await d.Nq.sales.getAll(eC);ev(e.data.sales||[]),eS(e.data.stats||{totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0})}catch(e){console.error("Error loading sales:",e)}finally{ew(!1)}},eQ=async()=>{eR(!0);try{let e=await d.Nq.support.getAll(eT||void 0);eP(e.data.tickets||[])}catch(e){console.error("Error loading tickets:",e)}finally{eR(!1)}},eH=async()=>{try{let e=await d.Nq.support.getStats();eB(e.data)}catch(e){console.error("Error loading ticket stats:",e)}},eJ=async()=>{if(eF&&eO.trim()){eM(!0);try{await d.Nq.support.reply(eF.id,eO.trim()),eG("");let e=await d.Nq.support.getOne(eF.id);eU(e.data.ticket),eQ()}catch(e){console.error("Error sending reply:",e),alert("Error al enviar respuesta")}finally{eM(!1)}}},eY=async(e,s)=>{try{await d.Nq.support.updateStatus(e,s),eQ(),eH(),(null==eF?void 0:eF.id)===e&&eU({...eF,status:s})}catch(e){console.error("Error updating ticket status:",e),alert("Error al actualizar estado")}},eK=async()=>{try{let e=await d.Nq.applications.getAll(eo);ei(e.data.applications||[])}catch(e){console.error("Error loading applications:",e)}},eW=async()=>{try{let e=await d.Nq.applications.getStats();ec(e.data)}catch(e){console.error("Error loading application stats:",e)}},eX=async e=>{if(em){if("REJECT"===e&&!ej.trim()){alert("Por favor, indica el motivo del rechazo");return}eb(!0);try{(await d.Nq.applications.review(em.id,{action:e,rejectionReason:"REJECT"===e?ej:void 0})).data.success&&(alert("APPROVE"===e?"✅ Solicitud aprobada. El tipster ya puede acceder.":"❌ Solicitud rechazada."),ep(!1),eu(null),ey(""),eK(),eW())}catch(e){var s,t;alert("Error: "+((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al procesar"))}finally{eb(!1)}}},e$=async()=>{try{let e=await d.Nq.commissions.getAll();G(e.data||[])}catch(e){console.error("Error loading commissions:",e)}},eZ=async()=>{try{let e=await d.jk.getRates();Q(e.data.rates||[])}catch(e){console.error("Error loading exchange rates:",e)}},e0=async()=>{er(!0);try{let e;let s={...et,currency:ee};switch(W){case"summary":e=await d.Nq.reports.getSummary(ee);break;case"sales":e=await d.Nq.reports.getSales(s);break;case"platform":e=await d.Nq.reports.getPlatform(s);break;case"settlements":e=await d.Nq.reports.getSettlements(s);break;case"tipsters":e=await d.Nq.reports.getTipsters(s)}Z(null==e?void 0:e.data)}catch(e){console.error("Error loading report:",e),Z(null)}finally{er(!1)}},e2=async(e,s,t)=>{R(e);try{await d.Nq.tipsters.updateModules(e,"forecasts"===s?{moduleForecasts:!t}:{moduleAffiliate:!t}),P(a=>a.map(a=>a.id===e?{...a,modules:{...a.modules,[s]:!t}}:a))}catch(e){alert("Error al actualizar m\xf3dulo")}finally{R(null)}},e3=e=>{I(e),U(!0)},e5=e=>{M(e),_({customFeePercent:e.config.customFeePercent||e.config.platformFeePercent,useCustomFee:e.config.useCustomFee,autoTierEnabled:e.config.autoTierEnabled,notes:e.config.notes||""}),B(!0)},e6=async()=>{if(V)try{await d.Nq.commissions.update(V.tipsterId,z),B(!1),e$()}catch(e){alert("Error al guardar comisi\xf3n")}},e1=async()=>{try{await d.jk.admin.setRate(Y.baseCurrency,Y.targetCurrency,Y.rate),J(!1),eZ()}catch(e){alert("Error al establecer tipo de cambio")}},e4=async(e,s)=>{try{await d.jk.admin.removeOverride(e,s),eZ()}catch(e){alert("Error al eliminar override")}},e8=async()=>{try{let e=await d.Nq.reports.exportCSV(W,{...et}),s=new Blob([e.data],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="antia_".concat(W,"_").concat(new Date().toISOString().split("T")[0],".csv"),a.click()}catch(e){alert("Error al exportar CSV")}},e7=async()=>{try{await d.iJ.logout()}catch(e){}localStorage.removeItem("access_token"),y.push("/")},e9=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return"".concat("USD"===s?"$":"€").concat((e/100).toFixed(2))};return C?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):E?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:E}),(0,a.jsx)("button",{onClick:()=>y.push("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Volver al Login"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("aside",{className:"fixed top-0 left-0 w-64 h-full bg-white border-r border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"Antia Admin"}),(0,a.jsx)("div",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded inline-block mb-6",children:"SuperAdmin"}),(0,a.jsxs)("nav",{className:"space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>w("applications"),className:"w-full text-left px-4 py-2 rounded-lg flex items-center justify-between ".concat("applications"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,a.jsx)("span",{children:"\uD83D\uDCCB Solicitudes"}),en.pending>0&&(0,a.jsx)("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse",children:en.pending})]}),(0,a.jsx)("button",{onClick:()=>w("tipsters"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("tipsters"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDC65 Gesti\xf3n Tipsters"}),(0,a.jsx)("button",{onClick:()=>w("sales"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("sales"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDED2 Ventas Checkout"}),(0,a.jsxs)("button",{onClick:()=>w("support"),className:"w-full text-left px-4 py-2 rounded-lg flex items-center justify-between ".concat("support"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,a.jsx)("span",{children:"\uD83C\uDFAB Soporte"}),eL.open>0&&(0,a.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:eL.open})]}),(0,a.jsx)("button",{onClick:()=>w("affiliate"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("affiliate"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83E\uDD1D Afiliaci\xf3n"}),(0,a.jsx)("button",{onClick:()=>w("commissions"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("commissions"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDCB0 Comisiones"}),(0,a.jsx)("button",{onClick:()=>w("reports"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("reports"===f?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDCCA Reportes"}),(0,a.jsx)("button",{onClick:e7,className:"w-full text-left px-4 py-2 rounded-lg text-red-600 hover:bg-red-50",children:"\uD83D\uDEAA Cerrar Sesi\xf3n"})]})]})}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:[(0,a.jsx)("div",{className:"fixed top-4 right-8 z-50",children:(0,a.jsx)(c.Z,{variant:"pill"})}),"applications"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCB Solicitudes de Registro"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Revisa y aprueba las solicitudes de nuevos tipsters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>ex("PENDING"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("PENDING"===eo?"border-yellow-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:en.pending})]}),(0,a.jsxs)("div",{onClick:()=>ex("APPROVED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("APPROVED"===eo?"border-green-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Aprobadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:en.approved})]}),(0,a.jsxs)("div",{onClick:()=>ex("REJECTED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("REJECTED"===eo?"border-red-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"❌ Rechazadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:en.rejected})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Total"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:en.pending+en.approved+en.rejected})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["PENDING"===eo&&"⏳ Solicitudes Pendientes","APPROVED"===eo&&"✅ Solicitudes Aprobadas","REJECTED"===eo&&"❌ Solicitudes Rechazadas"]})}),0===ed.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["No hay solicitudes ",eo.toLowerCase()]})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:ed.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.publicName}),"PENDING"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"⏳ Pendiente"}),"APPROVED"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"✅ Aprobado"}),"REJECTED"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"❌ Rechazado"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCE7 Email:"}),(0,a.jsx)("p",{className:"font-medium",children:e.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCF1 Telegram:"}),(0,a.jsx)("p",{className:"font-medium",children:e.telegramUsername||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83C\uDF0D Pa\xeds:"}),(0,a.jsx)("p",{className:"font-medium",children:e.country||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCC5 Fecha:"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]}),e.experience&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2 line-clamp-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Experiencia:"})," ",e.experience]}),e.rejectionReason&&(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Motivo rechazo:"})," ",e.rejectionReason]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>{eu(e),ep(!0)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Ver Detalles"}),"PENDING"===e.applicationStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{eu(e),eX("APPROVE")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"✅ Aprobar"}),(0,a.jsx)("button",{onClick:()=>{eu(e),ep(!0)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"❌ Rechazar"})]})]})]})},e.id))})]})]}),"tipsters"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDC65 Gesti\xf3n de Tipsters"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Controla los m\xf3dulos habilitados para cada tipster"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:k.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Pron\xf3sticos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:k.filter(e=>e.modules.forecasts).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Afiliaci\xf3n"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:k.filter(e=>e.modules.affiliate).length})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Lista de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"KYC"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pron\xf3sticos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Afiliaci\xf3n"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:(null===(s=e.publicName)||void 0===s?void 0:s.charAt(0).toUpperCase())||"?"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.publicName}),e.telegramUsername&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.telegramUsername]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:e.kycCompleted?"✓ Completo":"Pendiente"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>e2(e.id,"forecasts",e.modules.forecasts),disabled:A===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.forecasts?"bg-blue-600":"bg-gray-200"," ").concat(A===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.forecasts?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>e2(e.id,"affiliate",e.modules.affiliate),disabled:A===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.affiliate?"bg-purple-600":"bg-gray-200"," ").concat(A===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.affiliate?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>e3(e),className:"px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 text-sm font-medium transition",children:"Ver Info"})})]},e.id)})})]})})]})]}),"sales"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDED2 Ventas Checkout"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Listado completo de todas las ventas de la plataforma"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB0 Volumen Bruto"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:N(eE.totalGrossCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:N(eE.totalPlatformFeeCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB5 Neto Tipsters"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N(eE.totalNetCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDED2 Total Ventas"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eE.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\uD83D\uDD0D Filtros"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:eC.startDate,onChange:e=>eD({...eC,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:eC.endDate,onChange:e=>eD({...eC,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:eC.tipsterId,onChange:e=>eD({...eC,tipsterId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),k.map(e=>(0,a.jsx)("option",{value:e.id,children:e.publicName},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:eC.status,onChange:e=>eD({...eC,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"PAGADA",children:"Pagada"}),(0,a.jsx)("option",{value:"ACCESS_GRANTED",children:"Acceso Otorgado"}),(0,a.jsx)("option",{value:"PENDIENTE",children:"Pendiente"}),(0,a.jsx)("option",{value:"REFUNDED",children:"Reembolsada"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Pasarela"}),(0,a.jsxs)("select",{value:eC.paymentProvider,onChange:e=>eD({...eC,paymentProvider:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),(0,a.jsx)("option",{value:"stripe",children:"Stripe"}),(0,a.jsx)("option",{value:"redsys",children:"Redsys"}),(0,a.jsx)("option",{value:"test",children:"Test"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Pa\xeds"}),(0,a.jsxs)("select",{value:eC.country,onChange:e=>eD({...eC,country:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"ES",children:"Espa\xf1a"}),(0,a.jsx)("option",{value:"MX",children:"M\xe9xico"}),(0,a.jsx)("option",{value:"AR",children:"Argentina"}),(0,a.jsx)("option",{value:"CO",children:"Colombia"}),(0,a.jsx)("option",{value:"US",children:"Estados Unidos"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:eq,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"\uD83D\uDD0D Aplicar Filtros"}),(0,a.jsx)("button",{onClick:()=>{eD({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm",children:"Limpiar"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:ef?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Cargando ventas..."})]}):0===eN.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No hay ventas"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Ajusta los filtros o espera a tener ventas"})]}):(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pasarela"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:eN.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.clientEmail||"An\xf3nimo"}),e.clientTelegramId&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.clientTelegramId]})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-[200px] truncate",children:e.productTitle})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:N(e.grossAmountCents)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-red-600",children:["-",N(e.platformFeeCents),(0,a.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",e.platformFeePercent,"%)"]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-green-600",children:N(e.netAmountCents)}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("stripe"===e.paymentProvider?"bg-purple-100 text-purple-700":"redsys"===e.paymentProvider?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"stripe"===e.paymentProvider?"\uD83D\uDCB3 Stripe":"redsys"===e.paymentProvider?"\uD83C\uDFE6 Redsys":e.paymentProvider||"N/A"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"text-sm",children:e.country||"\uD83C\uDF0D"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("PAGADA"===e.status||"ACCESS_GRANTED"===e.status?"bg-green-100 text-green-700":"PENDIENTE"===e.status?"bg-yellow-100 text-yellow-700":"REFUNDED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"),children:"ACCESS_GRANTED"===e.status?"✅ Acceso":"PAGADA"===e.status?"✅ Pagada":"PENDIENTE"===e.status?"⏳ Pendiente":"REFUNDED"===e.status?"↩️ Reembolso":e.status})})]},e.id))})]})})})]}),"support"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83C\uDFAB Centro de Soporte"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona los tickets de soporte de tipsters y clientes"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>{eI(""),eQ()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat(eT?"border-transparent hover:border-gray-200":"border-gray-400"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Todos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:eL.open+eL.inProgress+eL.resolved})]}),(0,a.jsxs)("div",{onClick:()=>{eI("OPEN"),eQ()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("OPEN"===eT?"border-yellow-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Abiertos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:eL.open})]}),(0,a.jsxs)("div",{onClick:()=>{eI("IN_PROGRESS"),eQ()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("IN_PROGRESS"===eT?"border-blue-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDD04 En Proceso"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eL.inProgress})]}),(0,a.jsxs)("div",{onClick:()=>{eI("RESOLVED"),eQ()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("RESOLVED"===eT?"border-green-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Resueltos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eL.resolved})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"font-bold text-gray-900",children:"\uD83D\uDCCB Tickets"})}),eA?(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===ek.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No hay tickets"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100 max-h-[600px] overflow-y-auto",children:ek.map(e=>{var s;return(0,a.jsx)("div",{onClick:()=>eU(e),className:"p-4 cursor-pointer hover:bg-gray-50 transition ".concat((null==eF?void 0:eF.id)===e.id?"bg-red-50 border-l-4 border-red-500":""),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("TIPSTER"===e.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"TIPSTER"===e.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("OPEN"===e.status?"bg-yellow-100 text-yellow-700":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"OPEN"===e.status?"Abierto":"IN_PROGRESS"===e.status?"En proceso":"Resuelto"})]}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mt-1 truncate",children:e.subject}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.userName||e.userEmail}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(null===(s=e.responses)||void 0===s?void 0:s.length)>0&&(0,a.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e.responses.length})]})},e.id)})})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:eF?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("TIPSTER"===eF.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"TIPSTER"===eF.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"•"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:eF.userName||eF.userEmail})]}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:eF.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Creado: ",new Date(eF.createdAt).toLocaleString("es-ES")]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("select",{value:eF.status,onChange:e=>eY(eF.id,e.target.value),className:"px-3 py-1.5 rounded-lg border text-sm font-medium ".concat("OPEN"===eF.status?"border-yellow-300 bg-yellow-50 text-yellow-700":"IN_PROGRESS"===eF.status?"border-blue-300 bg-blue-50 text-blue-700":"border-green-300 bg-green-50 text-green-700"),children:[(0,a.jsx)("option",{value:"OPEN",children:"⏳ Abierto"}),(0,a.jsx)("option",{value:"IN_PROGRESS",children:"\uD83D\uDD04 En Proceso"}),(0,a.jsx)("option",{value:"RESOLVED",children:"✅ Resuelto"})]})})]})}),(0,a.jsxs)("div",{className:"p-6 max-h-[400px] overflow-y-auto space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 mr-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["TIPSTER"===eF.userRole?"\uD83D\uDC64":"\uD83D\uDC65"," ",eF.userName||"Usuario"]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(eF.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:eF.message})]}),null===(e=eF.responses)||void 0===e?void 0:e.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isAdmin?"bg-red-50 ml-12":"bg-gray-50 mr-12"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.isAdmin?"text-red-600":"text-gray-700"),children:e.isAdmin?"\uD83D\uDD27 Soporte Antia":"".concat("TIPSTER"===eF.userRole?"\uD83D\uDC64":"\uD83D\uDC65"," ").concat(eF.userName||"Usuario")}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:e.message})]},s))]}),"RESOLVED"!==eF.status&&(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("textarea",{value:eO,onChange:e=>eG(e.target.value),placeholder:"Escribe tu respuesta...",rows:3,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:()=>{eJ(),eY(eF.id,"IN_PROGRESS")},disabled:!eO.trim()||eV,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm disabled:opacity-50",children:eV?"...":"\uD83D\uDCAC Responder"}),(0,a.jsx)("button",{onClick:()=>{eJ(),eY(eF.id,"RESOLVED")},disabled:!eO.trim()||eV,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium text-sm disabled:opacity-50",children:eV?"...":"✅ Responder y Cerrar"})]})]})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAB"}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Selecciona un ticket"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Haz clic en un ticket de la lista para ver los detalles y responder"})]})})]})]}),"commissions"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCB0 Gesti\xf3n de Comisiones"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configura las comisiones de plataforma y tipos de cambio"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCB1 Tipos de Cambio"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"EUR / USD - API externa + override manual"})]}),(0,a.jsx)("button",{onClick:()=>J(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Establecer Manual"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.baseCurrency," → ",e.targetCurrency]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.rate.toFixed(4)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Fuente: ",e.source," ",e.isManualOverride&&"(Manual)"]})]}),e.isManualOverride&&(0,a.jsx)("button",{onClick:()=>e4(e.baseCurrency,e.targetCurrency),className:"text-red-600 hover:text-red-800 text-sm",children:"Usar API"})]},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"⚙️ Comisiones por Tipster"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Est\xe1ndar: 10% | Alto volumen (≥€100k/mes): 7%"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Volumen Mensual"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"% Efectivo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Auto-Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:O.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.tipsterName}),(0,a.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:["€",e.monthlyVolumeEur]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("HIGH_VOLUME"===e.currentTier?"bg-green-100 text-green-800":"CUSTOM"===e.currentTier?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.currentTier})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-center font-bold text-blue-600",children:[e.effectivePercent,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.config.autoTierEnabled?"✅":"❌"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>e5(e),className:"text-blue-600 hover:text-blue-800",children:"Editar"})})]},e.tipsterId))})]})})]})]}),"reports"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Reportes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Anal\xedtica y exportaci\xf3n de datos"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Reporte"}),(0,a.jsxs)("select",{value:W,onChange:e=>X(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"summary",children:"Resumen General"}),(0,a.jsx)("option",{value:"sales",children:"Ventas"}),(0,a.jsx)("option",{value:"platform",children:"Ingresos Plataforma"}),(0,a.jsx)("option",{value:"settlements",children:"Liquidaciones"}),(0,a.jsx)("option",{value:"tipsters",children:"Ranking Tipsters"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),(0,a.jsxs)("select",{value:ee,onChange:e=>es(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,a.jsx)("option",{value:"USD",children:"$ USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:et.startDate,onChange:e=>ea(s=>({...s,startDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:et.endDate,onChange:e=>ea(s=>({...s,endDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("button",{onClick:e0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Generar"}),"summary"!==W&&(0,a.jsx)("button",{onClick:e8,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDCE5 Exportar CSV"})]})}),el?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):$?(0,a.jsxs)("div",{className:"space-y-6",children:["summary"===W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Ventas (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(null===(s=$.last30Days)||void 0===s?void 0:s.totalSales)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e9((null===(t=$.last30Days)||void 0===t?void 0:t.totalGrossCents)||0,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e9((null===(i=$.last30Days)||void 0===i?void 0:i.platformIncomeCents)||0,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Liquidaciones Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:e9((null===(x=$.settlements)||void 0===x?void 0:x.pendingCents)||0,ee)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Tipsters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total registrados"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(m=$.tipsters)||void 0===m?void 0:m.total)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Con ventas"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(u=$.tipsters)||void 0===u?void 0:u.active)||0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Liquidaciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pendientes"}),(0,a.jsx)("span",{className:"font-medium text-orange-600",children:(null===(h=$.settlements)||void 0===h?void 0:h.pendingCount)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pagadas"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:(null===(p=$.settlements)||void 0===p?void 0:p.paidCount)||0})]})]})]})]})]}),"sales"===W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:$.totalSales})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e9($.totalGrossCents,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e9($.totalPlatformFeesCents,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Neto Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:e9($.totalNetCents,ee)})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Tipster"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(g=$.byTipster)||void 0===g?void 0:g.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.sales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:e9(e.grossCents,ee)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e9(e.netCents,ee)})]},s))})]})})]})]}),"platform"===W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Pedidos"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:$.totalOrders})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Volumen Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e9($.totalGrossCents,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e9($.totalPlatformFeesCents,ee)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"% Promedio"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[$.avgPlatformFeePercent,"%"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Mes"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mes"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pedidos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n Antia"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Fee Pasarela"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(b=$.byMonth)||void 0===b?void 0:b.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.month}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.orders}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:e9(e.grossCents,ee)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-green-600",children:e9(e.platformFeesCents,ee)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-gray-500",children:e9(e.gatewayFeesCents,ee)})]},s))})]})})]})]}),"tipsters"===W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:$.totalTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Tipsters Activos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:$.activeTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:$.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Ranking de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Productos"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(j=$.rankings)||void 0===j?void 0:j.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-gray-400",children:s+1}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.totalSales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:e9(e.totalGrossCents,ee)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e9(e.totalNetCents,ee)}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.activeProducts})]},s))})]})})]})]})]}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Selecciona un reporte y haz clic en Generar"})]}),"affiliate"===f&&(0,a.jsx)(n,{})]}),L&&V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["Editar Comisi\xf3n: ",V.tipsterName]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:z.useCustomFee,onChange:e=>_(s=>({...s,useCustomFee:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Usar comisi\xf3n personalizada"})]})}),z.useCustomFee&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Comisi\xf3n"}),(0,a.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:z.customFeePercent,onChange:e=>_(s=>({...s,customFeePercent:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:z.autoTierEnabled,onChange:e=>_(s=>({...s,autoTierEnabled:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Auto-tier (7% para ≥€100k/mes)"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),(0,a.jsx)("textarea",{value:z.notes,onChange:e=>_(s=>({...s,notes:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>B(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:e6,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})}),H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Establecer Tipo de Cambio Manual"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Base"}),(0,a.jsxs)("select",{value:Y.baseCurrency,onChange:e=>K(s=>({...s,baseCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"EUR"}),(0,a.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Destino"}),(0,a.jsxs)("select",{value:Y.targetCurrency,onChange:e=>K(s=>({...s,targetCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cambio"}),(0,a.jsx)("input",{type:"number",step:"0.0001",value:Y.rate,onChange:e=>K(s=>({...s,rate:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["1 ",Y.baseCurrency," = ",Y.rate," ",Y.targetCurrency]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>J(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:e1,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Establecer"})]})]})}),eh&&em&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{ep(!1),ey("")},children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white sticky top-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Solicitud de Registro"}),(0,a.jsx)("p",{className:"text-blue-200 text-sm",children:em.email})]}),(0,a.jsx)("button",{onClick:()=>{ep(!1),ey("")},className:"text-white/70 hover:text-white text-2xl",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:em.publicName})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Telegram"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:em.telegramUsername||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:em.email||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:em.phone||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Pa\xeds"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:em.country||"No especificado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Fecha Solicitud"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:new Date(em.createdAt).toLocaleString("es-ES")})]})]}),em.experience&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCBC Experiencia como Tipster"}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg text-gray-700",children:em.experience})]}),em.socialMedia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCF1 Redes Sociales"}),(0,a.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg text-gray-700",children:em.socialMedia})]}),em.website&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83C\uDF10 Sitio Web"}),(0,a.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,a.jsx)("a",{href:em.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:em.website})})]}),em.applicationNotes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCDD Notas del Solicitante"}),(0,a.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg text-gray-700",children:em.applicationNotes})]}),"PENDING"===em.applicationStatus&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo de Rechazo (requerido para rechazar)"}),(0,a.jsx)("textarea",{value:ej,onChange:e=>ey(e.target.value),placeholder:"Indica el motivo por el cual se rechaza esta solicitud...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),"REJECTED"===em.applicationStatus&&em.rejectionReason&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo del Rechazo"}),(0,a.jsx)("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 border border-red-200",children:em.rejectionReason})]})]}),"PENDING"===em.applicationStatus&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 sticky bottom-0 border-t",children:[(0,a.jsx)("button",{onClick:()=>{ep(!1),ey("")},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700",children:"Cancelar"}),(0,a.jsx)("button",{onClick:()=>eX("REJECT"),disabled:eg||!ej.trim(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:eg?"...":"❌ Rechazar"}),(0,a.jsx)("button",{onClick:()=>eX("APPROVE"),disabled:eg,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:eg?"...":"✅ Aprobar"})]}),"PENDING"!==em.applicationStatus&&(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:(0,a.jsx)("button",{onClick:()=>{ep(!1),ey("")},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})}),F&&T&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCCB Informaci\xf3n del Tipster"}),(0,a.jsx)("button",{onClick:()=>U(!1),className:"text-white/80 hover:text-white text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:T.publicName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Estado"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ACTIVE"===T.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:T.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("div",{className:"text-gray-900",children:T.email||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("div",{className:"text-gray-900",children:T.phone||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Telegram"}),(0,a.jsx)("div",{className:"text-gray-900",children:T.telegramUsername||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Promoci\xf3n"}),(0,a.jsx)("div",{className:"text-gray-900 text-sm break-all",children:T.promotionChannel||"-"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDCCA Estad\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Ventas Totales"}),(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:T.totalSales||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Ganancias Totales"}),(0,a.jsx)("div",{className:"text-xl font-bold text-green-600",children:N(T.totalEarningsCents||0)})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"\uD83C\uDFE6 Datos de Cobro (KYC)"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(T.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:T.kycCompleted?"✓ Completo":"Pendiente"})]}),T.kycCompleted&&T.kycData?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Nombre/Raz\xf3n Social"}),(0,a.jsx)("div",{className:"font-medium",children:T.kycData.legalName||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Documento"}),(0,a.jsxs)("div",{className:"font-medium",children:[T.kycData.documentType,": ",T.kycData.documentNumber||"-"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Pa\xeds"}),(0,a.jsx)("div",{className:"font-medium",children:T.kycData.country||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"M\xe9todo de Cobro"}),(0,a.jsx)("div",{className:"font-medium",children:T.kycData.bankAccountType||"-"})]}),T.kycData.bankAccountDetails&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Detalles de la Cuenta"}),(0,a.jsxs)("div",{className:"font-medium font-mono text-xs bg-gray-100 p-2 rounded mt-1",children:["IBAN"===T.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["IBAN: ",T.kycData.bankAccountDetails.iban]}),"PAYPAL"===T.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["PayPal: ",T.kycData.bankAccountDetails.email]}),"CRYPTO"===T.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["Wallet (",T.kycData.bankAccountDetails.network,"): ",T.kycData.bankAccountDetails.address]}),"OTHER"===T.kycData.bankAccountType&&(0,a.jsx)(a.Fragment,{children:T.kycData.bankAccountDetails.details})]})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500 italic",children:"El tipster a\xfan no ha completado sus datos de cobro"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDD27 M\xf3dulos Habilitados"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"px-3 py-1 rounded text-sm ".concat(T.modules.forecasts?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-500"),children:[T.modules.forecasts?"✓":"✗"," Pron\xf3sticos"]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded text-sm ".concat(T.modules.affiliate?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-500"),children:[T.modules.affiliate?"✓":"✗"," Afiliaci\xf3n"]})]})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:(0,a.jsx)("button",{onClick:()=>U(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})})]})}}},function(e){e.O(0,[464,80,971,117,744],function(){return e(e.s=9312)}),_N_E=e.O()}]);