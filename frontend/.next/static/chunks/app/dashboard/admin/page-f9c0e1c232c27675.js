(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{9312:function(e,t,s){Promise.resolve().then(s.bind(s,749))},749:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(9376),i=s(1837);function n(){var e,t,s,n,d,c,o,x,m,h,u;let p=(0,l.useRouter)(),[g,j]=(0,r.useState)("tipsters"),[b,y]=(0,r.useState)(!0),[N,v]=(0,r.useState)(""),[f,w]=(0,r.useState)([]),[C,k]=(0,r.useState)(null),[S,T]=(0,r.useState)([]),[D,E]=(0,r.useState)(null),[P,A]=(0,r.useState)(!1),[F,U]=(0,r.useState)({customFeePercent:10,useCustomFee:!1,autoTierEnabled:!0,notes:""}),[R,M]=(0,r.useState)([]),[O,I]=(0,r.useState)(!1),[V,q]=(0,r.useState)({baseCurrency:"EUR",targetCurrency:"USD",rate:1.08}),[_,B]=(0,r.useState)("summary"),[G,L]=(0,r.useState)(null),[z,H]=(0,r.useState)("EUR"),[$,J]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[Q,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Z()},[]),(0,r.useEffect)(()=>{"tipsters"===g&&K(),"commissions"===g&&(W(),X()),"reports"===g&&ee()},[g,_,z]);let Z=async()=>{if(!localStorage.getItem("access_token")){p.push("/login");return}y(!1)},K=async()=>{try{let e=await i.Nq.tipsters.getAll();w(e.data.tipsters||[]),v("")}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===403?v("No tienes permisos de SuperAdmin"):v("Error al cargar tipsters")}},W=async()=>{try{let e=await i.Nq.commissions.getAll();T(e.data||[])}catch(e){console.error("Error loading commissions:",e)}},X=async()=>{try{let e=await i.jk.getRates();M(e.data.rates||[])}catch(e){console.error("Error loading exchange rates:",e)}},ee=async()=>{Y(!0);try{let e;let t={...$,currency:z};switch(_){case"summary":e=await i.Nq.reports.getSummary(z);break;case"sales":e=await i.Nq.reports.getSales(t);break;case"platform":e=await i.Nq.reports.getPlatform(t);break;case"settlements":e=await i.Nq.reports.getSettlements(t);break;case"tipsters":e=await i.Nq.reports.getTipsters(t)}L(null==e?void 0:e.data)}catch(e){console.error("Error loading report:",e),L(null)}finally{Y(!1)}},et=async(e,t,s)=>{k(e);try{await i.Nq.tipsters.updateModules(e,"forecasts"===t?{moduleForecasts:!s}:{moduleAffiliate:!s}),w(a=>a.map(a=>a.id===e?{...a,modules:{...a.modules,[t]:!s}}:a))}catch(e){alert("Error al actualizar m\xf3dulo")}finally{k(null)}},es=e=>{E(e),U({customFeePercent:e.config.customFeePercent||e.config.platformFeePercent,useCustomFee:e.config.useCustomFee,autoTierEnabled:e.config.autoTierEnabled,notes:e.config.notes||""}),A(!0)},ea=async()=>{if(D)try{await i.Nq.commissions.update(D.tipsterId,F),A(!1),W()}catch(e){alert("Error al guardar comisi\xf3n")}},er=async()=>{try{await i.jk.admin.setRate(V.baseCurrency,V.targetCurrency,V.rate),I(!1),X()}catch(e){alert("Error al establecer tipo de cambio")}},el=async(e,t)=>{try{await i.jk.admin.removeOverride(e,t),X()}catch(e){alert("Error al eliminar override")}},ei=async()=>{try{let e=await i.Nq.reports.exportCSV(_,{...$}),t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="antia_".concat(_,"_").concat(new Date().toISOString().split("T")[0],".csv"),a.click()}catch(e){alert("Error al exportar CSV")}},en=async()=>{try{await i.iJ.logout()}catch(e){}localStorage.removeItem("access_token"),p.push("/")},ed=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return"".concat("USD"===t?"$":"€").concat((e/100).toFixed(2))};return b?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):N?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:N}),(0,a.jsx)("button",{onClick:()=>p.push("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Volver al Login"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("aside",{className:"fixed top-0 left-0 w-64 h-full bg-white border-r border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"Antia Admin"}),(0,a.jsx)("div",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded inline-block mb-6",children:"SuperAdmin"}),(0,a.jsxs)("nav",{className:"space-y-2",children:[(0,a.jsx)("button",{onClick:()=>j("tipsters"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("tipsters"===g?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDC65 Gesti\xf3n Tipsters"}),(0,a.jsx)("button",{onClick:()=>j("commissions"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("commissions"===g?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDCB0 Comisiones"}),(0,a.jsx)("button",{onClick:()=>j("reports"),className:"w-full text-left px-4 py-2 rounded-lg ".concat("reports"===g?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"),children:"\uD83D\uDCCA Reportes"}),(0,a.jsx)("button",{onClick:en,className:"w-full text-left px-4 py-2 rounded-lg text-red-600 hover:bg-red-50",children:"\uD83D\uDEAA Cerrar Sesi\xf3n"})]})]})}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:["tipsters"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDC65 Gesti\xf3n de Tipsters"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Controla los m\xf3dulos habilitados para cada tipster"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:f.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Pron\xf3sticos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:f.filter(e=>e.modules.forecasts).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Afiliaci\xf3n"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:f.filter(e=>e.modules.affiliate).length})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Lista de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pron\xf3sticos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Afiliaci\xf3n"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:f.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:(null===(t=e.publicName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"?"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.publicName}),e.telegramUsername&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.telegramUsername]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>et(e.id,"forecasts",e.modules.forecasts),disabled:C===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.forecasts?"bg-blue-600":"bg-gray-200"," ").concat(C===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.forecasts?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>et(e.id,"affiliate",e.modules.affiliate),disabled:C===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.affiliate?"bg-purple-600":"bg-gray-200"," ").concat(C===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.affiliate?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})})]},e.id)})})]})})]})]}),"commissions"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCB0 Gesti\xf3n de Comisiones"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configura las comisiones de plataforma y tipos de cambio"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCB1 Tipos de Cambio"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"EUR / USD - API externa + override manual"})]}),(0,a.jsx)("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Establecer Manual"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.baseCurrency," → ",e.targetCurrency]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.rate.toFixed(4)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Fuente: ",e.source," ",e.isManualOverride&&"(Manual)"]})]}),e.isManualOverride&&(0,a.jsx)("button",{onClick:()=>el(e.baseCurrency,e.targetCurrency),className:"text-red-600 hover:text-red-800 text-sm",children:"Usar API"})]},t))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"⚙️ Comisiones por Tipster"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Est\xe1ndar: 10% | Alto volumen (≥€100k/mes): 7%"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Volumen Mensual"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"% Efectivo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Auto-Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:S.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.tipsterName}),(0,a.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:["€",e.monthlyVolumeEur]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("HIGH_VOLUME"===e.currentTier?"bg-green-100 text-green-800":"CUSTOM"===e.currentTier?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.currentTier})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-center font-bold text-blue-600",children:[e.effectivePercent,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.config.autoTierEnabled?"✅":"❌"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>es(e),className:"text-blue-600 hover:text-blue-800",children:"Editar"})})]},e.tipsterId))})]})})]})]}),"reports"===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Reportes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Anal\xedtica y exportaci\xf3n de datos"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Reporte"}),(0,a.jsxs)("select",{value:_,onChange:e=>B(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"summary",children:"Resumen General"}),(0,a.jsx)("option",{value:"sales",children:"Ventas"}),(0,a.jsx)("option",{value:"platform",children:"Ingresos Plataforma"}),(0,a.jsx)("option",{value:"settlements",children:"Liquidaciones"}),(0,a.jsx)("option",{value:"tipsters",children:"Ranking Tipsters"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),(0,a.jsxs)("select",{value:z,onChange:e=>H(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,a.jsx)("option",{value:"USD",children:"$ USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:$.startDate,onChange:e=>J(t=>({...t,startDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:$.endDate,onChange:e=>J(t=>({...t,endDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("button",{onClick:ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Generar"}),"summary"!==_&&(0,a.jsx)("button",{onClick:ei,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDCE5 Exportar CSV"})]})}),Q?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):G?(0,a.jsxs)("div",{className:"space-y-6",children:["summary"===_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Ventas (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(null===(e=G.last30Days)||void 0===e?void 0:e.totalSales)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:ed((null===(t=G.last30Days)||void 0===t?void 0:t.totalGrossCents)||0,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:ed((null===(s=G.last30Days)||void 0===s?void 0:s.platformIncomeCents)||0,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Liquidaciones Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:ed((null===(n=G.settlements)||void 0===n?void 0:n.pendingCents)||0,z)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Tipsters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total registrados"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(d=G.tipsters)||void 0===d?void 0:d.total)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Con ventas"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(c=G.tipsters)||void 0===c?void 0:c.active)||0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Liquidaciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pendientes"}),(0,a.jsx)("span",{className:"font-medium text-orange-600",children:(null===(o=G.settlements)||void 0===o?void 0:o.pendingCount)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pagadas"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:(null===(x=G.settlements)||void 0===x?void 0:x.paidCount)||0})]})]})]})]})]}),"sales"===_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:G.totalSales})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:ed(G.totalGrossCents,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:ed(G.totalPlatformFeesCents,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Neto Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:ed(G.totalNetCents,z)})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Tipster"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(m=G.byTipster)||void 0===m?void 0:m.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.sales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:ed(e.grossCents,z)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:ed(e.netCents,z)})]},t))})]})})]})]}),"platform"===_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Pedidos"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:G.totalOrders})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Volumen Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:ed(G.totalGrossCents,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:ed(G.totalPlatformFeesCents,z)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"% Promedio"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[G.avgPlatformFeePercent,"%"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Mes"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mes"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pedidos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n Antia"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Fee Pasarela"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(h=G.byMonth)||void 0===h?void 0:h.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.month}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.orders}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:ed(e.grossCents,z)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-green-600",children:ed(e.platformFeesCents,z)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-gray-500",children:ed(e.gatewayFeesCents,z)})]},t))})]})})]})]}),"tipsters"===_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:G.totalTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Tipsters Activos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:G.activeTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:G.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Ranking de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Productos"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(u=G.rankings)||void 0===u?void 0:u.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-gray-400",children:t+1}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.totalSales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:ed(e.totalGrossCents,z)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:ed(e.totalNetCents,z)}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.activeProducts})]},t))})]})})]})]})]}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Selecciona un reporte y haz clic en Generar"})]})]}),P&&D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["Editar Comisi\xf3n: ",D.tipsterName]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:F.useCustomFee,onChange:e=>U(t=>({...t,useCustomFee:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Usar comisi\xf3n personalizada"})]})}),F.useCustomFee&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Comisi\xf3n"}),(0,a.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:F.customFeePercent,onChange:e=>U(t=>({...t,customFeePercent:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:F.autoTierEnabled,onChange:e=>U(t=>({...t,autoTierEnabled:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Auto-tier (7% para ≥€100k/mes)"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),(0,a.jsx)("textarea",{value:F.notes,onChange:e=>U(t=>({...t,notes:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:ea,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Establecer Tipo de Cambio Manual"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Base"}),(0,a.jsxs)("select",{value:V.baseCurrency,onChange:e=>q(t=>({...t,baseCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"EUR"}),(0,a.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Destino"}),(0,a.jsxs)("select",{value:V.targetCurrency,onChange:e=>q(t=>({...t,targetCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cambio"}),(0,a.jsx)("input",{type:"number",step:"0.0001",value:V.rate,onChange:e=>q(t=>({...t,rate:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["1 ",V.baseCurrency," = ",V.rate," ",V.targetCurrency]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:er,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Establecer"})]})]})})]})}},1837:function(e,t,s){"use strict";s.d(t,{$z:function(){return n},Nq:function(){return x},Q4:function(){return i},fi:function(){return l},hi:function(){return a},iJ:function(){return r},jk:function(){return m},kn:function(){return d},lY:function(){return c},wT:function(){return o}});let a=s(3464).Z.create({baseURL:"https://antia-tipster.preview.emergentagent.com/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)!==401||["/login","/register","/"].includes(window.location.pathname)||(localStorage.removeItem("access_token"),window.location.href="/login"),Promise.reject(e)});let r={registerTipster:e=>a.post("/auth/tipster/register",e),registerClient:e=>a.post("/auth/client/register",e),login:e=>a.post("/auth/login",e),logout:()=>a.post("/auth/logout"),sendOtp:e=>a.post("/auth/otp/send",{email:e}),verifyOtp:e=>a.post("/auth/otp/verify",{code:e})},l={create:e=>a.post("/products",e),getMy:()=>a.get("/products/my"),getOne:e=>a.get("/products/".concat(e)),update:(e,t)=>a.patch("/products/".concat(e),t),publish:e=>a.post("/products/".concat(e,"/publish")),pause:e=>a.post("/products/".concat(e,"/pause")),getCheckoutLink:e=>a.get("/products/".concat(e,"/checkout-link"))},i={getLinks:()=>a.get("/referrals/links"),getMetrics:e=>a.get("/referrals/metrics",{params:{range:e}}),getCommissions:()=>a.get("/referrals/commissions")},n={getChannelInfo:()=>a.get("/telegram/channel-info"),connect:e=>a.post("/telegram/connect",{channelIdentifier:e}),disconnect:()=>a.delete("/telegram/disconnect"),publishProduct:e=>a.post("/products/".concat(e,"/publish-telegram")),setPremiumChannel:e=>a.post("/telegram/premium-channel",{premiumChannelLink:e}),channels:{getAll:()=>a.get("/telegram/channels"),getOne:e=>a.get("/telegram/channels/".concat(e)),create:e=>a.post("/telegram/channels",e),verify:e=>a.post("/telegram/channels/verify",{channelId:e}),update:(e,t)=>a.patch("/telegram/channels/".concat(e),t),delete:e=>a.delete("/telegram/channels/".concat(e)),refresh:e=>a.post("/telegram/channels/".concat(e,"/refresh")),generateInviteLink:e=>a.post("/telegram/channels/".concat(e,"/invite-link"))}},d={getMy:()=>a.get("/orders/my"),getMySales:()=>a.get("/orders/sales"),getMyStats:()=>a.get("/orders/stats")},c={getAll:()=>a.get("/settlements"),getPending:()=>a.get("/settlements/pending"),getHistory:()=>a.get("/settlements/history"),getTotalPaid:()=>a.get("/settlements/total-paid")},o={getMyModules:()=>a.get("/users/me/modules")},x={tipsters:{getAll:()=>a.get("/admin/tipsters"),getOne:e=>a.get("/admin/tipsters/".concat(e)),updateModules:(e,t)=>a.patch("/admin/tipsters/".concat(e,"/modules"),t)},commissions:{getAll:()=>a.get("/admin/commissions"),getOne:e=>a.get("/admin/commissions/".concat(e)),getHistory:e=>a.get("/admin/commissions/".concat(e,"/history")),update:(e,t)=>a.patch("/admin/commissions/".concat(e),t)},reports:{getSummary:e=>a.get("/admin/reports/summary",{params:{currency:e}}),getSales:e=>a.get("/admin/reports/sales",{params:e}),getPlatform:e=>a.get("/admin/reports/platform",{params:e}),getSettlements:e=>a.get("/admin/reports/settlements",{params:e}),getTipsters:e=>a.get("/admin/reports/tipsters",{params:e}),exportCSV:(e,t)=>a.get("/admin/reports/export/".concat(e),{params:t,responseType:"blob"})}},m={getRates:()=>a.get("/currency/rates"),getRate:(e,t)=>a.get("/currency/rate/".concat(e,"/").concat(t)),convert:(e,t,s)=>a.get("/currency/convert",{params:{amount:e,from:t,to:s}}),admin:{setRate:(e,t,s)=>a.post("/currency/admin/rate",{baseCurrency:e,targetCurrency:t,rate:s}),removeOverride:(e,t)=>a.delete("/currency/admin/rate/".concat(e,"/").concat(t)),getHistory:(e,t,s)=>a.get("/currency/admin/history/".concat(e,"/").concat(t),{params:{limit:s}})}}}},function(e){e.O(0,[301,971,117,744],function(){return e(e.s=9312)}),_N_E=e.O()}]);