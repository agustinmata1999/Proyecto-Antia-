(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{9312:function(e,s,t){Promise.resolve().then(t.bind(t,6182))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,s)=>{let t=(0,a.forwardRef)((t,i)=>{let{color:d="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:x="",children:m,...u}=t;return(0,a.createElement)("svg",{ref:i,...r,width:n,height:n,stroke:d,strokeWidth:o?24*Number(c)/Number(n):c,className:["lucide","lucide-".concat(l(e)),x].join(" "),...u},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},525:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},6182:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(7437),r=t(2265),l=t(9376),i=t(1837),d=t(9763);let n=(0,d.Z)("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);var c=t(5805),o=t(525);let x=(0,d.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),m=(0,d.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),u=(0,d.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),h=()=>"",p={ES:"Espa\xf1a",MX:"M\xe9xico",AR:"Argentina",CO:"Colombia",CL:"Chile",PE:"Per\xfa",DE:"Alemania",IT:"Italia",PT:"Portugal",FR:"Francia",UK:"Reino Unido",US:"Estados Unidos"};function g(){let[e,s]=(0,r.useState)(!0),[t,l]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[i,d]=(0,r.useState)({totalClicks:0,uniqueUsers:0,conversions:0,conversionRate:0}),[g,b]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[N,v]=(0,r.useState)([]),[f,D]=(0,r.useState)([]),[w,C]=(0,r.useState)([]),[E,k]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[P,T]=(0,r.useState)(""),[R,I]=(0,r.useState)([]),[F,M]=(0,r.useState)([]),[U,L]=(0,r.useState)([]);(0,r.useEffect)(()=>{O()},[t,E,S,P]);let O=async()=>{s(!0);try{let s=localStorage.getItem("access_token"),l=new URLSearchParams({startDate:t.startDate,endDate:t.endDate});E&&l.append("tipsterId",E),S&&l.append("campaignId",S),P&&l.append("houseId",P);let i=await fetch("".concat(h(),"/api/admin/affiliate/stats?").concat(l.toString()),{headers:{Authorization:"Bearer ".concat(s)}});if(i.ok){let s=await i.json();if(d(s.general||{totalClicks:0,uniqueUsers:0,conversions:0,conversionRate:0}),b(s.byCountry||[]),y(s.byHouse||[]),v(s.byDate||[]),D(s.byCampaign||[]),C(s.byTipster||[]),0===R.length){var e,a,r;I((null===(e=s.filterOptions)||void 0===e?void 0:e.tipsters)||[]),M((null===(a=s.filterOptions)||void 0===a?void 0:a.campaigns)||[]),L((null===(r=s.filterOptions)||void 0===r?void 0:r.houses)||[])}}}catch(e){console.error("Error loading stats:",e)}finally{s(!1)}};return e?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCCA Estad\xedsticas de Afiliaci\xf3n"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"M\xe9tricas de clicks, conversiones y comisiones por tipster, campa\xf1a y casa"})]})}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:t.startDate,onChange:e=>l({...t,startDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:t.endDate,onChange:e=>l({...t,endDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:E,onChange:e=>k(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),R.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Campa\xf1a"}),(0,a.jsxs)("select",{value:S,onChange:e=>A(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),F.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Casa"}),(0,a.jsxs)("select",{value:P,onChange:e=>T(e.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),U.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(n,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i.totalClicks.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Clicks Totales"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i.uniqueUsers.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Usuarios \xdanicos"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i.conversions.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Conversiones"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(x,{className:"w-5 h-5 text-yellow-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[i.conversionRate.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Tasa Conversi\xf3n"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-500"}),"Por Tipster"]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Conversiones"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Conv."})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===w.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No hay datos para el per\xedodo seleccionado"})}):w.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:e.totalClicks.toLocaleString()}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-green-600",children:e.conversions.toLocaleString()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-blue-600 font-medium",children:["€",(e.commissionEarned/100).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-gray-500",children:[e.totalClicks>0?(e.conversions/e.totalClicks*100).toFixed(1):0,"%"]})]},e.tipsterId))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5 text-gray-500"}),"Por Pa\xeds"]})}),(0,a.jsx)("div",{className:"p-4",children:0===g.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):(0,a.jsx)("div",{className:"space-y-3",children:g.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:{ES:"\uD83C\uDDEA\uD83C\uDDF8",MX:"\uD83C\uDDF2\uD83C\uDDFD",AR:"\uD83C\uDDE6\uD83C\uDDF7",CO:"\uD83C\uDDE8\uD83C\uDDF4",CL:"\uD83C\uDDE8\uD83C\uDDF1",PE:"\uD83C\uDDF5\uD83C\uDDEA",DE:"\uD83C\uDDE9\uD83C\uDDEA",IT:"\uD83C\uDDEE\uD83C\uDDF9",PT:"\uD83C\uDDF5\uD83C\uDDF9",FR:"\uD83C\uDDEB\uD83C\uDDF7",UK:"\uD83C\uDDEC\uD83C\uDDE7",US:"\uD83C\uDDFA\uD83C\uDDF8"}[e.country]||"\uD83C\uDF0D"}),(0,a.jsx)("span",{className:"text-sm",children:p[e.country]||e.country})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.clicks," clicks"]}),(0,a.jsxs)("span",{className:"text-sm text-green-600",children:[e.conversions," conv."]})]})]},e.country))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-gray-500"}),"Por Casa de Apuestas"]})}),(0,a.jsx)("div",{className:"p-4",children:0===j.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):(0,a.jsx)("div",{className:"space-y-3",children:j.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.houseLogo?(0,a.jsx)("img",{src:e.houseLogo,alt:e.houseName,className:"w-6 h-6 object-contain"}):(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center text-xs font-bold",children:e.houseName.charAt(0)}),(0,a.jsx)("span",{className:"text-sm",children:e.houseName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.clicks," clicks"]}),(0,a.jsxs)("span",{className:"text-sm text-green-600",children:[e.conversions," conv."]})]})]},e.houseId))})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDCE2 Por Campa\xf1a"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Campa\xf1a"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Clicks"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Conversiones"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Conv."})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===f.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500",children:"No hay datos para el per\xedodo seleccionado"})}):f.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.campaignName}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:e.clicks.toLocaleString()}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-green-600",children:e.conversions.toLocaleString()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-gray-500",children:[e.clicks>0?(e.conversions/e.clicks*100).toFixed(1):0,"%"]})]},e.campaignId))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDCC8 Evoluci\xf3n Diaria"})}),(0,a.jsx)("div",{className:"p-4",children:0===N.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Sin datos"}):(0,a.jsx)("div",{className:"space-y-2",children:N.slice(-14).map(e=>{let s=Math.max(...N.map(e=>e.clicks),1),t=e.clicks/s*100;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-20 text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,a.jsx)("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full",style:{width:"".concat(t,"%")}})}),(0,a.jsxs)("div",{className:"w-24 text-right text-sm",children:[(0,a.jsx)("span",{className:"text-gray-700",children:e.clicks}),(0,a.jsxs)("span",{className:"text-green-600 ml-2",children:["+",e.conversions]})]})]},e.date)})})})]})]})}let b=[{code:"ES",name:"Espa\xf1a"},{code:"DE",name:"Alemania"},{code:"IT",name:"Italia"},{code:"AT",name:"Austria"},{code:"PT",name:"Portugal"},{code:"GR",name:"Grecia"},{code:"BE",name:"B\xe9lgica"},{code:"NL",name:"Pa\xedses Bajos"},{code:"MX",name:"M\xe9xico"},{code:"CO",name:"Colombia"},{code:"AR",name:"Argentina"},{code:"CL",name:"Chile"},{code:"PE",name:"Per\xfa"},{code:"US",name:"Estados Unidos"},{code:"UK",name:"Reino Unido"},{code:"FR",name:"Francia"}];function j(){let[e,s]=(0,r.useState)("houses"),[t,l]=(0,r.useState)(!0),[d,n]=(0,r.useState)([]),[c,o]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)({tipsterId:"",houseId:"",status:"",startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[v,f]=(0,r.useState)({total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),[D,w]=(0,r.useState)([]),[C,E]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[A,P]=(0,r.useState)(!1),[T,R]=(0,r.useState)(!1),[I,F]=(0,r.useState)(null),[M,U]=(0,r.useState)({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""}),[L,O]=(0,r.useState)({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),[B,V]=(0,r.useState)({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),[z,G]=(0,r.useState)(!1),[q,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{H()},[e]);let H=async()=>{if("stats"===e){l(!1);return}l(!0),_(null);try{if("houses"===e){let e=await i.Qm.admin.getHouses(!0);n(e.data||[])}else if("import"===e){let[e,s]=await Promise.all([i.Qm.admin.getHouses(!0),i.Qm.admin.getImportBatches()]);n(e.data||[]),o(s.data||[])}else if("conversions"===e)await Z();else if("payouts"===e){let e=await i.Qm.admin.getPayouts();m(e.data||[])}}catch(e){var s,t;_((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al cargar datos")}finally{l(!1)}},Z=async()=>{j(!0);try{let[e,s,t]=await Promise.all([i.Qm.admin.getReferrals(y),i.Qm.admin.getHouses(!0),i.Qm.admin.getTipsters()]);h(e.data.referrals||[]),f(e.data.stats||{total:0,pending:0,approved:0,rejected:0,totalCommissionCents:0}),n(s.data||[]),w(t.data||[])}catch(e){console.error("Error loading referrals:",e)}finally{j(!1)}},Q=e=>{e?(S(e),U({name:e.name,slug:e.slug,logoUrl:e.logoUrl||"",masterAffiliateUrl:e.masterAffiliateUrl,trackingParamName:e.trackingParamName,commissionPerReferralCents:e.commissionPerReferralCents,allowedCountries:e.allowedCountries,blockedCountries:e.blockedCountries,description:e.description||"",websiteUrl:e.websiteUrl||""})):(S(null),U({name:"",slug:"",logoUrl:"",masterAffiliateUrl:"",trackingParamName:"subid",commissionPerReferralCents:5e3,allowedCountries:[],blockedCountries:[],description:"",websiteUrl:""})),E(!0)},Y=async()=>{G(!0),_(null);try{k?await i.Qm.admin.updateHouse(k.id,M):await i.Qm.admin.createHouse(M),E(!1),H()}catch(t){var e,s;_((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al guardar casa")}finally{G(!1)}},J=async e=>{try{await i.Qm.admin.updateHouse(e.id,{status:"ACTIVE"===e.status?"INACTIVE":"ACTIVE"}),H()}catch(e){var s,t;_((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al cambiar estado")}},K=async()=>{if(!L.file||!L.houseId){_("Selecciona una casa y un archivo CSV");return}G(!0),_(null);try{let e=new FormData;e.append("file",L.file),e.append("houseId",L.houseId),e.append("periodMonth",L.periodMonth),await i.Qm.admin.importCsv(e),P(!1),O({houseId:"",periodMonth:new Date().toISOString().slice(0,7),file:null}),H()}catch(t){var e,s;_((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al importar CSV")}finally{G(!1)}},W=async()=>{let e=prompt("Ingresa el per\xedodo (formato: YYYY-MM)",new Date().toISOString().slice(0,7));if(e){G(!0),_(null);try{await i.Qm.admin.generatePayouts(e),H()}catch(e){var s,t;_((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al generar liquidaciones")}finally{G(!1)}}},$=e=>{F(e),V({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),R(!0)},X=async()=>{if(I){G(!0),_(null);try{await i.Qm.admin.markPayoutPaid(I.id,B),R(!1),H()}catch(t){var e,s;_((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al marcar como pagado")}finally{G(!1)}}},ee=e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat({ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",PAID:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-blue-100 text-blue-800",FAILED:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:e});return t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83E\uDD1D Afiliaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona casas de apuestas y estad\xedsticas de campa\xf1as de tipsters"})]}),q&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("p",{className:"text-red-600",children:q}),(0,a.jsx)("button",{onClick:()=>_(null),className:"text-sm text-red-500 underline mt-1",children:"Cerrar"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex -mb-px overflow-x-auto",children:[{id:"houses",label:"\uD83C\uDFE0 Casas de Apuestas"},{id:"stats",label:"\uD83D\uDCCA Estad\xedsticas"},{id:"conversions",label:"\uD83D\uDC65 Conversiones"},{id:"import",label:"\uD83D\uDCE4 Importar CSV"},{id:"payouts",label:"\uD83D\uDCB5 Liquidaciones"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap ".concat(e===t.id?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.label,"conversions"===t.id&&v.pending>0&&(0,a.jsx)("span",{className:"ml-2 bg-yellow-500 text-white px-2 py-0.5 rounded-full text-xs",children:v.pending})]},t.id))})}),(0,a.jsxs)("div",{className:"p-6",children:["houses"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Casas de Apuestas"}),(0,a.jsx)("button",{onClick:()=>Q(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Nueva Casa"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pa\xedses"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.logoUrl?(0,a.jsx)("img",{src:e.logoUrl,alt:e.name,className:"w-10 h-10 object-contain"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center font-bold",children:e.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.slug})]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-green-600 font-medium",children:["€",e.commissionPerReferralEur,"/ref"]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.allowedCountries.length>0?"✅ ".concat(e.allowedCountries.join(", ")):e.blockedCountries.length>0?"❌ ".concat(e.blockedCountries.join(", ")):"Todos"}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:ee(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[(0,a.jsx)("button",{onClick:()=>Q(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>J(e),className:"ACTIVE"===e.status?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800",children:"ACTIVE"===e.status?"Desactivar":"Activar"})]})]},e.id))})]})})]}),"stats"===e&&(0,a.jsx)(g,{}),"conversions"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDC65 Listado de Conversiones"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:v.total}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total Conversiones"})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:v.approved+v.pending}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Registros"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["€",(v.totalCommissionCents/100).toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Comisiones"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:y.tipsterId,onChange:e=>N({...y,tipsterId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),D.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Casa"}),(0,a.jsxs)("select",{value:y.houseId,onChange:e=>N({...y,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:y.startDate,onChange:e=>N({...y,startDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:y.endDate,onChange:e=>N({...y,endDate:e.target.value}),className:"w-full border rounded-lg px-3 py-2 text-sm"})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("button",{onClick:Z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"\uD83D\uDD0D Aplicar Filtros"})})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:p?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===u.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDC65"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay referidos con los filtros seleccionados"})]}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usuario"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),(0,a.jsx)("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-3 py-3 text-sm text-gray-500",children:new Date(e.clickedAt||e.convertedAt||new Date).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)("td",{className:"px-3 py-3 text-sm font-medium text-gray-900",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-3 py-3 text-sm text-gray-600",children:e.houseName}),(0,a.jsxs)("td",{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.userEmail||e.userTelegram||e.externalRefId||"Sin datos"}),e.userTelegram&&e.userEmail&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.userTelegram]}),e.externalRefId&&(e.userEmail||e.userTelegram)&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.externalRefId]})]}),(0,a.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:e.country||"\uD83C\uDF0D"}),(0,a.jsx)("td",{className:"px-3 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("DEPOSIT"===e.eventType?"bg-green-100 text-green-700":"REGISTER"===e.eventType?"bg-blue-100 text-blue-700":"QUALIFIED"===e.eventType?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"),children:"DEPOSIT"===e.eventType?"\uD83D\uDCB0 Dep\xf3sito":"REGISTER"===e.eventType?"\uD83D\uDCDD Registro":"QUALIFIED"===e.eventType?"✅ Calificado":e.eventType||"Click"})}),(0,a.jsxs)("td",{className:"px-3 py-3 text-right text-sm font-medium text-green-600",children:["€",(e.commissionCents/100).toFixed(2)]})]},e.id))})]})})]}),"import"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Importar Conversiones (CSV)"}),(0,a.jsx)("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"+ Importar CSV"})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Formato CSV est\xe1ndar:"})," tipster_tracking_id, event_type (REGISTER/DEPOSIT/QUALIFIED), occurred_at, external_ref_id (opcional), amount (opcional)"]})}),(0,a.jsx)("h3",{className:"font-medium mb-3",children:"Historial de Importaciones"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Casa"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Archivo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Filas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.houseName}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.periodMonth}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.fileName}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:[e.processedRows,"/",e.totalRows,e.errorRows>0&&(0,a.jsxs)("span",{className:"text-red-500 ml-1",children:["(",e.errorRows," err)"]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:ee(e.status)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.importedAt).toLocaleDateString("es-ES")})]},e.id))})]})})]}),"payouts"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Liquidaciones de Afiliaci\xf3n"}),(0,a.jsx)("button",{onClick:W,disabled:z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:z?"Generando...":"⚡ Generar Liquidaciones"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Referidos"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.periodMonth}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.totalReferrals}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-green-600",children:["€",e.totalAmountEur.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:ee(e.status)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center",children:["PENDING"===e.status&&(0,a.jsx)("button",{onClick:()=>$(e),className:"text-green-600 hover:text-green-800 font-medium",children:"Marcar Pagado"}),"PAID"===e.status&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.paidAt?new Date(e.paidAt).toLocaleDateString("es-ES"):"-"})]})]},e.id))})]})})]})]})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto py-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:k?"Editar Casa de Apuestas":"Nueva Casa de Apuestas"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,a.jsx)("input",{type:"text",value:M.name,onChange:e=>U({...M,name:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Bwin"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,a.jsx)("input",{type:"text",value:M.slug,onChange:e=>U({...M,slug:e.target.value.toLowerCase()}),className:"w-full border rounded-lg px-3 py-2",placeholder:"bwin",disabled:!!k})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL del Logo"}),(0,a.jsx)("input",{type:"url",value:M.logoUrl,onChange:e=>U({...M,logoUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link Maestro de Afiliaci\xf3n *"}),(0,a.jsx)("input",{type:"url",value:M.masterAffiliateUrl,onChange:e=>U({...M,masterAffiliateUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://bwin.com/register?affiliate=antia"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par\xe1metro de Tracking"}),(0,a.jsx)("input",{type:"text",value:M.trackingParamName,onChange:e=>U({...M,trackingParamName:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"subid"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisi\xf3n por Referido (€) *"}),(0,a.jsx)("input",{type:"number",value:M.commissionPerReferralCents/100,onChange:e=>U({...M,commissionPerReferralCents:Math.round(100*parseFloat(e.target.value))}),className:"w-full border rounded-lg px-3 py-2",step:"0.01",min:"0"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Permitidos"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:M.allowedCountries.includes(e.code),onChange:s=>{s.target.checked?U({...M,allowedCountries:[...M.allowedCountries,e.code]}):U({...M,allowedCountries:M.allowedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xedses Bloqueados"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:M.blockedCountries.includes(e.code),onChange:s=>{s.target.checked?U({...M,blockedCountries:[...M.blockedCountries,e.code]}):U({...M,blockedCountries:M.blockedCountries.filter(s=>s!==e.code)})}}),e.code]},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:M.description,onChange:e=>U({...M,description:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL"}),(0,a.jsx)("input",{type:"url",value:M.websiteUrl,onChange:e=>U({...M,websiteUrl:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"https://www.bwin.com"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>E(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:Y,disabled:z||!M.name||!M.slug||!M.masterAffiliateUrl,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:z?"Guardando...":"Guardar"})]})]})})}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Importar CSV"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Casa de Apuestas *"}),(0,a.jsxs)("select",{value:L.houseId,onChange:e=>O({...L,houseId:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Selecciona una casa"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per\xedodo (YYYY-MM) *"}),(0,a.jsx)("input",{type:"month",value:L.periodMonth,onChange:e=>O({...L,periodMonth:e.target.value}),className:"w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo CSV *"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var s;return O({...L,file:(null===(s=e.target.files)||void 0===s?void 0:s[0])||null})},className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>P(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:K,disabled:z||!L.houseId||!L.file,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:z?"Importando...":"Importar"})]})]})})}),T&&I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Marcar como Pagado"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Tipster"}),(0,a.jsx)("div",{className:"font-medium",children:I.tipsterName}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Monto"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-green-600",children:["€",I.totalAmountEur.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de Pago"}),(0,a.jsxs)("select",{value:B.paymentMethod,onChange:e=>V({...B,paymentMethod:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[(0,a.jsx)("option",{value:"BANK_TRANSFER",children:"Transferencia Bancaria"}),(0,a.jsx)("option",{value:"PAYPAL",children:"PayPal"}),(0,a.jsx)("option",{value:"OTHER",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia de Pago"}),(0,a.jsx)("input",{type:"text",value:B.paymentReference,onChange:e=>V({...B,paymentReference:e.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"N\xfamero de transferencia, ID, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),(0,a.jsx)("textarea",{value:B.notes,onChange:e=>V({...B,notes:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:X,disabled:z,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:z?"Procesando...":"Confirmar Pago"})]})]})})})]})}var y=t(4646);function N(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[d,n]=(0,r.useState)(""),[c,o]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!0),[b,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[v,f]=(0,r.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString().split("T")[0]}),[D,w]=(0,r.useState)(()=>new Date().toISOString().split("T")[0]);(0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{E()},[d]);let C=async()=>{try{g(!0);let[e,t,a]=await Promise.all([i.Nq.channelMonitor.getTipsters(),i.Nq.channelMonitor.getStats(),i.Nq.channelMonitor.getChannels()]);s(e.data),h(t.data),l(a.data)}catch(e){console.error("Error loading initial data:",e)}finally{g(!1)}},E=async()=>{try{let e=await i.Nq.channelMonitor.getChannels(d||void 0);l(e.data)}catch(e){console.error("Error loading channels:",e)}},k=async e=>{try{N(e.channelId),await i.Nq.channelMonitor.toggleMonitoring(e.channelId,!e.isMonitoring),await E();let s=await i.Nq.channelMonitor.getStats();h(s.data)}catch(e){console.error("Error toggling monitoring:",e),alert("Error al cambiar el estado del monitoreo")}finally{N(null)}},S=async e=>{o(e),await A(e.channelId)},A=async e=>{try{j(!0);let s=await i.Nq.channelMonitor.getMessages(e,{startDate:v,endDate:D+"T23:59:59",limit:200});m(s.data)}catch(e){console.error("Error loading messages:",e),m(null)}finally{j(!1)}},P=e=>new Date(e).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=e=>({text:"\uD83D\uDCAC",photo:"\uD83D\uDCF7",video:"\uD83C\uDFAC",document:"\uD83D\uDCC4",audio:"\uD83C\uDFB5",voice:"\uD83C\uDFA4",sticker:"\uD83D\uDE00",animation:"\uD83C\uDF9E️",video_note:"\uD83C\uDFA5",location:"\uD83D\uDCCD",contact:"\uD83D\uDC64",poll:"\uD83D\uDCCA"})[e]||"\uD83D\uDCDD";return p?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCE1 Monitor de Canales"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitorea las conversaciones de los canales privados de los tipsters"})]}),u&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCE1 Canales Monitoreando"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:u.activeMonitoring})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCAC Mensajes Capturados"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:u.totalMessages.toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Total Canales Disponibles"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:t.length})]})]}),c&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["\uD83D\uDCAC ",c.channelTitle]}),c.tipsterName&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Tipster: ",c.tipsterName]})]}),(0,a.jsx)("button",{onClick:()=>{o(null),m(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"← Volver"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:v,onChange:e=>f(e.target.value),className:"border border-gray-300 rounded px-3 py-1.5 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:D,onChange:e=>w(e.target.value),className:"border border-gray-300 rounded px-3 py-1.5 text-sm"})]}),(0,a.jsx)("button",{onClick:()=>{c&&A(c.channelId)},className:"mt-5 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Buscar"})]})]}),(0,a.jsx)("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:b?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x&&x.messages.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[x.messages.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.isForward?"bg-yellow-50 border-l-4 border-yellow-400":"bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:T(e.messageType)}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[e.senderName,e.senderUsername&&(0,a.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["@",e.senderUsername]})]}),e.isReply&&(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"Respuesta"}),e.isForward&&(0,a.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded",children:"Reenviado"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:P(e.timestamp)})]}),(0,a.jsx)("div",{className:"mt-1 text-gray-700 whitespace-pre-wrap",children:e.content})]},e.id)),x.hasMore&&(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("button",{onClick:()=>{},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Cargar m\xe1s mensajes..."})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay mensajes en el per\xedodo seleccionado"}),!(null==x?void 0:x.isMonitoring)&&(0,a.jsx)("p",{className:"text-yellow-600 text-sm mt-2",children:"⚠️ El monitoreo no est\xe1 activo. Act\xedvalo para comenzar a capturar mensajes."})]})}),x&&(0,a.jsxs)("div",{className:"p-4 border-t bg-gray-50 text-sm text-gray-500",children:["Total: ",x.total.toLocaleString()," mensajes en el per\xedodo seleccionado"]})]}),!c&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDCCB Canales Disponibles"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-500",children:"Filtrar por Tipster:"}),(0,a.jsxs)("select",{value:d,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm min-w-[200px]",children:[(0,a.jsx)("option",{value:"",children:"Todos los tipsters"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.publicName," (",e.channelCount," canales)"]},e.id))]})]})]})}),0===t.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCE1"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay canales detectados"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Los canales aparecer\xe1n aqu\xed cuando el bot sea a\xf1adido como administrador"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full","data-testid":"channels-table",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Canal"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mensajes"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.channelTitle}),e.channelUsername&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.channelUsername]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.channelId]})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[e.tipsterName?(0,a.jsx)("span",{className:"text-gray-900",children:e.tipsterName}):(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Sin asignar"}),e.addedByUsername&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["A\xf1adido por: @",e.addedByUsername]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("channel"===e.channelType?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"channel"===e.channelType?"\uD83D\uDCE2 Canal":"\uD83D\uDC65 Grupo"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:e.messageCount.toLocaleString()})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.isMonitoring?(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✅ Monitoreando"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"⏸️ Inactivo"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(e),disabled:y===e.channelId,className:"px-3 py-1.5 text-xs font-medium rounded-lg transition ".concat(e.isMonitoring?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"," disabled:opacity-50"),"data-testid":"toggle-monitoring-".concat(e.channelId),children:y===e.channelId?"...":e.isMonitoring?"⏹️ Detener":"▶️ Activar"}),e.messageCount>0&&(0,a.jsx)("button",{onClick:()=>S(e),className:"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200","data-testid":"view-messages-".concat(e.channelId),children:"\uD83D\uDC41️ Ver"})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ C\xf3mo funciona el monitoreo"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Activar monitoreo:"}),' Haz clic en "Activar" para comenzar a capturar mensajes del canal.']}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Solo texto:"})," Se captura el texto de los mensajes. Para fotos/videos solo se registra que fueron enviados."]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"En tiempo real:"})," Los mensajes se guardan a medida que llegan. No se pueden recuperar mensajes anteriores."]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Privacidad:"})," Esta informaci\xf3n es confidencial y solo visible para administradores."]})]})]})]})}var v=t(7120),f=t(3119);function D(){var e,s,t,d,n,c,o,x,m,u,h,p,g,b;let D=(0,l.useRouter)(),{formatPrice:w,symbol:C}=(0,v.U)(),[E,k]=(0,r.useState)("tipsters"),[S,A]=(0,r.useState)(!0),[P,T]=(0,r.useState)(""),[R,I]=(0,r.useState)([]),[F,M]=(0,r.useState)(null),[U,L]=(0,r.useState)(null),[O,B]=(0,r.useState)(!1),[V,z]=(0,r.useState)([]),[G,q]=(0,r.useState)(null),[_,H]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)({customFeePercent:10,useCustomFee:!1,autoTierEnabled:!0,notes:""}),[Y,J]=(0,r.useState)([]),[K,W]=(0,r.useState)(!1),[$,X]=(0,r.useState)({baseCurrency:"EUR",targetCurrency:"USD",rate:1.08}),[ee,es]=(0,r.useState)("summary"),[et,ea]=(0,r.useState)(null),[er,el]=(0,r.useState)("EUR"),[ei,ed]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[en,ec]=(0,r.useState)(!1),[eo,ex]=(0,r.useState)([]),[em,eu]=(0,r.useState)({pending:0,approved:0,rejected:0}),[eh,ep]=(0,r.useState)("PENDING"),[eg,eb]=(0,r.useState)(null),[ej,ey]=(0,r.useState)(!1),[eN,ev]=(0,r.useState)(!1),[ef,eD]=(0,r.useState)(""),[ew,eC]=(0,r.useState)([]),[eE,ek]=(0,r.useState)(!1),[eS,eA]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""}),[eP,eT]=(0,r.useState)({totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0}),[eR,eI]=(0,r.useState)([]),[eF,eM]=(0,r.useState)(!1),[eU,eL]=(0,r.useState)(""),[eO,eB]=(0,r.useState)(null),[eV,ez]=(0,r.useState)(""),[eG,eq]=(0,r.useState)(!1),[e_,eH]=(0,r.useState)({open:0,inProgress:0,resolved:0}),[eZ,eQ]=(0,r.useState)([]),[eY,eJ]=(0,r.useState)(!1),[eK,eW]=(0,r.useState)({pending:{count:0,totalCents:0},approved:{count:0,totalCents:0},paid:{count:0,totalCents:0},rejected:{count:0,totalCents:0}}),[e$,eX]=(0,r.useState)(""),[e0,e2]=(0,r.useState)(null),[e3,e1]=(0,r.useState)(!1),[e5,e6]=(0,r.useState)(null),[e4,e8]=(0,r.useState)("BANK_TRANSFER"),[e7,e9]=(0,r.useState)(""),[se,ss]=(0,r.useState)(""),[st,sa]=(0,r.useState)(""),[sr,sl]=(0,r.useState)(!1),[si,sd]=(0,r.useState)(""),[sn,sc]=(0,r.useState)(""),[so,sx]=(0,r.useState)("");(0,r.useEffect)(()=>{sm(),sC(),sg(),sj()},[]),(0,r.useEffect)(()=>{"tipsters"===E&&su(),"applications"===E&&(sw(),sC()),"support"===E&&sp(),"sales"===E&&sh(),"withdrawals"===E&&sb(),"commissions"===E&&(sk(),sS()),"reports"===E&&sA()},[E,ee,er,eh,e$]);let sm=async()=>{if(!localStorage.getItem("access_token")){D.push("/login");return}A(!1)},su=async()=>{try{let e=await i.Nq.tipsters.getAll();I(e.data.tipsters||[]),T("")}catch(s){var e;(null===(e=s.response)||void 0===e?void 0:e.status)===403?T("No tienes permisos de SuperAdmin"):T("Error al cargar tipsters")}},sh=async()=>{ek(!0);try{let e=await i.Nq.sales.getAll(eS);eC(e.data.sales||[]),eT(e.data.stats||{totalSales:0,totalGrossCents:0,totalPlatformFeeCents:0,totalNetCents:0})}catch(e){console.error("Error loading sales:",e)}finally{ek(!1)}},sp=async()=>{eM(!0);try{let e=await i.Nq.support.getAll(eU||void 0);eI(e.data.tickets||[])}catch(e){console.error("Error loading tickets:",e)}finally{eM(!1)}},sg=async()=>{try{let e=await i.Nq.support.getStats();eH(e.data)}catch(e){console.error("Error loading ticket stats:",e)}},sb=async()=>{eJ(!0);try{let e=await i.yM.admin.getAll(e$?{status:e$}:void 0);eQ(e.data.withdrawals||[]),eW(e.data.stats||{pending:{count:0,totalCents:0},approved:{count:0,totalCents:0},paid:{count:0,totalCents:0},rejected:{count:0,totalCents:0}})}catch(e){console.error("Error loading withdrawals:",e)}finally{eJ(!1)}},sj=async()=>{try{let e=await i.yM.admin.getAll();eW(e.data.stats||{pending:{count:0,totalCents:0},approved:{count:0,totalCents:0},paid:{count:0,totalCents:0},rejected:{count:0,totalCents:0}})}catch(e){console.error("Error loading withdrawal stats:",e)}},sy=async()=>{if(e0&&e5){sl(!0);try{let e;if("approve"===e5)e=await i.yM.admin.approve(e0.id,se||void 0);else if("pay"===e5)e=await i.yM.admin.pay(e0.id,{paymentMethod:e4,paymentReference:e7||void 0,adminNotes:se||void 0});else if("reject"===e5){if(!st.trim()){alert("Por favor, indica el motivo del rechazo"),sl(!1);return}e=await i.yM.admin.reject(e0.id,st)}(null==e?void 0:e.data.success)&&(alert("✅ ".concat("approve"===e5?"Solicitud aprobada":"pay"===e5?"Marcado como pagado":"Solicitud rechazada")),e1(!1),sN(),sb(),sj())}catch(t){var e,s;console.error("Error processing withdrawal:",t),alert("Error: "+((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"No se pudo procesar"))}finally{sl(!1)}}},sN=()=>{e2(null),e6(null),e8("BANK_TRANSFER"),e9(""),ss(""),sa("")},sv=(e,s)=>{e2(e),e6(s),e1(!0)},sf=async()=>{if(eO&&eV.trim()){eq(!0);try{await i.Nq.support.reply(eO.id,eV.trim()),ez("");let e=await i.Nq.support.getOne(eO.id);eB(e.data.ticket),sp()}catch(e){console.error("Error sending reply:",e),alert("Error al enviar respuesta")}finally{eq(!1)}}},sD=async(e,s)=>{try{await i.Nq.support.updateStatus(e,s),sp(),sg(),(null==eO?void 0:eO.id)===e&&eB({...eO,status:s})}catch(e){console.error("Error updating ticket status:",e),alert("Error al actualizar estado")}},sw=async()=>{try{let e=await i.Nq.applications.getAll(eh);ex(e.data.applications||[])}catch(e){console.error("Error loading applications:",e)}},sC=async()=>{try{let e=await i.Nq.applications.getStats();eu(e.data)}catch(e){console.error("Error loading application stats:",e)}},sE=async e=>{if(eg){if("REJECT"===e&&!ef.trim()){alert("Por favor, indica el motivo del rechazo");return}ev(!0);try{(await i.Nq.applications.review(eg.id,{action:e,rejectionReason:"REJECT"===e?ef:void 0})).data.success&&(alert("APPROVE"===e?"✅ Solicitud aprobada. El tipster ya puede acceder.":"❌ Solicitud rechazada."),ey(!1),eb(null),eD(""),sw(),sC())}catch(e){var s,t;alert("Error: "+((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Error al procesar"))}finally{ev(!1)}}},sk=async()=>{try{let e=await i.Nq.commissions.getAll();z(e.data||[])}catch(e){console.error("Error loading commissions:",e)}},sS=async()=>{try{let e=await i.jk.getRates();J(e.data.rates||[])}catch(e){console.error("Error loading exchange rates:",e)}},sA=async()=>{ec(!0);try{let e;let s={...ei,currency:er};switch(ee){case"summary":e=await i.Nq.reports.getSummary(er);break;case"sales":e=await i.Nq.reports.getSales(s);break;case"platform":e=await i.Nq.reports.getPlatform(s);break;case"settlements":e=await i.Nq.reports.getSettlements(s);break;case"tipsters":e=await i.Nq.reports.getTipsters(s)}ea(null==e?void 0:e.data)}catch(e){console.error("Error loading report:",e),ea(null)}finally{ec(!1)}},sP=async(e,s,t)=>{M(e);try{await i.Nq.tipsters.updateModules(e,"forecasts"===s?{moduleForecasts:!t}:{moduleAffiliate:!t}),I(a=>a.map(a=>a.id===e?{...a,modules:{...a.modules,[s]:!t}}:a))}catch(e){alert("Error al actualizar m\xf3dulo")}finally{M(null)}},sT=e=>{L(e),B(!0)},sR=e=>{q(e),Q({customFeePercent:e.config.customFeePercent||e.config.platformFeePercent,useCustomFee:e.config.useCustomFee,autoTierEnabled:e.config.autoTierEnabled,notes:e.config.notes||""}),H(!0)},sI=async()=>{if(G)try{await i.Nq.commissions.update(G.tipsterId,Z),H(!1),sk()}catch(e){alert("Error al guardar comisi\xf3n")}},sF=async()=>{try{await i.jk.admin.setRate($.baseCurrency,$.targetCurrency,$.rate),W(!1),sS()}catch(e){alert("Error al establecer tipo de cambio")}},sM=async(e,s)=>{try{await i.jk.admin.removeOverride(e,s),sS()}catch(e){alert("Error al eliminar override")}},sU=async()=>{try{let e=await i.Nq.reports.exportCSV(ee,{...ei}),s=new Blob([e.data],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="antia_".concat(ee,"_").concat(new Date().toISOString().split("T")[0],".csv"),a.click()}catch(e){alert("Error al exportar CSV")}},sL=async()=>{try{await i.iJ.logout()}catch(e){}localStorage.removeItem("access_token"),D.push("/")},sO=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return"".concat("USD"===s?"$":"€").concat((e/100).toFixed(2))};if(S)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(P)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:P}),(0,a.jsx)("button",{onClick:()=>D.push("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Volver al Login"})]})});let sB=[{id:"applications",label:"Solicitudes",icon:(0,a.jsx)("span",{children:"\uD83D\uDCCB"}),badge:em.pending>0?em.pending:void 0,badgeColor:"bg-yellow-100 text-yellow-700"},{id:"tipsters",label:"Gesti\xf3n Tipsters",icon:(0,a.jsx)("span",{children:"\uD83D\uDC65"})},{id:"sales",label:"Ventas Checkout",icon:(0,a.jsx)("span",{children:"\uD83D\uDED2"})},{id:"withdrawals",label:"Retiros / Pagos",icon:(0,a.jsx)("span",{children:"\uD83D\uDCB8"}),badge:eK.pending.count>0?eK.pending.count:void 0,badgeColor:"bg-green-100 text-green-700"},{id:"support",label:"Soporte",icon:(0,a.jsx)("span",{children:"\uD83C\uDFAB"}),badge:e_.open>0?e_.open:void 0,badgeColor:"bg-blue-100 text-blue-700"},{id:"affiliate",label:"Afiliaci\xf3n",icon:(0,a.jsx)("span",{children:"\uD83E\uDD1D"})},{id:"channel-monitor",label:"Monitor Canales",icon:(0,a.jsx)("span",{children:"\uD83D\uDCE1"})},{id:"commissions",label:"Comisiones",icon:(0,a.jsx)("span",{children:"\uD83D\uDCB0"})},{id:"reports",label:"Reportes",icon:(0,a.jsx)("span",{children:"\uD83D\uDCCA"})}];return(0,a.jsxs)(f.Z,{navItems:sB,activeView:E,onNavChange:e=>k(e),userInfo:{name:"SuperAdmin"},onLogout:sL,brandName:"Antia",brandColor:"red",badgeText:"SuperAdmin",headerActions:(0,a.jsx)(y.Z,{variant:"pill"}),children:["applications"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCB Solicitudes de Registro"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Revisa y aprueba las solicitudes de nuevos tipsters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>ep("PENDING"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("PENDING"===eh?"border-yellow-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:em.pending})]}),(0,a.jsxs)("div",{onClick:()=>ep("APPROVED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("APPROVED"===eh?"border-green-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Aprobadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:em.approved})]}),(0,a.jsxs)("div",{onClick:()=>ep("REJECTED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("REJECTED"===eh?"border-red-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"❌ Rechazadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:em.rejected})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Total"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:em.pending+em.approved+em.rejected})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["PENDING"===eh&&"⏳ Solicitudes Pendientes","APPROVED"===eh&&"✅ Solicitudes Aprobadas","REJECTED"===eh&&"❌ Solicitudes Rechazadas"]})}),0===eo.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["No hay solicitudes ",eh.toLowerCase()]})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:eo.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.publicName}),"PENDING"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"⏳ Pendiente"}),"APPROVED"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"✅ Aprobado"}),"REJECTED"===e.applicationStatus&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"❌ Rechazado"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCE7 Email:"}),(0,a.jsx)("p",{className:"font-medium",children:e.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCF1 Telegram:"}),(0,a.jsx)("p",{className:"font-medium",children:e.telegramUsername||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83C\uDF0D Pa\xeds:"}),(0,a.jsx)("p",{className:"font-medium",children:e.country||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCC5 Fecha:"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]}),e.experience&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2 line-clamp-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Experiencia:"})," ",e.experience]}),e.rejectionReason&&(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Motivo rechazo:"})," ",e.rejectionReason]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>{eb(e),ey(!0)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Ver Detalles"}),"PENDING"===e.applicationStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{eb(e),sE("APPROVE")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"✅ Aprobar"}),(0,a.jsx)("button",{onClick:()=>{eb(e),ey(!0)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"❌ Rechazar"})]})]})]})},e.id))})]})]}),"tipsters"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDC65 Gesti\xf3n de Tipsters"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Controla los m\xf3dulos habilitados para cada tipster"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:R.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Pron\xf3sticos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:R.filter(e=>e.modules.forecasts).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Con Afiliaci\xf3n"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:R.filter(e=>e.modules.affiliate).length})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Lista de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"KYC"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pron\xf3sticos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Afiliaci\xf3n"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:R.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:(null===(s=e.publicName)||void 0===s?void 0:s.charAt(0).toUpperCase())||"?"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.publicName}),e.telegramUsername&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.telegramUsername]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:e.kycCompleted?"✓ Completo":"Pendiente"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>sP(e.id,"forecasts",e.modules.forecasts),disabled:F===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.forecasts?"bg-blue-600":"bg-gray-200"," ").concat(F===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.forecasts?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>sP(e.id,"affiliate",e.modules.affiliate),disabled:F===e.id,className:"relative inline-flex h-6 w-11 rounded-full transition-colors ".concat(e.modules.affiliate?"bg-purple-600":"bg-gray-200"," ").concat(F===e.id?"opacity-50":""),children:(0,a.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition ".concat(e.modules.affiliate?"translate-x-5":"translate-x-0")})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("button",{onClick:()=>sT(e),className:"px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 text-sm font-medium transition",children:"Ver Info"})})]},e.id)})})]})})]})]}),"sales"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDED2 Ventas Checkout"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Listado completo de todas las ventas de la plataforma"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB0 Volumen Bruto"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w(eP.totalGrossCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:w(eP.totalPlatformFeeCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCB5 Neto Tipsters"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w(eP.totalNetCents)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDED2 Total Ventas"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eP.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\uD83D\uDD0D Filtros"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:eS.startDate,onChange:e=>eA({...eS,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:eS.endDate,onChange:e=>eA({...eS,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Tipster"}),(0,a.jsxs)("select",{value:eS.tipsterId,onChange:e=>eA({...eS,tipsterId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),R.map(e=>(0,a.jsx)("option",{value:e.id,children:e.publicName},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Estado"}),(0,a.jsxs)("select",{value:eS.status,onChange:e=>eA({...eS,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"PAGADA",children:"Pagada"}),(0,a.jsx)("option",{value:"ACCESS_GRANTED",children:"Acceso Otorgado"}),(0,a.jsx)("option",{value:"PENDIENTE",children:"Pendiente"}),(0,a.jsx)("option",{value:"REFUNDED",children:"Reembolsada"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Pasarela"}),(0,a.jsxs)("select",{value:eS.paymentProvider,onChange:e=>eA({...eS,paymentProvider:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todas"}),(0,a.jsx)("option",{value:"stripe",children:"Stripe"}),(0,a.jsx)("option",{value:"redsys",children:"Redsys"}),(0,a.jsx)("option",{value:"test",children:"Test"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Pa\xeds"}),(0,a.jsxs)("select",{value:eS.country,onChange:e=>eA({...eS,country:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"ES",children:"Espa\xf1a"}),(0,a.jsx)("option",{value:"MX",children:"M\xe9xico"}),(0,a.jsx)("option",{value:"AR",children:"Argentina"}),(0,a.jsx)("option",{value:"CO",children:"Colombia"}),(0,a.jsx)("option",{value:"US",children:"Estados Unidos"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:sh,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"\uD83D\uDD0D Aplicar Filtros"}),(0,a.jsx)("button",{onClick:()=>{eA({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],tipsterId:"",productId:"",status:"",paymentProvider:"",country:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm",children:"Limpiar"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:eE?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Cargando ventas..."})]}):0===ew.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No hay ventas"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Ajusta los filtros o espera a tener ventas"})]}):(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Producto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pasarela"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:ew.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.clientEmail||"An\xf3nimo"}),e.clientTelegramId&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCF1 ",e.clientTelegramId]})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-[200px] truncate",children:e.productTitle})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:w(e.grossAmountCents)}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-red-600",children:["-",w(e.platformFeeCents),(0,a.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",e.platformFeePercent,"%)"]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-green-600",children:w(e.netAmountCents)}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("stripe"===e.paymentProvider?"bg-purple-100 text-purple-700":"redsys"===e.paymentProvider?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"stripe"===e.paymentProvider?"\uD83D\uDCB3 Stripe":"redsys"===e.paymentProvider?"\uD83C\uDFE6 Redsys":e.paymentProvider||"N/A"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"text-sm",children:e.country||"\uD83C\uDF0D"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("PAGADA"===e.status||"ACCESS_GRANTED"===e.status?"bg-green-100 text-green-700":"PENDIENTE"===e.status?"bg-yellow-100 text-yellow-700":"REFUNDED"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"),children:"ACCESS_GRANTED"===e.status?"✅ Acceso":"PAGADA"===e.status?"✅ Pagada":"PENDIENTE"===e.status?"⏳ Pendiente":"REFUNDED"===e.status?"↩️ Reembolso":e.status})})]},e.id))})]})})})]}),"support"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83C\uDFAB Centro de Soporte"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona los tickets de soporte de tipsters y clientes"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>{eL(""),sp()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat(eU?"border-transparent hover:border-gray-200":"border-gray-400"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDCCA Todos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e_.open+e_.inProgress+e_.resolved})]}),(0,a.jsxs)("div",{onClick:()=>{eL("OPEN"),sp()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("OPEN"===eU?"border-yellow-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Abiertos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e_.open})]}),(0,a.jsxs)("div",{onClick:()=>{eL("IN_PROGRESS"),sp()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("IN_PROGRESS"===eU?"border-blue-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"\uD83D\uDD04 En Proceso"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e_.inProgress})]}),(0,a.jsxs)("div",{onClick:()=>{eL("RESOLVED"),sp()},className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("RESOLVED"===eU?"border-green-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Resueltos"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e_.resolved})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"font-bold text-gray-900",children:"\uD83D\uDCCB Tickets"})}),eF?(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"})}):0===eR.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No hay tickets"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100 max-h-[600px] overflow-y-auto",children:eR.map(e=>{var s;return(0,a.jsx)("div",{onClick:()=>eB(e),className:"p-4 cursor-pointer hover:bg-gray-50 transition ".concat((null==eO?void 0:eO.id)===e.id?"bg-red-50 border-l-4 border-red-500":""),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("TIPSTER"===e.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"TIPSTER"===e.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("OPEN"===e.status?"bg-yellow-100 text-yellow-700":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"OPEN"===e.status?"Abierto":"IN_PROGRESS"===e.status?"En proceso":"Resuelto"})]}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 mt-1 truncate",children:e.subject}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.userName||e.userEmail}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(null===(s=e.responses)||void 0===s?void 0:s.length)>0&&(0,a.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e.responses.length})]})},e.id)})})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:eO?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("TIPSTER"===eO.userRole?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"TIPSTER"===eO.userRole?"\uD83D\uDC64 Tipster":"\uD83D\uDC65 Cliente"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"•"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:eO.userName||eO.userEmail})]}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:eO.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Creado: ",new Date(eO.createdAt).toLocaleString("es-ES")]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("select",{value:eO.status,onChange:e=>sD(eO.id,e.target.value),className:"px-3 py-1.5 rounded-lg border text-sm font-medium ".concat("OPEN"===eO.status?"border-yellow-300 bg-yellow-50 text-yellow-700":"IN_PROGRESS"===eO.status?"border-blue-300 bg-blue-50 text-blue-700":"border-green-300 bg-green-50 text-green-700"),children:[(0,a.jsx)("option",{value:"OPEN",children:"⏳ Abierto"}),(0,a.jsx)("option",{value:"IN_PROGRESS",children:"\uD83D\uDD04 En Proceso"}),(0,a.jsx)("option",{value:"RESOLVED",children:"✅ Resuelto"})]})})]})}),(0,a.jsxs)("div",{className:"p-6 max-h-[400px] overflow-y-auto space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 mr-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["TIPSTER"===eO.userRole?"\uD83D\uDC64":"\uD83D\uDC65"," ",eO.userName||"Usuario"]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(eO.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:eO.message})]}),null===(e=eO.responses)||void 0===e?void 0:e.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isAdmin?"bg-red-50 ml-12":"bg-gray-50 mr-12"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.isAdmin?"text-red-600":"text-gray-700"),children:e.isAdmin?"\uD83D\uDD27 Soporte Antia":"".concat("TIPSTER"===eO.userRole?"\uD83D\uDC64":"\uD83D\uDC65"," ").concat(eO.userName||"Usuario")}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:e.message})]},s))]}),"RESOLVED"!==eO.status&&(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("textarea",{value:eV,onChange:e=>ez(e.target.value),placeholder:"Escribe tu respuesta...",rows:3,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,a.jsx)("button",{onClick:()=>{sf(),sD(eO.id,"IN_PROGRESS")},disabled:!eV.trim()||eG,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm disabled:opacity-50",children:eG?"...":"\uD83D\uDCAC Responder"}),(0,a.jsx)("button",{onClick:()=>{sf(),sD(eO.id,"RESOLVED")},disabled:!eV.trim()||eG,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium text-sm disabled:opacity-50",children:eG?"...":"✅ Responder y Cerrar"})]})]})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFAB"}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Selecciona un ticket"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Haz clic en un ticket de la lista para ver los detalles y responder"})]})})]})]}),"commissions"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCB0 Gesti\xf3n de Comisiones"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configura las comisiones de plataforma y tipos de cambio"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCB1 Tipos de Cambio"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"EUR / USD - API externa + override manual"})]}),(0,a.jsx)("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Establecer Manual"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Y.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.baseCurrency," → ",e.targetCurrency]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.rate.toFixed(4)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Fuente: ",e.source," ",e.isManualOverride&&"(Manual)"]})]}),e.isManualOverride&&(0,a.jsx)("button",{onClick:()=>sM(e.baseCurrency,e.targetCurrency),className:"text-red-600 hover:text-red-800 text-sm",children:"Usar API"})]},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"⚙️ Comisiones por Tipster"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Est\xe1ndar: 10% | Alto volumen (≥€100k/mes): 7%"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Volumen Mensual"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"% Efectivo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Auto-Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:V.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.tipsterName}),(0,a.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:["€",e.monthlyVolumeEur]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("HIGH_VOLUME"===e.currentTier?"bg-green-100 text-green-800":"CUSTOM"===e.currentTier?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.currentTier})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-center font-bold text-blue-600",children:[e.effectivePercent,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.config.autoTierEnabled?"✅":"❌"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>sR(e),className:"text-blue-600 hover:text-blue-800",children:"Editar"})})]},e.tipsterId))})]})})]})]}),"reports"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Reportes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Anal\xedtica y exportaci\xf3n de datos"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Reporte"}),(0,a.jsxs)("select",{value:ee,onChange:e=>es(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"summary",children:"Resumen General"}),(0,a.jsx)("option",{value:"sales",children:"Ventas"}),(0,a.jsx)("option",{value:"platform",children:"Ingresos Plataforma"}),(0,a.jsx)("option",{value:"settlements",children:"Liquidaciones"}),(0,a.jsx)("option",{value:"tipsters",children:"Ranking Tipsters"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),(0,a.jsxs)("select",{value:er,onChange:e=>el(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,a.jsx)("option",{value:"USD",children:"$ USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),(0,a.jsx)("input",{type:"date",value:ei.startDate,onChange:e=>ed(s=>({...s,startDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),(0,a.jsx)("input",{type:"date",value:ei.endDate,onChange:e=>ed(s=>({...s,endDate:e.target.value})),className:"border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("button",{onClick:sA,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Generar"}),"summary"!==ee&&(0,a.jsx)("button",{onClick:sU,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDCE5 Exportar CSV"})]})}),en?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):et?(0,a.jsxs)("div",{className:"space-y-6",children:["summary"===ee&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Ventas (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(null===(s=et.last30Days)||void 0===s?void 0:s.totalSales)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:sO((null===(t=et.last30Days)||void 0===t?void 0:t.totalGrossCents)||0,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia (30 d\xedas)"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:sO((null===(d=et.last30Days)||void 0===d?void 0:d.platformIncomeCents)||0,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Liquidaciones Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:sO((null===(n=et.settlements)||void 0===n?void 0:n.pendingCents)||0,er)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Tipsters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total registrados"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(c=et.tipsters)||void 0===c?void 0:c.total)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Con ventas"}),(0,a.jsx)("span",{className:"font-medium",children:(null===(o=et.tipsters)||void 0===o?void 0:o.active)||0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Liquidaciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pendientes"}),(0,a.jsx)("span",{className:"font-medium text-orange-600",children:(null===(x=et.settlements)||void 0===x?void 0:x.pendingCount)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pagadas"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:(null===(m=et.settlements)||void 0===m?void 0:m.paidCount)||0})]})]})]})]})]}),"sales"===ee&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:et.totalSales})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:sO(et.totalGrossCents,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:sO(et.totalPlatformFeesCents,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Neto Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:sO(et.totalNetCents,er)})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Tipster"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(u=et.byTipster)||void 0===u?void 0:u.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.sales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:sO(e.grossCents,er)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:sO(e.netCents,er)})]},s))})]})})]})]}),"platform"===ee&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Pedidos"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:et.totalOrders})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Volumen Bruto"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:sO(et.totalGrossCents,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Comisi\xf3n Antia"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:sO(et.totalPlatformFeesCents,er)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"% Promedio"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[et.avgPlatformFeePercent,"%"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Por Mes"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mes"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pedidos"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisi\xf3n Antia"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Fee Pasarela"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(h=et.byMonth)||void 0===h?void 0:h.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.month}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.orders}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:sO(e.grossCents,er)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-green-600",children:sO(e.platformFeesCents,er)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-gray-500",children:sO(e.gatewayFeesCents,er)})]},s))})]})})]})]}),"tipsters"===ee&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Tipsters"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:et.totalTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Tipsters Activos"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:et.activeTipsters})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Total Ventas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:et.totalSales})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"font-bold",children:"Ranking de Tipsters"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipster"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ventas"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Bruto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Neto"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Productos"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null===(p=et.rankings)||void 0===p?void 0:p.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-gray-400",children:s+1}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.tipsterName}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:e.totalSales}),(0,a.jsx)("td",{className:"px-6 py-4 text-right text-blue-600",children:sO(e.totalGrossCents,er)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:sO(e.totalNetCents,er)}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.activeProducts})]},s))})]})})]})]})]}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Selecciona un reporte y haz clic en Generar"})]}),"affiliate"===E&&(0,a.jsx)(j,{}),"withdrawals"===E&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCB8 Solicitudes de Retiro"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona las solicitudes de pago de los tipsters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{onClick:()=>eX("PENDING"===e$?"":"PENDING"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("PENDING"===e$?"border-yellow-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"⏳ Pendientes"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:eK.pending.count}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:sO(eK.pending.totalCents)})]}),(0,a.jsxs)("div",{onClick:()=>eX("APPROVED"===e$?"":"APPROVED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("APPROVED"===e$?"border-blue-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✓ Aprobadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:eK.approved.count}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:sO(eK.approved.totalCents)})]}),(0,a.jsxs)("div",{onClick:()=>eX("PAID"===e$?"":"PAID"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("PAID"===e$?"border-green-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"✅ Pagadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:eK.paid.count}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:sO(eK.paid.totalCents)})]}),(0,a.jsxs)("div",{onClick:()=>eX("REJECTED"===e$?"":"REJECTED"),className:"bg-white rounded-lg shadow p-6 cursor-pointer border-2 transition ".concat("REJECTED"===e$?"border-red-500":"border-transparent hover:border-gray-200"),children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"❌ Rechazadas"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:eK.rejected.count}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:sO(eK.rejected.totalCents)})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{type:"text",value:si,onChange:e=>sd(e.target.value),placeholder:"Buscar por nombre, ID o m\xe9todo...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Desde:"}),(0,a.jsx)("input",{type:"date",value:sn,onChange:e=>sc(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Hasta:"}),(0,a.jsx)("input",{type:"date",value:so,onChange:e=>sx(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("button",{onClick:sb,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg text-sm font-medium transition flex items-center gap-2",children:"\uD83D\uDD04 Actualizar"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[""===e$&&"\uD83D\uDCCB Todas las Solicitudes","PENDING"===e$&&"⏳ Solicitudes Pendientes","APPROVED"===e$&&"✓ Solicitudes Aprobadas","PAID"===e$&&"✅ Solicitudes Pagadas","REJECTED"===e$&&"❌ Solicitudes Rechazadas"]}),e$&&(0,a.jsx)("button",{onClick:()=>eX(""),className:"text-sm text-gray-500 hover:text-gray-700",children:"✕ Quitar filtro"})]}),eY?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-gray-500 mt-4",children:"Cargando solicitudes..."})]}):0===eZ.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay solicitudes de retiro"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Cuando un tipster solicite un retiro, aparecer\xe1 aqu\xed"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:eZ.filter(e=>{var s,t,a,r;if(!si)return!0;let l=si.toLowerCase();return(null===(s=e.id)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(t=e.invoiceNumber)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(a=e.tipsterName)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(r=e.bankAccountType)||void 0===r?void 0:r.toLowerCase().includes(l))}).map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.tipsterName}),"PENDING"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"⏳ Pendiente"}),"APPROVED"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:"✓ Aprobada"}),"PAID"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"✅ Pagada"}),"REJECTED"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"❌ Rechazada"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Factura"}),(0,a.jsx)("p",{className:"font-mono font-medium",children:e.invoiceNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Monto Solicitado"}),(0,a.jsx)("p",{className:"font-bold text-green-600 text-lg",children:sO(e.amountCents)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"M\xe9todo de Pago"}),(0,a.jsx)("p",{className:"font-medium",children:"IBAN"===e.bankAccountType?"\uD83C\uDFE6 Banco":"PAYPAL"===e.bankAccountType?"\uD83D\uDCB3 PayPal":"₿ Crypto"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Fecha Solicitud"}),(0,a.jsx)("p",{className:"font-medium",children:e.requestedAt?new Date(e.requestedAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Email"}),(0,a.jsx)("p",{className:"font-medium truncate",children:e.tipsterEmail||"-"})]})]}),e.bankAccountDetails&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500 font-medium",children:"Datos de pago: "}),(0,a.jsx)("span",{className:"font-mono text-gray-700",children:e.bankAccountDetails.iban||e.bankAccountDetails.paypalEmail||e.bankAccountDetails.cryptoAddress||"N/A"})]}),"REJECTED"===e.status&&e.rejectionReason&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg text-sm",children:[(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"Motivo de rechazo: "}),(0,a.jsx)("span",{className:"text-red-700",children:e.rejectionReason})]}),"PAID"===e.status&&e.paymentReference&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-lg text-sm",children:[(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"Ref. de pago: "}),(0,a.jsx)("span",{className:"text-green-700",children:e.paymentReference}),e.paidAt&&(0,a.jsxs)("span",{className:"text-green-600 ml-4",children:["Pagado el ",new Date(e.paidAt).toLocaleDateString("es-ES")]})]})]}),(0,a.jsxs)("div",{className:"ml-6 flex flex-col gap-2",children:["PENDING"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>sv(e,"pay"),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition flex items-center gap-2",children:"✅ Aprobar y Pagar"}),(0,a.jsx)("button",{onClick:()=>sv(e,"reject"),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition",children:"❌ Rechazar"})]}),"APPROVED"===e.status&&(0,a.jsx)("button",{onClick:()=>sv(e,"pay"),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition flex items-center gap-2",children:"\uD83D\uDCB0 Marcar Pagado"}),e.invoicePdfUrl&&(0,a.jsx)("a",{href:e.invoicePdfUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition text-center",children:"\uD83D\uDCC4 Ver Factura"})]})]})},e.id))})]})]}),"channel-monitor"===E&&(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(N,{})}),_&&G&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["Editar Comisi\xf3n: ",G.tipsterName]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:Z.useCustomFee,onChange:e=>Q(s=>({...s,useCustomFee:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Usar comisi\xf3n personalizada"})]})}),Z.useCustomFee&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Comisi\xf3n"}),(0,a.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:Z.customFeePercent,onChange:e=>Q(s=>({...s,customFeePercent:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:Z.autoTierEnabled,onChange:e=>Q(s=>({...s,autoTierEnabled:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{children:"Auto-tier (7% para ≥€100k/mes)"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),(0,a.jsx)("textarea",{value:Z.notes,onChange:e=>Q(s=>({...s,notes:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",rows:2})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>H(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:sI,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})}),K&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Establecer Tipo de Cambio Manual"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Base"}),(0,a.jsxs)("select",{value:$.baseCurrency,onChange:e=>X(s=>({...s,baseCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"EUR",children:"EUR"}),(0,a.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda Destino"}),(0,a.jsxs)("select",{value:$.targetCurrency,onChange:e=>X(s=>({...s,targetCurrency:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2",children:[(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cambio"}),(0,a.jsx)("input",{type:"number",step:"0.0001",value:$.rate,onChange:e=>X(s=>({...s,rate:parseFloat(e.target.value)})),className:"w-full border border-gray-300 rounded-lg px-4 py-2"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["1 ",$.baseCurrency," = ",$.rate," ",$.targetCurrency]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>W(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:sF,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Establecer"})]})]})}),ej&&eg&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{ey(!1),eD("")},children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white sticky top-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Solicitud de Registro"}),(0,a.jsx)("p",{className:"text-blue-200 text-sm",children:eg.email})]}),(0,a.jsx)("button",{onClick:()=>{ey(!1),eD("")},className:"text-white/70 hover:text-white text-2xl",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:eg.publicName})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Telegram"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:eg.telegramUsername||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:eg.email||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:eg.phone||"No proporcionado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Pa\xeds"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:eg.country||"No especificado"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Fecha Solicitud"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:new Date(eg.createdAt).toLocaleString("es-ES")})]})]}),eg.experience&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCBC Experiencia como Tipster"}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg text-gray-700",children:eg.experience})]}),eg.socialMedia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCF1 Redes Sociales"}),(0,a.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg text-gray-700",children:eg.socialMedia})]}),eg.website&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83C\uDF10 Sitio Web"}),(0,a.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,a.jsx)("a",{href:eg.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:eg.website})})]}),eg.applicationNotes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"\uD83D\uDCDD Notas del Solicitante"}),(0,a.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg text-gray-700",children:eg.applicationNotes})]}),"PENDING"===eg.applicationStatus&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo de Rechazo (requerido para rechazar)"}),(0,a.jsx)("textarea",{value:ef,onChange:e=>eD(e.target.value),placeholder:"Indica el motivo por el cual se rechaza esta solicitud...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),"REJECTED"===eg.applicationStatus&&eg.rejectionReason&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"❌ Motivo del Rechazo"}),(0,a.jsx)("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 border border-red-200",children:eg.rejectionReason})]})]}),"PENDING"===eg.applicationStatus&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 sticky bottom-0 border-t",children:[(0,a.jsx)("button",{onClick:()=>{ey(!1),eD("")},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700",children:"Cancelar"}),(0,a.jsx)("button",{onClick:()=>sE("REJECT"),disabled:eN||!ef.trim(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:eN?"...":"❌ Rechazar"}),(0,a.jsx)("button",{onClick:()=>sE("APPROVE"),disabled:eN,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:eN?"...":"✅ Aprobar"})]}),"PENDING"!==eg.applicationStatus&&(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:(0,a.jsx)("button",{onClick:()=>{ey(!1),eD("")},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})}),O&&U&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCCB Informaci\xf3n del Tipster"}),(0,a.jsx)("button",{onClick:()=>B(!1),className:"text-white/80 hover:text-white text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:U.publicName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Estado"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("ACTIVE"===U.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:U.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("div",{className:"text-gray-900",children:U.email||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("div",{className:"text-gray-900",children:U.phone||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Telegram"}),(0,a.jsx)("div",{className:"text-gray-900",children:U.telegramUsername||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Promoci\xf3n"}),(0,a.jsx)("div",{className:"text-gray-900 text-sm break-all",children:U.promotionChannel||"-"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDCCA Estad\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Ventas Totales"}),(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:U.totalSales||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Ganancias Totales"}),(0,a.jsx)("div",{className:"text-xl font-bold text-green-600",children:w(U.totalEarningsCents||0)})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"\uD83C\uDFE6 Datos de Cobro (KYC)"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(U.kycCompleted?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:U.kycCompleted?"✓ Completo":"Pendiente"})]}),U.kycCompleted&&U.kycData?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Nombre/Raz\xf3n Social"}),(0,a.jsx)("div",{className:"font-medium",children:U.kycData.legalName||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Documento"}),(0,a.jsxs)("div",{className:"font-medium",children:[U.kycData.documentType,": ",U.kycData.documentNumber||"-"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Pa\xeds"}),(0,a.jsx)("div",{className:"font-medium",children:U.kycData.country||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"M\xe9todo de Cobro"}),(0,a.jsx)("div",{className:"font-medium",children:U.kycData.bankAccountType||"-"})]}),U.kycData.bankAccountDetails&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Detalles de la Cuenta"}),(0,a.jsxs)("div",{className:"font-medium font-mono text-xs bg-gray-100 p-2 rounded mt-1",children:["IBAN"===U.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["IBAN: ",U.kycData.bankAccountDetails.iban]}),"PAYPAL"===U.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["PayPal: ",U.kycData.bankAccountDetails.email]}),"CRYPTO"===U.kycData.bankAccountType&&(0,a.jsxs)(a.Fragment,{children:["Wallet (",U.kycData.bankAccountDetails.network,"): ",U.kycData.bankAccountDetails.address]}),"OTHER"===U.kycData.bankAccountType&&(0,a.jsx)(a.Fragment,{children:U.kycData.bankAccountDetails.details})]})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500 italic",children:"El tipster a\xfan no ha completado sus datos de cobro"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"\uD83D\uDD27 M\xf3dulos Habilitados"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"px-3 py-1 rounded text-sm ".concat(U.modules.forecasts?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-500"),children:[U.modules.forecasts?"✓":"✗"," Pron\xf3sticos"]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded text-sm ".concat(U.modules.affiliate?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-500"),children:[U.modules.affiliate?"✓":"✗"," Afiliaci\xf3n"]})]})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:(0,a.jsx)("button",{onClick:()=>B(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})}),e3&&e0&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{e1(!1),sN()},children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 text-white ".concat("approve"===e5?"bg-blue-600":"pay"===e5?"bg-green-600":"bg-red-600"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-3xl",children:"approve"===e5?"✓":"pay"===e5?"\uD83D\uDCB0":"❌"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"approve"===e5?"Aprobar Solicitud":"pay"===e5?"Marcar como Pagado":"Rechazar Solicitud"}),(0,a.jsxs)("p",{className:"text-white/80 text-sm",children:[e0.invoiceNumber," - ",e0.tipsterName]})]})]})}),(0,a.jsx)("div",{className:"p-6 bg-gray-50 border-b",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Importe"}),(0,a.jsx)("p",{className:"font-bold text-xl",children:sO(e0.amountCents)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"M\xe9todo de pago"}),(0,a.jsx)("p",{className:"font-medium",children:e0.bankAccountType||"No especificado"})]}),(null===(g=e0.bankAccountDetails)||void 0===g?void 0:g.iban)&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"IBAN"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:e0.bankAccountDetails.iban})]}),(null===(b=e0.bankAccountDetails)||void 0===b?void 0:b.paypalEmail)&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"PayPal"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:e0.bankAccountDetails.paypalEmail})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:["pay"===e5&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de pago usado"}),(0,a.jsxs)("select",{value:e4,onChange:e=>e8(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[(0,a.jsx)("option",{value:"BANK_TRANSFER",children:"Transferencia bancaria"}),(0,a.jsx)("option",{value:"PAYPAL",children:"PayPal"}),(0,a.jsx)("option",{value:"CRYPTO",children:"Crypto"}),(0,a.jsx)("option",{value:"OTHER",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia del pago (opcional)"}),(0,a.jsx)("input",{type:"text",value:e7,onChange:e=>e9(e.target.value),placeholder:"Ej: REF-123456",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),"reject"===e5&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Motivo del rechazo ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("textarea",{value:st,onChange:e=>sa(e.target.value),placeholder:"Explica el motivo por el cual se rechaza esta solicitud...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 resize-none"})]}),("approve"===e5||"pay"===e5)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas internas (opcional)"}),(0,a.jsx)("textarea",{value:se,onChange:e=>ss(e.target.value),placeholder:"A\xf1adir notas internas...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none"})]}),"reject"===e5&&(0,a.jsx)("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"⚠️"}),(0,a.jsxs)("div",{className:"text-sm text-red-800",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Esta acci\xf3n no se puede deshacer"}),(0,a.jsx)("p",{className:"text-red-700",children:"El tipster ser\xe1 notificado del rechazo y podr\xe1 ver el motivo."})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{e1(!1),sN()},className:"px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700 font-medium transition",children:"Cancelar"}),(0,a.jsx)("button",{onClick:sy,disabled:sr||"reject"===e5&&!st.trim(),className:"px-5 py-2.5 text-white rounded-lg font-medium transition flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat("approve"===e5?"bg-blue-600 hover:bg-blue-700":"pay"===e5?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:sr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):(0,a.jsx)(a.Fragment,{children:"approve"===e5?"✓ Aprobar":"pay"===e5?"\uD83D\uDCB0 Confirmar Pago":"❌ Rechazar"})})]})]})})]})}},4646:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(7437),r=t(7120);function l(e){let{className:s="",size:t="md",variant:l="default"}=e,{currency:i,setCurrency:d,loading:n}=(0,r.U)();return n?(0,a.jsx)("div",{className:"animate-pulse bg-gray-200 rounded ".concat("sm"===t?"w-16 h-6":"w-20 h-8")}):"pill"===l?(0,a.jsxs)("div",{className:"inline-flex rounded-full bg-gray-100 p-1 ".concat(s),children:[(0,a.jsx)("button",{onClick:()=>d("EUR"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("EUR"===i?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"€ EUR"}),(0,a.jsx)("button",{onClick:()=>d("USD"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("USD"===i?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"$ USD"})]}):"minimal"===l?(0,a.jsxs)("div",{className:"inline-flex gap-1 ".concat(s),children:[(0,a.jsx)("button",{onClick:()=>d("EUR"),className:"p-1.5 rounded transition-colors ".concat("EUR"===i?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"Euro",children:"€"}),(0,a.jsx)("button",{onClick:()=>d("USD"),className:"p-1.5 rounded transition-colors ".concat("USD"===i?"bg-green-100 text-green-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"US Dollar",children:"$"})]}):(0,a.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer ".concat({sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[t]," ").concat(s),children:[(0,a.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,a.jsx)("option",{value:"USD",children:"$ USD"})]})}},3119:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(7437),r=t(2265);function l(e){let{children:s,navItems:t,activeView:l,onNavChange:i,userInfo:d,onLogout:n,headerActions:c,brandName:o="Antia",brandColor:x="blue",badgeText:m}=e,[u,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{g(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let b=(e,s)=>{s?s():i(e),p&&h(!1)},j="red"===x?"text-red-600":"text-blue-600",y="red"===x?"bg-red-50":"bg-blue-50",N="red"===x?"text-red-600":"text-blue-600";return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b border-gray-100 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>h(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg","aria-label":"Abrir men\xfa","data-testid":"mobile-menu-button",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsx)("span",{className:"text-xl font-bold ".concat(j),children:o})]}),c&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:c})]})}),u&&p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>{p&&h(!1)},"aria-hidden":"true"}),(0,a.jsx)("aside",{className:"\n          fixed top-0 left-0 h-full bg-white border-r border-gray-100 z-50\n          transition-transform duration-300 ease-in-out\n          w-64\n          ".concat(p?u?"translate-x-0":"-translate-x-full":"translate-x-0","\n        "),"data-testid":"sidebar",children:(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(j),children:o}),p&&(0,a.jsx)("button",{onClick:()=>h(!1),className:"p-2 -mr-2 text-gray-600 hover:bg-gray-100 rounded-lg lg:hidden","aria-label":"Cerrar men\xfa","data-testid":"close-sidebar-button",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m&&(0,a.jsx)("div",{className:"text-xs ".concat("red"===x?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"," px-2 py-1 rounded inline-block mb-6 w-fit"),children:m}),(0,a.jsx)("div",{className:"".concat(m?"":"mt-6"," mb-6 pb-6 border-b border-gray-100"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 ".concat("red"===x?"bg-red-100":"bg-blue-100"," rounded-full flex items-center justify-center flex-shrink-0"),children:d.avatar||(0,a.jsx)("svg",{className:"w-5 h-5 ".concat("red"===x?"text-red-600":"text-blue-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:d.name}),d.subtitle&&(0,a.jsx)("div",{className:"text-xs text-gray-400 truncate",children:d.subtitle})]})]})}),(0,a.jsx)("nav",{className:"space-y-1 flex-1 overflow-y-auto",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>b(e.id,e.onClick),"data-testid":"nav-".concat(e.id),className:"\n                  w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm transition-colors\n                  ".concat(l===e.id?"".concat(y," ").concat(N," font-medium"):"text-gray-600 hover:bg-gray-50","\n                "),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[e.icon,(0,a.jsx)("span",{className:"truncate",children:e.label})]}),void 0!==e.badge&&null!==e.badge&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(e.badgeColor||"bg-green-100 text-green-700"),children:e.badge})]},e.id))}),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:()=>{n(),h(!1)},"data-testid":"logout-button",className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Cerrar Sesi\xf3n"]})})]})}),(0,a.jsxs)("main",{className:"pt-20 lg:pt-8 lg:ml-64 px-4 sm:px-6 lg:px-8 pb-8",children:[c&&(0,a.jsx)("div",{className:"hidden lg:flex fixed top-4 right-8 z-30 items-center gap-3",children:c}),(0,a.jsx)("div",{className:"mt-2 lg:mt-4",children:s})]})]})}}},function(e){e.O(0,[464,120,971,117,744],function(){return e(e.s=9312)}),_N_E=e.O()}]);