(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{4275:function(e,t,s){Promise.resolve().then(s.bind(s,4905))},4905:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ei}});var a=s(7437),r=s(2265),l=s(9376),n=s(1837),i=s(7120),c=s(9397),o=s(875),d=s(3247),x=s(2489),m=s(8930);let u={ES:{name:"Espa\xf1a",flag:"\uD83C\uDDEA\uD83C\uDDF8"},MX:{name:"M\xe9xico",flag:"\uD83C\uDDF2\uD83C\uDDFD"},AR:{name:"Argentina",flag:"\uD83C\uDDE6\uD83C\uDDF7"},CO:{name:"Colombia",flag:"\uD83C\uDDE8\uD83C\uDDF4"},CL:{name:"Chile",flag:"\uD83C\uDDE8\uD83C\uDDF1"},PE:{name:"Per\xfa",flag:"\uD83C\uDDF5\uD83C\uDDEA"},US:{name:"Estados Unidos",flag:"\uD83C\uDDFA\uD83C\uDDF8"},UK:{name:"Reino Unido",flag:"\uD83C\uDDEC\uD83C\uDDE7"},PT:{name:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},DE:{name:"Alemania",flag:"\uD83C\uDDE9\uD83C\uDDEA"}},g=["Casinos","Deportes","Poker","Bingo"],h=["CPA","RevShare","H\xedbrido"],p=()=>"";function b(){let{formatPrice:e}=(0,i.U)(),[t,s]=(0,r.useState)([]),[l,b]=(0,r.useState)([]),[j,y]=(0,r.useState)(!0),[f,v]=(0,r.useState)("campaigns"),[N,w]=(0,r.useState)(null),[C,k]=(0,r.useState)({country:"",category:"",house:"",commission:"",search:""}),[D,E]=(0,r.useState)(!1),[S,A]=(0,r.useState)([]),[T,P]=(0,r.useState)(""),[I,L]=(0,r.useState)(!1),[z,M]=(0,r.useState)({title:"",description:"",channel:"Telegram",selectedHouseIds:[],countriesEnabled:["ES"]}),[B,R]=(0,r.useState)(!1),[O,F]=(0,r.useState)(!1),[H,U]=(0,r.useState)(null),[V,q]=(0,r.useState)({title:"",description:"",countriesEnabled:[],countryConfigs:[]}),[_,Z]=(0,r.useState)({}),[W,$]=(0,r.useState)(""),Y=window.location.origin;(0,r.useEffect)(()=>{G()},[]);let G=async()=>{y(!0),w(null);try{let e=await n.Qm.getHousesWithLinks();s(e.data||[]);let t=localStorage.getItem("access_token"),a=await fetch("".concat(p(),"/api/tipster/landings"),{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let t=(await a.json()).map(t=>{let s=new Set;t.countryConfigs&&t.countryConfigs.forEach(e=>{var t;null===(t=e.items)||void 0===t||t.forEach(e=>{e.bettingHouseId&&s.add(e.bettingHouseId)})});let a=Array.from(s).map(t=>{var s;let a=null===(s=e.data)||void 0===s?void 0:s.find(e=>e.house.id===t);return a?{id:a.house.id,name:a.house.name,logoUrl:a.house.logoUrl}:null}).filter(Boolean);return{id:t.id,title:t.title||"Campa\xf1a sin t\xedtulo",description:t.description,imageUrl:t.imageUrl,channel:"Telegram",isActive:t.isActive,slug:t.slug,totalClicks:t.totalClicks,totalImpressions:t.totalImpressions,countriesEnabled:t.countriesEnabled||[],countryConfigs:t.countryConfigs||[],createdAt:t.createdAt,bettingHouses:a}});b(t)}}catch(s){var e,t;console.error("Error loading data:",s),w((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al cargar datos")}finally{y(!1)}},K=async e=>{try{let t=localStorage.getItem("access_token");await fetch("".concat(p(),"/api/tipster/landings/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({isActive:!e.isActive})}),await G()}catch(e){console.error("Error toggling campaign:",e)}},J=async e=>{try{let t=localStorage.getItem("access_token"),s=await fetch("".concat(p(),"/api/tipster/landings/houses/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let t=await s.json();Z(s=>({...s,[e]:t}))}}catch(e){console.error("Error loading houses for country:",e)}},X=async e=>{for(let t of(U(e),q({title:e.title,description:e.description||"",countriesEnabled:e.countriesEnabled||[],countryConfigs:e.countryConfigs||[]}),Z({}),$(""),F(!0),e.countriesEnabled||[]))await J(t)},Q=async e=>{V.countriesEnabled.includes(e)?q(t=>({...t,countriesEnabled:t.countriesEnabled.filter(t=>t!==e),countryConfigs:t.countryConfigs.filter(t=>t.country!==e)})):(await J(e),q(t=>({...t,countriesEnabled:[...t.countriesEnabled,e],countryConfigs:[...t.countryConfigs,{country:e,items:[]}]})))},ee=(e,t)=>{q(s=>{let a=[...s.countryConfigs],r=a.findIndex(t=>t.country===e);if(-1===r)a.push({country:e,items:[{bettingHouseId:t,orderIndex:0}]});else{let e=a[r].items;e.find(e=>e.bettingHouseId===t)||e.push({bettingHouseId:t,orderIndex:e.length})}return{...s,countryConfigs:a}})},et=(e,t)=>{q(s=>{let a=[...s.countryConfigs],r=a.findIndex(t=>t.country===e);return -1!==r&&(a[r].items=a[r].items.filter(e=>e.bettingHouseId!==t).map((e,t)=>({...e,orderIndex:t}))),{...s,countryConfigs:a}})},es=async()=>{if(H){if($(""),!V.title.trim()){$("El nombre de la campa\xf1a es obligatorio");return}if(0===V.countriesEnabled.length){$("Selecciona al menos un pa\xeds");return}for(let t of V.countriesEnabled){let s=V.countryConfigs.find(e=>e.country===t);if(!s||0===s.items.length){var e;$("A\xf1ade al menos una casa de apuestas para ".concat((null===(e=u[t])||void 0===e?void 0:e.name)||t));return}}R(!0);try{let e=localStorage.getItem("access_token"),t=await fetch("".concat(p(),"/api/tipster/landings/").concat(H.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:V.title,description:V.description||void 0,countriesEnabled:V.countriesEnabled,countryConfigs:V.countryConfigs})});if(!t.ok){let e=await t.json();throw Error(e.message||"Error al guardar")}await G(),F(!1),U(null)}catch(e){$(e.message)}finally{R(!1)}}},ea=e=>{A(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},er=async()=>{if(!z.title.trim()){alert("El nombre de la campa\xf1a es obligatorio");return}if(0===z.selectedHouseIds.length){alert("Selecciona al menos una casa de apuestas");return}R(!0);try{let e=localStorage.getItem("access_token"),t=z.countriesEnabled.map(e=>({country:e,items:z.selectedHouseIds.map((e,t)=>({bettingHouseId:e,orderIndex:t}))})),s=await fetch("".concat(p(),"/api/tipster/landings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:z.title,description:z.description||void 0,countriesEnabled:z.countriesEnabled,countryConfigs:t})});if(!s.ok){let e=await s.json();throw Error(e.message||"Error al crear campa\xf1a")}await G(),L(!1),M({title:"",description:"",channel:"Telegram",selectedHouseIds:[],countriesEnabled:["ES"]})}catch(e){alert(e.message)}finally{R(!1)}},el=()=>{A([]),P(""),E(!0)},en=t.filter(e=>{let{house:t}=e;return(!C.search||!!t.name.toLowerCase().includes(C.search.toLowerCase()))&&(!C.category||t.category===C.category)}),ei=t.filter(e=>{let{house:t}=e;return!T||!!t.name.toLowerCase().includes(T.toLowerCase())}),ec=l.filter(e=>!C.search||!!e.title.toLowerCase().includes(C.search.toLowerCase()));return j?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Afiliacion"}),(0,a.jsxs)("button",{onClick:el,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium transition-colors",children:["Crear Campa\xf1a ",(0,a.jsx)(c.Z,{className:"w-4 h-4"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:C.country,onChange:e=>k(t=>({...t,country:e.target.value})),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[120px]",children:[(0,a.jsx)("option",{value:"",children:"Pa\xeds"}),Object.entries(u).map(e=>{let[t,s]=e;return(0,a.jsxs)("option",{value:t,children:[s.flag," ",s.name]},t)})]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:C.category,onChange:e=>k(t=>({...t,category:e.target.value})),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[130px]",children:[(0,a.jsx)("option",{value:"",children:"Categor\xeda"}),g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:C.house,onChange:e=>k(t=>({...t,house:e.target.value})),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[170px]",children:[(0,a.jsx)("option",{value:"",children:"Casa de afiliacion"}),t.map(e=>{let{house:t}=e;return(0,a.jsx)("option",{value:t.id,children:t.name},t.id)})]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:C.commission,onChange:e=>k(t=>({...t,commission:e.target.value})),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[130px]",children:[(0,a.jsx)("option",{value:"",children:"Comision"}),h.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:C.search,onChange:e=>k(t=>({...t,search:e.target.value})),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-3 pr-10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)(d.Z,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"flex gap-8",children:[(0,a.jsx)("button",{onClick:()=>v("campaigns"),className:"pb-3 text-sm font-medium border-b-2 transition-colors ".concat("campaigns"===f?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"),children:"Campa\xf1as Activas"}),(0,a.jsx)("button",{onClick:()=>v("houses"),className:"pb-3 text-sm font-medium border-b-2 transition-colors ".concat("houses"===f?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"),children:"Casas de apuestas"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm",children:["campaigns"===f&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Campa\xf1as Activas"}),0===ec.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("p",{className:"mb-4",children:"No tienes campa\xf1as activas"}),(0,a.jsx)("button",{onClick:el,className:"text-blue-500 hover:text-blue-600 font-medium",children:"Crear tu primera campa\xf1a"})]}):(0,a.jsx)("div",{className:"space-y-4",children:ec.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"w-36 h-28 bg-gradient-to-br from-blue-800 via-blue-900 to-indigo-900 rounded-lg flex flex-col items-center justify-center overflow-hidden flex-shrink-0 p-3 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"10px 10px"}})}),e.bettingHouses&&e.bettingHouses.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex gap-1 mb-2 relative z-10",children:e.countriesEnabled.slice(0,4).map(e=>{var t;return(0,a.jsx)("span",{className:"text-lg drop-shadow-md",children:(null===(t=u[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 justify-center items-center relative z-10",children:[e.bettingHouses.slice(0,3).map(e=>(0,a.jsx)("div",{className:"w-10 h-7 bg-white rounded shadow-sm flex items-center justify-center",children:e.logoUrl?(0,a.jsx)("img",{src:e.logoUrl,alt:e.name,className:"max-w-[90%] max-h-[90%] object-contain"}):(0,a.jsx)("span",{className:"text-[7px] text-gray-700 font-bold truncate px-0.5",children:e.name})},e.id)),e.bettingHouses.length>3&&(0,a.jsxs)("span",{className:"text-white text-xs font-medium",children:["+",e.bettingHouses.length-3]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center items-center relative z-10",children:e.countriesEnabled.slice(0,4).map(e=>{var t;return(0,a.jsx)("span",{className:"text-3xl drop-shadow-lg",children:(null===(t=u[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})}),e.countriesEnabled.length>4&&(0,a.jsxs)("span",{className:"text-white text-xs mt-1 opacity-80 relative z-10",children:["+",e.countriesEnabled.length-4," m\xe1s"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Canal: ",(0,a.jsx)("span",{className:"text-blue-500",children:e.channel})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Estado: ",(0,a.jsx)("span",{className:e.isActive?"text-green-500":"text-gray-400",children:e.isActive?"Activo":"Inactivo"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>window.open("/go/".concat(e.slug),"_blank"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-medium transition-colors",children:"Ver"}),(0,a.jsx)("button",{onClick:()=>X(e),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-medium transition-colors",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>K(e),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium transition-colors",children:e.isActive?"Desactivar":"Activar"})]})]},e.id))})]}),"houses"===f&&(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left py-4 px-6 text-sm font-medium text-gray-500",children:"Campa\xf1a"}),(0,a.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-gray-500",children:"Paises"}),(0,a.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-gray-500",children:"Casa de afiliacion"}),(0,a.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-gray-500",children:"Tipo de comision"}),(0,a.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-gray-500",children:"Categor\xeda"}),(0,a.jsx)("th",{className:"py-4 px-6"})]})}),(0,a.jsx)("tbody",{children:en.map(t=>{let{house:s,link:r}=t;return(0,a.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50/50",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)("div",{className:"w-24 h-14 bg-[#1a1f2e] rounded-lg flex items-center justify-center overflow-hidden",children:s.logoUrl?(0,a.jsx)("img",{src:s.logoUrl,alt:s.name,className:"max-w-[80%] max-h-[80%] object-contain",onError:e=>{e.target.style.display="none"}}):(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:s.name})})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("div",{className:"flex flex-col gap-0.5",children:(s.allowedCountries||["ES","MX","AR"]).slice(0,3).map(e=>{var t;return(0,a.jsx)("span",{className:"text-base",children:(null===(t=u[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:s.name})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("span",{className:"text-gray-700",children:["CPA ",e(100*s.commissionPerReferralEur)]})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("span",{className:"text-gray-700",children:s.category||"Casinos"})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("button",{onClick:()=>ea(s.id),className:"flex items-center gap-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-medium transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Solicitar"]})})]},s.id)})})]}),0===en.length&&(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No hay casas de apuestas disponibles"})]})]}),D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[80vh] flex flex-col shadow-xl",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Seleccionar campa\xf1a"}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"relative mt-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:T,onChange:e=>P(e.target.value),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)(d.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:ei.map(t=>{let{house:s}=t;return(0,a.jsxs)("label",{className:"flex items-center gap-4 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:S.includes(s.id),onChange:()=>ea(s.id),className:"w-5 h-5 rounded border-gray-300 text-blue-500 focus:ring-blue-500"}),(0,a.jsx)("div",{className:"w-24 h-14 bg-[#1a1f2e] rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:s.logoUrl?(0,a.jsx)("img",{src:s.logoUrl,alt:s.name,className:"max-w-[80%] max-h-[80%] object-contain"}):(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:s.name})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s.category||"Casinos"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-0.5",children:(s.allowedCountries||["ES","MX","AR"]).slice(0,3).map(e=>{var t;return(0,a.jsx)("span",{className:"text-sm",children:(null===(t=u[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})}),(0,a.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:"+20 pa\xedses"})]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:["CPA ",e(100*s.commissionPerReferralEur)]})]},s.id)})})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),(0,a.jsxs)("button",{onClick:()=>{M(e=>({...e,selectedHouseIds:S})),E(!1),L(!0)},disabled:0===S.length,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Continuar (",S.length,")"]})]})]})}),I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-xl",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Nueva Campa\xf1a"}),(0,a.jsx)("button",{onClick:()=>L(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la campa\xf1a"}),(0,a.jsx)("input",{type:"text",placeholder:"Ej: Campa\xf1a Barcelona vs Real Madrid",value:z.title,onChange:e=>M(t=>({...t,title:e.target.value})),className:"w-full border border-gray-200 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Canal"}),(0,a.jsxs)("select",{value:z.channel,onChange:e=>M(t=>({...t,channel:e.target.value})),className:"w-full border border-gray-200 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Telegram",children:"Telegram"}),(0,a.jsx)("option",{value:"WhatsApp",children:"WhatsApp"}),(0,a.jsx)("option",{value:"Web",children:"Web"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pa\xedses objetivo"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(u).slice(0,6).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{type:"button",onClick:()=>{M(e=>({...e,countriesEnabled:e.countriesEnabled.includes(t)?e.countriesEnabled.filter(e=>e!==t):[...e.countriesEnabled,t]}))},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(z.countriesEnabled.includes(t)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.flag," ",s.name]},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Casas seleccionadas (",S.length,")"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:S.map(e=>{var s;let r=null===(s=t.find(t=>t.house.id===e))||void 0===s?void 0:s.house;return r?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[r.name,(0,a.jsx)("button",{onClick:()=>A(t=>t.filter(t=>t!==e)),className:"hover:bg-blue-200 rounded-full p-0.5",children:(0,a.jsx)(x.Z,{className:"w-3 h-3"})})]},e):null})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[(0,a.jsx)("button",{onClick:()=>L(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{onClick:er,disabled:B||!z.title.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B?"Creando...":"Crear Campa\xf1a"})]})]})})}),O&&H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] flex flex-col shadow-xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Editar Campa\xf1a"}),(0,a.jsx)("button",{onClick:()=>{F(!1),U(null)},className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-gray-500"})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la campa\xf1a"}),(0,a.jsx)("input",{type:"text",placeholder:"Nombre de la campa\xf1a",value:V.title,onChange:e=>q(t=>({...t,title:e.target.value})),className:"w-full border border-gray-200 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),(0,a.jsx)("textarea",{placeholder:"Descripci\xf3n de la campa\xf1a",value:V.description,onChange:e=>q(t=>({...t,description:e.target.value})),className:"w-full border border-gray-200 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar pa\xedses"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(u).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{type:"button",onClick:()=>Q(t),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors ".concat(V.countriesEnabled.includes(t)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.flag," ",s.name]},t)})})]}),V.countriesEnabled.map(e=>{var t,s,r,l;let n=_[e]||[],i=(null===(t=V.countryConfigs.find(t=>t.country===e))||void 0===t?void 0:t.items.map(e=>e.bettingHouseId))||[];return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:null===(s=u[e])||void 0===s?void 0:s.flag}),(null===(r=u[e])||void 0===r?void 0:r.name)||e]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[null===(l=V.countryConfigs.find(t=>t.country===e))||void 0===l?void 0:l.items.map((t,s)=>{let r=n.find(e=>e.id===t.bettingHouseId);return r?(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-400 w-5",children:[s+1,"."]}),r.logoUrl&&(0,a.jsx)("div",{className:"w-10 h-8 bg-[#1a1f2e] rounded flex items-center justify-center",children:(0,a.jsx)("img",{src:r.logoUrl,alt:r.name,className:"max-w-[90%] max-h-[90%] object-contain"})}),(0,a.jsx)("span",{className:"flex-1 text-sm font-medium",children:r.name}),(0,a.jsxs)("span",{className:"text-sm text-green-600 font-medium",children:["€",r.commissionPerReferralEur,"/ref"]}),(0,a.jsx)("button",{type:"button",onClick:()=>et(e,t.bettingHouseId),className:"p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})})]},t.bettingHouseId):null}),0===i.length&&(0,a.jsx)("p",{className:"text-sm text-gray-400 italic",children:"No hay casas de apuestas seleccionadas"})]}),(0,a.jsxs)("select",{onChange:t=>{t.target.value&&(ee(e,t.target.value),t.target.value="")},className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"+ A\xf1adir casa de apuestas..."}),n.filter(e=>!i.includes(e.id)).map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (€",e.commissionPerReferralEur,"/ref)"]},e.id))]}),0===n.length&&(0,a.jsx)("p",{className:"text-sm text-yellow-600 mt-2",children:"Cargando casas de apuestas..."})]},e)}),0===V.countriesEnabled.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"Selecciona al menos un pa\xeds para configurar las casas de apuestas"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de la campa\xf1a"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("code",{className:"flex-1 text-sm text-gray-600 truncate",children:[Y,"/go/",H.slug]}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("".concat(Y,"/go/").concat(H.slug))},className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Copiar"})]})]}),W&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:W})]})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{F(!1),U(null)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{onClick:es,disabled:B||!V.title.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B?"Guardando...":"Guardar Cambios"})]})]})})]})}var j=s(4646),y=s(3639);function f(e){let{onComplete:t}=e;return(0,a.jsx)("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 mb-6 rounded-r-lg",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-5 w-5 text-orange-400"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-orange-800",children:"\xa1Completa tus datos de cobro!"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-orange-700",children:(0,a.jsx)("p",{children:"Para poder recibir tus ganancias, necesitas completar tus datos bancarios/KYC. Esto solo te llevar\xe1 unos minutos."})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"-mx-2 -my-1.5 flex",children:(0,a.jsx)("button",{onClick:t,className:"bg-orange-100 px-4 py-2 rounded-md text-sm font-medium text-orange-800 hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-orange-50 focus:ring-orange-600 transition",children:"Completar ahora →"})})})]})]})})}var v=s(5302),N=s(2369),w=s(3774),C=s(8226),k=s(8736),D=s(5863);let E=[{value:"DNI",label:"DNI (Espa\xf1a)"},{value:"NIE",label:"NIE (Extranjero en Espa\xf1a)"},{value:"PASSPORT",label:"Pasaporte"},{value:"CIF",label:"CIF (Empresa)"}],S=[{value:"IBAN",label:"Transferencia Bancaria (IBAN)"},{value:"PAYPAL",label:"PayPal"},{value:"CRYPTO",label:"Criptomonedas (USDT)"},{value:"OTHER",label:"Otro"}],A=["Espa\xf1a","M\xe9xico","Argentina","Colombia","Chile","Per\xfa","Ecuador","Venezuela","Uruguay","Paraguay","Bolivia","Costa Rica","Panam\xe1","Guatemala","Honduras","El Salvador","Nicaragua","Rep\xfablica Dominicana","Puerto Rico","Cuba","Otro"];function T(e){let{onComplete:t,onCancel:s,initialData:l}=e,[i,c]=(0,r.useState)({legalName:(null==l?void 0:l.legalName)||"",documentType:(null==l?void 0:l.documentType)||"DNI",documentNumber:"",country:(null==l?void 0:l.country)||"Espa\xf1a",bankAccountType:(null==l?void 0:l.bankAccountType)||"IBAN",bankAccountDetails:{iban:"",bankName:"",paypalEmail:"",cryptoAddress:"",cryptoNetwork:"TRC20",otherDetails:""}}),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),h=async e=>{if(e.preventDefault(),m(""),d(!0),!i.legalName.trim()){m("El nombre o raz\xf3n social es obligatorio"),d(!1);return}if(!i.documentNumber.trim()){m("El n\xfamero de documento es obligatorio"),d(!1);return}if("IBAN"===i.bankAccountType&&!i.bankAccountDetails.iban.trim()){m("El IBAN es obligatorio"),d(!1);return}if("PAYPAL"===i.bankAccountType&&!i.bankAccountDetails.paypalEmail.trim()){m("El email de PayPal es obligatorio"),d(!1);return}if("CRYPTO"===i.bankAccountType&&!i.bankAccountDetails.cryptoAddress.trim()){m("La direcci\xf3n de wallet es obligatoria"),d(!1);return}try{let e={};switch(i.bankAccountType){case"IBAN":e={iban:i.bankAccountDetails.iban.replace(/\s/g,"").toUpperCase(),bankName:i.bankAccountDetails.bankName};break;case"PAYPAL":e={email:i.bankAccountDetails.paypalEmail};break;case"CRYPTO":e={address:i.bankAccountDetails.cryptoAddress,network:i.bankAccountDetails.cryptoNetwork};break;case"OTHER":e={details:i.bankAccountDetails.otherDetails}}await n.bs.updateKyc({legalName:i.legalName.trim(),documentType:i.documentType,documentNumber:i.documentNumber.trim(),country:i.country,bankAccountType:i.bankAccountType,bankAccountDetails:e}),g(!0),setTimeout(()=>{t()},2e3)}catch(e){var s,a;m((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Error al guardar los datos")}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(v.Z,{className:"w-8 h-8 text-green-500"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\xa1Datos guardados!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Tus datos de cobro han sido registrados correctamente."})]})}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Datos de Cobro (KYC)"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Completa tus datos para poder recibir tus ganancias"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"bg-white rounded-xl shadow-lg p-8",children:[x&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm mb-6",children:x}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Informaci\xf3n Personal / Fiscal"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo / Raz\xf3n Social *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Juan P\xe9rez Garc\xeda o Mi Empresa S.L.",value:i.legalName,onChange:e=>c({...i,legalName:e.target.value})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Nombre tal como aparece en tu documento de identidad"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Documento *"}),(0,a.jsx)("select",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.documentType,onChange:e=>c({...i,documentType:e.target.value}),children:E.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xfamero de Documento *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345678A",value:i.documentNumber,onChange:e=>c({...i,documentNumber:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 inline mr-1"}),"Pa\xeds de Residencia Fiscal *"]}),(0,a.jsx)("select",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.country,onChange:e=>c({...i,country:e.target.value}),children:A.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(C.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"M\xe9todo de Cobro"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xbfC\xf3mo quieres recibir tus pagos? *"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:S.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>c({...i,bankAccountType:e.value}),className:"p-3 rounded-lg border-2 transition text-left ".concat(i.bankAccountType===e.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)("div",{className:"font-medium text-sm",children:e.label})},e.value))})]}),"IBAN"===i.bankAccountType&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"ES12 3456 7890 1234 5678 9012",value:i.bankAccountDetails.iban,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,iban:e.target.value}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Banco (opcional)"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banco Santander, BBVA, etc.",value:i.bankAccountDetails.bankName,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,bankName:e.target.value}})})]})]}),"PAYPAL"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de PayPal *"}),(0,a.jsx)("input",{type:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"tu@email.com",value:i.bankAccountDetails.paypalEmail,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,paypalEmail:e.target.value}})})]}),"CRYPTO"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Red / Network *"}),(0,a.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.bankAccountDetails.cryptoNetwork,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,cryptoNetwork:e.target.value}}),children:[(0,a.jsx)("option",{value:"TRC20",children:"USDT (TRC20 - Tron)"}),(0,a.jsx)("option",{value:"ERC20",children:"USDT (ERC20 - Ethereum)"}),(0,a.jsx)("option",{value:"BEP20",children:"USDT (BEP20 - BSC)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci\xf3n de Wallet *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"TXxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:i.bankAccountDetails.cryptoAddress,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,cryptoAddress:e.target.value}})})]})]}),"OTHER"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detalles del m\xe9todo de pago *"}),(0,a.jsx)("textarea",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe c\xf3mo quieres recibir tus pagos...",rows:3,value:i.bankAccountDetails.otherDetails,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,otherDetails:e.target.value}})})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Informaci\xf3n importante"}),(0,a.jsxs)("ul",{className:"mt-1 list-disc list-inside space-y-1 text-blue-700",children:[(0,a.jsx)("li",{children:"Tus datos est\xe1n protegidos y solo se usar\xe1n para procesar tus pagos"}),(0,a.jsx)("li",{children:"Las liquidaciones se procesan los domingos"}),(0,a.jsx)("li",{children:"Podr\xe1s modificar estos datos desde tu perfil"})]})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar Datos"})]})]})]})}var P=s(4766),I=s(9196),L=s(7495),z=s(535),M=s(1994),B=s(3335);function R(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,B.m6)((0,M.W)(t))}let O=(0,z.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...i}=e,c=n?L.g7:"button";return(0,a.jsx)(c,{className:R(O({variant:r,size:l,className:s})),ref:t,...i})});F.displayName="Button";var H=s(3732);let U=H.fC,V=H.xz,q=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...n}=e;return(0,a.jsx)(H.h_,{children:(0,a.jsx)(H.VY,{ref:t,align:r,sideOffset:l,className:R("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});q.displayName=H.VY.displayName;var _=s(6255);let Z=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(_.fC,{ref:t,className:R("relative overflow-hidden",s),...l,children:[(0,a.jsx)(_.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(W,{}),(0,a.jsx)(_.Ns,{})]})});Z.displayName=_.fC.displayName;let W=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(_.gb,{ref:t,orientation:r,className:R("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(_.q4,{className:"relative flex-1 rounded-full bg-border"})})});W.displayName=_.gb.displayName;let $=e=>{switch(e){case"SALE":return"\uD83D\uDCB0";case"SUBSCRIPTION_NEW":return"\uD83D\uDD04";case"SUBSCRIPTION_CANCELLED":return"❌";case"SUBSCRIPTION_EXPIRED":return"⏰";case"SETTLEMENT":return"\uD83D\uDCB5";case"PAYOUT":return"✅";default:return"\uD83D\uDCE2"}},Y=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/1e3);return a<60?"Ahora":a<3600?"Hace ".concat(Math.floor(a/60)," min"):a<86400?"Hace ".concat(Math.floor(a/3600)," h"):a<604800?"Hace ".concat(Math.floor(a/86400)," d\xedas"):s.toLocaleDateString("es-ES")};function G(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(0),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=async()=>{try{let[e,s]=await Promise.all([n.hi.get("/notifications?limit=20"),n.hi.get("/notifications/unread-count")]);t(e.data.notifications||[]),l(s.data.count||0)}catch(e){console.error("Error fetching notifications:",e)}},u=async e=>{try{await n.hi.post("/notifications/".concat(e,"/read")),t(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),l(e=>Math.max(0,e-1))}catch(e){console.error("Error marking notification as read:",e)}},g=async()=>{try{d(!0),await n.hi.post("/notifications/read-all"),t(e=>e.map(e=>({...e,is_read:!0}))),l(0)}catch(e){console.error("Error marking all as read:",e)}finally{d(!1)}};return(0,r.useEffect)(()=>(m(),x.current=setInterval(m,3e4),()=>{x.current&&clearInterval(x.current)}),[]),(0,a.jsxs)(U,{open:i,onOpenChange:c,children:[(0,a.jsx)(V,{asChild:!0,children:(0,a.jsxs)(F,{variant:"ghost",size:"icon",className:"relative","aria-label":"Notificaciones",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),s>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-xs font-medium text-white flex items-center justify-center",children:s>9?"9+":s})]})}),(0,a.jsxs)(q,{className:"w-80 p-0",align:"end",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Notificaciones"}),s>0&&(0,a.jsxs)(F,{variant:"ghost",size:"sm",className:"text-xs text-blue-600 hover:text-blue-700",onClick:g,disabled:o,children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-1"}),"Marcar todas"]})]}),(0,a.jsx)(Z,{className:"h-[300px]",children:0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[200px] text-gray-500",children:[(0,a.jsx)(P.Z,{className:"h-8 w-8 mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No hay notificaciones"})]}):(0,a.jsx)("div",{className:"divide-y",children:e.map(e=>(0,a.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors ".concat(e.is_read?"":"bg-blue-50"),onClick:()=>!e.is_read&&u(e.id),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl",children:$(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm ".concat(e.is_read?"font-medium":"font-semibold"," text-gray-900"),children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:Y(e.created_at)})]}),!e.is_read&&(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-2"})]})},e.id))})}),e.length>0&&(0,a.jsx)("div",{className:"px-4 py-2 border-t text-center",children:(0,a.jsx)(F,{variant:"ghost",size:"sm",className:"text-xs text-gray-500",onClick:()=>c(!1),children:"Cerrar"})})]})]})}var K=s(401),J=s(2252),X=s(2718),Q=s(1879),ee=s(1239),et=s(8906),es=s(8867),ea=s(2431);function er(e){let{botName:t,onAuth:s,buttonSize:l="large",cornerRadius:n=10,requestAccess:i="write",showAvatar:c=!0,lang:o="es"}=e,d=(0,r.useRef)(null),x=(0,r.useCallback)(e=>{s(e)},[s]);return(0,r.useEffect)(()=>{window.TelegramLoginWidget={dataOnauth:x};let e=document.createElement("script");return e.src="https://telegram.org/js/telegram-widget.js?22",e.setAttribute("data-telegram-login",t),e.setAttribute("data-size",l),e.setAttribute("data-radius",n.toString()),e.setAttribute("data-request-access",i),e.setAttribute("data-userpic",c.toString()),e.setAttribute("data-lang",o),e.setAttribute("data-onauth","TelegramLoginWidget.dataOnauth(user)"),e.async=!0,d.current&&(d.current.innerHTML="",d.current.appendChild(e)),()=>{d.current&&(d.current.innerHTML="")}},[t,l,n,i,c,o,x]),(0,a.jsx)("div",{ref:d,className:"telegram-login-container"})}function el(e){var t;let{channels:s,botUsername:l,onConnectChannel:n,onDisconnectChannel:i,onRefreshLink:c,onTelegramAuth:o,onTelegramDisconnect:d,onConnectWithCode:x,authStatus:u,loading:g,onRefreshStatus:h}=e,[p,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(null),[D,E]=(0,r.useState)(!1),S=(0,r.useCallback)(async e=>{b(!0),v(""),w("");try{let t=await o(e);t.success?(w(t.autoConnectedChannels&&t.autoConnectedChannels>0?"\xa1Telegram conectado! Se han vinculado ".concat(t.autoConnectedChannels," canal(es) autom\xe1ticamente."):"\xa1Telegram conectado correctamente!"),h()):v("Error al conectar Telegram")}catch(e){v(e.message||"Error al conectar Telegram")}finally{b(!1)}},[o,h]),A=async e=>{k(e);try{await c(e)}finally{k(null)}},T=async()=>{try{await navigator.clipboard.writeText("@".concat(l)),E(!0),setTimeout(()=>E(!1),2e3)}catch(e){console.error("Error copying:",e)}},[P,I]=(0,r.useState)(!1),[L,z]=(0,r.useState)(""),[M,B]=(0,r.useState)(!1),R=async()=>{if(L.trim()&&x){B(!0),v(""),w("");try{let e=await x(L.trim().toUpperCase());e.success?(w(e.autoConnectedChannels&&e.autoConnectedChannels>0?"\xa1Telegram vinculado! Se han conectado ".concat(e.autoConnectedChannels," canal(es) autom\xe1ticamente."):"\xa1Telegram vinculado correctamente!"),z(""),I(!1),h()):v("C\xf3digo inv\xe1lido o expirado")}catch(s){var e,t;v((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||s.message||"Error al vincular")}finally{B(!1)}}};(0,r.useEffect)(()=>{if(N||f){let e=setTimeout(()=>{w(""),v("")},5e3);return()=>clearTimeout(e)}},[N,f]);let O=((null==u?void 0:null===(t=u.availableChannels)||void 0===t?void 0:t.filter(e=>!e.isConnected))||[]).length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Canales Premium"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Conecta tu Telegram y tus canales se vincular\xe1n autom\xe1ticamente"})]})}),N&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-green-50 text-green-700 rounded-xl border border-green-200",children:[(0,a.jsx)(K.Z,{size:18}),(0,a.jsx)("span",{children:N})]}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-700 rounded-xl border border-red-200",children:[(0,a.jsx)(J.Z,{size:18}),(0,a.jsx)("span",{children:f})]}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,a.jsx)(X.Z,{className:"text-white",size:28})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-1",children:(null==u?void 0:u.isConnected)?"Telegram Conectado":"Conecta tu Telegram"}),(null==u?void 0:u.isConnected)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg",children:[(0,a.jsx)(K.Z,{size:16}),(0,a.jsx)("span",{className:"font-medium",children:u.telegramUsername||"ID: ".concat(u.telegramId)})]}),(0,a.jsxs)("button",{onClick:d,className:"flex items-center gap-1 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,a.jsx)(Q.Z,{size:14}),"Desvincular"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cuando a\xf1adas el bot como administrador en un canal, se conectar\xe1 autom\xe1ticamente."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Vincula tu cuenta de Telegram para detectar autom\xe1ticamente los canales donde a\xf1adas el bot."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:p?(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Conectando..."})]}):(0,a.jsx)(er,{botName:l,onAuth:S,buttonSize:"large",cornerRadius:10})}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-blue-200",children:[(0,a.jsx)("button",{onClick:()=>I(!P),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:P?"▼ Ocultar opciones alternativas":"▶ Ver opciones alternativas de conexi\xf3n"}),P&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-gray-200",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Opci\xf3n 1: C\xf3digo de vinculaci\xf3n (manual)"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1 mb-3",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"https://t.me/".concat(l),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Abre @",l," en Telegram"]})}),(0,a.jsxs)("li",{children:["Escribe el comando ",(0,a.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded font-mono",children:"/vincular"})]}),(0,a.jsx)("li",{children:"El bot te dar\xe1 un c\xf3digo de 8 caracteres"}),(0,a.jsx)("li",{children:"C\xf3pialo e ingr\xe9salo aqu\xed:"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:L,onChange:e=>z(e.target.value.toUpperCase()),placeholder:"Ingresa el c\xf3digo aqu\xed",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-center font-mono tracking-widest uppercase",maxLength:8}),(0,a.jsx)("button",{onClick:R,disabled:!L.trim()||M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Verificando..."]}):"Vincular"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Opci\xf3n 2: Link directo (autom\xe1tico)"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Haz clic en el bot\xf3n y el bot te enviar\xe1 el c\xf3digo autom\xe1ticamente."}),(0,a.jsxs)("a",{href:"https://t.me/".concat(l,"?start=vincular"),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#0088cc] text-white rounded-lg hover:bg-[#0077b3] transition-colors",children:[(0,a.jsx)(X.Z,{size:18}),"Obtener c\xf3digo autom\xe1ticamente"]})]})]})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5 text-amber-500"}),"C\xf3mo conectar tu canal"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Crea tu canal privado"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Abre Telegram y crea un canal privado para tus clientes"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"A\xf1ade el bot como admin"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["A\xf1ade ",(0,a.jsxs)("button",{onClick:T,className:"text-blue-600 hover:underline font-mono",children:["@",l]})," con permisos de publicar"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center font-bold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Vincula tu cuenta"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Usa las opciones de arriba para vincular y el canal se conectar\xe1"})]})]})]}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-amber-50 rounded-xl border border-amber-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(et.Z,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-amber-800",children:"Importante: Permisos del bot"}),(0,a.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["El bot necesita el permiso de ",(0,a.jsx)("strong",{children:'"Publicar mensajes"'})," para poder dar acceso a los clientes que compren tus productos."]})]})]})})]}),s.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(K.Z,{className:"w-5 h-5 text-green-500"}),"Canales conectados (",s.length,")"]}),s.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:(0,a.jsx)(X.Z,{className:"text-white",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-lg",children:e.channelTitle}),e.channelName&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.channelName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 font-mono",children:["ID: ",e.channelId]}),e.memberCount&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.memberCount," miembros"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Conectado el ",new Date(e.connectedAt).toLocaleDateString("es-ES")]}),"auto"===e.connectionType&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full flex items-center gap-1",children:[(0,a.jsx)(ee.Z,{size:10}),"Auto"]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.isActive?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs px-3 py-1.5 bg-green-100 text-green-700 rounded-full font-medium",children:[(0,a.jsx)(K.Z,{size:12}),"Activo"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs px-3 py-1.5 bg-red-100 text-red-700 rounded-full font-medium",children:[(0,a.jsx)(J.Z,{size:12}),"Desconectado"]})})]}),e.inviteLink&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Link de invitaci\xf3n"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 truncate font-mono",children:e.inviteLink})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(e.inviteLink||""),className:"flex items-center gap-1 px-3 py-2 text-sm bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(es.Z,{size:14}),"Copiar"]}),(0,a.jsxs)("button",{onClick:()=>A(e.channelId),disabled:C===e.channelId,className:"flex items-center gap-1 px-3 py-2 text-sm bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[(0,a.jsx)(ea.Z,{size:14,className:C===e.channelId?"animate-spin":""}),"Regenerar"]})]})]})}),!e.isActive&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-50 rounded-xl border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(J.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-red-800",children:"Canal desconectado"}),(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"El bot ha sido removido de este canal. Vuelve a a\xf1adirlo como administrador para reconectarlo."})]})]})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t flex justify-end",children:(0,a.jsxs)("button",{onClick:()=>i(e.channelId),className:"flex items-center gap-1 px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors font-medium",children:[(0,a.jsx)(m.Z,{size:16}),"Desconectar canal"]})})]},e.id))]}),0===s.length&&(null==u?void 0:u.isConnected)&&!O&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 border border-gray-200 shadow-sm text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(X.Z,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"No hay canales conectados"}),(0,a.jsxs)("p",{className:"text-gray-500 max-w-md mx-auto",children:["A\xf1ade el bot ",(0,a.jsxs)("span",{className:"font-mono text-blue-600",children:["@",l]})," como administrador en tu canal de Telegram y se conectar\xe1 autom\xe1ticamente aqu\xed."]})]}),D&&(0,a.jsx)("div",{className:"fixed bottom-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg animate-fade-in",children:"✓ Nombre del bot copiado"})]})}function en(){var e,t,s,c,o,d,x,m,u;let g=(0,l.useSearchParams)(),h=(0,l.useRouter)(),{formatPrice:p,symbol:y}=(0,i.U)(),[v,N]=(0,r.useState)("dashboard"),[w,C]=(0,r.useState)("liquidaciones"),[k,D]=(0,r.useState)(null),[E,S]=(0,r.useState)([]),[A,P]=(0,r.useState)(null),[I,L]=(0,r.useState)(null),[z,M]=(0,r.useState)([]),[B,R]=(0,r.useState)(null),[O,F]=(0,r.useState)({kycCompleted:!1,needsKyc:!1,applicationStatus:"PENDING"}),[H,U]=(0,r.useState)({forecasts:!0,affiliate:!1}),[V,q]=(0,r.useState)(!0),[_,Z]=(0,r.useState)(!1),[W,$]=(0,r.useState)(null),[Y,K]=(0,r.useState)(!1),[J,X]=(0,r.useState)({title:"",description:"",priceCents:"",billingType:"ONE_TIME",subscriptionInterval:"MONTHLY",telegramChannelId:"",active:!0}),[Q,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(""),[ea,er]=(0,r.useState)([]),[en,ei]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)(!1),[ed,ex]=(0,r.useState)(""),[em,eu]=(0,r.useState)("title"),[eg,eh]=(0,r.useState)(""),[ep,eb]=(0,r.useState)(!1),[ej,ey]=(0,r.useState)(""),[ef,ev]=(0,r.useState)(null),[eN,ew]=(0,r.useState)(""),[eC,ek]=(0,r.useState)({channelId:"",channelTitle:"",channelType:"private",inviteLink:""}),[eD,eE]=(0,r.useState)(!1),[eS,eA]=(0,r.useState)(null),[eT,eP]=(0,r.useState)(!1),[eI,eL]=(0,r.useState)(null),[ez,eM]=(0,r.useState)(!1),[eB,eR]=(0,r.useState)(!1),[eO,eF]=(0,r.useState)(""),[eH,eU]=(0,r.useState)(""),[eV,eq]=(0,r.useState)(null),[e_,eZ]=(0,r.useState)(""),[eW,e$]=(0,r.useState)(!1),[eY,eG]=(0,r.useState)({configured:!1,pending:!1,channelId:null,channelTitle:null,channelUsername:null}),[eK,eJ]=(0,r.useState)(null),[eX,eQ]=(0,r.useState)(""),[e0,e2]=(0,r.useState)(""),[e1,e5]=(0,r.useState)(!1),[e4,e3]=(0,r.useState)(""),[e6,e7]=(0,r.useState)(null),[e8,e9]=(0,r.useState)([]),[te,tt]=(0,r.useState)(!1),[ts,ta]=(0,r.useState)(!1),[tr,tl]=(0,r.useState)(null),[tn,ti]=(0,r.useState)({subject:"",message:""}),[tc,to]=(0,r.useState)(""),[td,tx]=(0,r.useState)(!1),[tm,tu]=(0,r.useState)([]),[tg,th]=(0,r.useState)(!1),[tp,tb]=(0,r.useState)(!1),[tj,ty]=(0,r.useState)(null),[tf,tv]=(0,r.useState)(!1),[tN,tw]=(0,r.useState)(1),[tC,tk]=(0,r.useState)(!1),[tD,tE]=(0,r.useState)("idle"),[tS,tA]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=g.get("telegram_link");if(e&&"idle"===tD){N("telegram");let t=async()=>{tE("linking"),tA("Vinculando tu cuenta de Telegram...");try{let t=await n.$z.auth.connectWithCode(e);if(t.data.success){tE("success");let e=t.data.autoConnectedChannels||0;tA(e>0?"\xa1Telegram vinculado! Se conectaron ".concat(e," canal(es) autom\xe1ticamente."):"\xa1Telegram vinculado correctamente!");try{let e=await n.$z.auth.getStatus();ev(e.data);let t=await n.$z.channels.getAll();er(t.data.channels||[])}catch(e){console.error("Error refreshing after auto-link:",e)}window.history.replaceState({},"","/dashboard/tipster?view=telegram")}else tE("error"),tA("Error al vincular. El c\xf3digo puede haber expirado.")}catch(e){var t,s;tE("error"),tA((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error al vincular. El c\xf3digo puede haber expirado.")}};localStorage.getItem("access_token")&&t()}},[g,tD]),(0,r.useEffect)(()=>{(async()=>{if(await new Promise(e=>setTimeout(e,50)),!localStorage.getItem("access_token")){h.push("/login");return}tT()})()},[]);let tT=async()=>{try{try{let e=await n.g8.getMe();D(e.data),console.log("Loaded user profile:",e.data)}catch(e){console.error("Error loading user profile:",e)}try{let e=await n.fi.getMy();S(e.data)}catch(e){console.error("Error loading products:",e)}try{let e=await n.Q4.getMetrics();P(e.data)}catch(e){console.error("Error loading metrics:",e),P({clicks:0,registers:0,ftds:0,deposits:0,totalDeposits:0,conversionRate:0})}try{let e=await n.$z.channels.getAll();er(e.data.channels||[])}catch(e){console.error("Error loading Telegram channels:",e)}try{let e=await n.$z.auth.getStatus();ev(e.data)}catch(e){console.error("Error loading Telegram auth status:",e)}try{let e=await n.$z.getChannelInfo();e.data.connected&&(eM(!0),eL(e.data.channel)),e.data.premiumChannelLink&&eZ(e.data.premiumChannelLink)}catch(e){console.error("Error loading Telegram info:",e)}try{let e=await n.$z.publicationChannel.get();console.log("Loaded publication channel:",e.data),eG(e.data)}catch(e){console.error("Error loading publication channel:",e)}try{let e=await n.kn.getMyStats();L(e.data)}catch(e){console.error("Error loading sales stats:",e),L({totalSales:0,totalEarningsCents:0,currency:"EUR"})}try{let e=await n.kn.getMySales();M(e.data.slice(0,10))}catch(e){console.error("Error loading recent sales:",e),M([])}try{let e=await n.lY.getAll();R(e.data)}catch(e){console.error("Error loading settlements:",e)}try{let e=await n.wT.getMyModules();e.data.modules&&U(e.data.modules)}catch(e){console.error("Error loading modules:",e)}try{let e=await n.bs.getKycStatus();F(e.data),console.log("Loaded KYC status:",e.data)}catch(e){console.error("Error loading KYC status:",e)}}catch(e){console.error("Error loading dashboard:",e)}finally{q(!1)}},tP=async()=>{try{let e=await n.bs.getKycStatus();F(e.data),N("dashboard")}catch(e){console.error("Error reloading KYC status:",e)}},tI=async()=>{tt(!0);try{let e=await fetch("".concat("https://telelink-7.preview.emergentagent.com/api","/tickets/my"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}),t=await e.json();e9(t.tickets||[])}catch(e){console.error("Error loading tickets:",e)}finally{tt(!1)}},tL=async()=>{if(tn.subject.trim()&&tn.message.trim()){tx(!0);try{let e=[];if(tm.length>0){let t=new FormData;tm.forEach(e=>{t.append("files",e)});try{let s=await fetch("".concat("https://telelink-7.preview.emergentagent.com/api","/upload/tickets"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:t});s.ok&&(e=(await s.json()).urls||[])}catch(e){console.error("Error uploading attachments:",e)}}(await fetch("".concat("https://telelink-7.preview.emergentagent.com/api","/tickets"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({...tn,attachments:e})})).ok&&(ti({subject:"",message:""}),tu([]),ta(!1),await tI(),alert("✅ Ticket creado exitosamente"))}catch(e){console.error("Error creating ticket:",e),alert("Error al crear el ticket")}finally{tx(!1)}}},tz=async()=>{if(tr&&tc.trim()){tx(!0);try{await fetch("".concat("https://telelink-7.preview.emergentagent.com/api","/tickets/").concat(tr.id,"/reply"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({message:tc})}),to(""),await tI();let e=e8.find(e=>e.id===tr.id);e&&tl(e)}catch(e){console.error("Error replying to ticket:",e)}finally{tx(!1)}}};(0,r.useEffect)(()=>{"support"===v&&tI()},[v]);let tM=async()=>{try{await n.iJ.logout(),localStorage.removeItem("access_token"),h.push("/")}catch(e){console.error("Error logging out:",e),localStorage.removeItem("access_token"),h.push("/")}},tB=async()=>{if(!ed.trim()){ey("Por favor, ingresa el nombre del canal");return}eb(!0),ey("");try{let e=await n.$z.channels.connectByName(ed.trim(),eg.trim()||void 0);if(e.data.success){let e=await n.$z.channels.getAll();er(e.data.channels||[]),eo(!1),ex(""),eh(""),alert("✅ Canal conectado correctamente")}else ey(e.data.message||"No se encontr\xf3 el canal. Verifica que el bot sea administrador y el nombre sea correcto.")}catch(s){var e,t;ey((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al conectar el canal. Verifica el nombre.")}finally{eb(!1)}},tR=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas desconectar este canal?"))try{await n.$z.channels.delete(e),er(t=>t.filter(t=>t.id!==e)),alert("Canal desconectado")}catch(e){var t,s;alert("Error al desconectar el canal: "+((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error desconocido"))}},tO=async e=>{try{let t=await n.$z.channels.generateInviteLink(e);if(t.data.success){let e=await n.$z.channels.getAll();er(e.data.channels||[]),alert("✅ Enlace de invitaci\xf3n generado: "+t.data.inviteLink)}else alert("Error: "+(t.data.error||"No se pudo generar el enlace"))}catch(e){var t,s;alert("Error: "+((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error al generar enlace"))}},tF=async e=>{try{let t=await n.$z.auth.connect(e);if(t.data.success){let e=await n.$z.auth.getStatus();ev(e.data);let s=await n.$z.channels.getAll();return er(s.data.channels||[]),{success:!0,autoConnectedChannels:t.data.autoConnectedChannels}}return{success:!1}}catch(e){return console.error("Error connecting Telegram:",e),{success:!1}}},tH=async()=>{if(confirm("\xbfDeseas desvincular tu cuenta de Telegram?"))try{await n.$z.auth.disconnect(),ev({isConnected:!1,availableChannels:[]})}catch(e){console.error("Error disconnecting Telegram:",e),alert("Error al desvincular Telegram")}},tU=async e=>{try{let t=await n.$z.auth.autoConnectChannel(e);if(t.data.success){let e=await n.$z.channels.getAll();er(e.data.channels||[]);let s=await n.$z.auth.getStatus();return ev(s.data),{success:!0,channel:t.data.channel}}return{success:!1,error:t.data.message}}catch(e){var t,s;return console.error("Error auto-connecting channel:",e),{success:!1,error:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error al conectar el canal"}}},tV=async()=>{try{let e=await n.$z.auth.getStatus();ev(e.data);let t=await n.$z.channels.getAll();er(t.data.channels||[])}catch(e){console.error("Error refreshing Telegram status:",e)}},tq=async e=>{try{let t=await n.$z.auth.connectWithCode(e);if(t.data.success){let e=await n.$z.auth.getStatus();ev(e.data);let s=await n.$z.channels.getAll();return er(s.data.channels||[]),{success:!0,autoConnectedChannels:t.data.autoConnectedChannels}}return{success:!1}}catch(e){throw console.error("Error connecting with code:",e),e}},t_=async()=>{if(tj){tb(!1),eq(tj.id);try{let e=await n.$z.publishProduct(tj.id);console.log("Publish response:",e.data),e.data.success?alert("✅ \xa1Publicado! Tu producto ya est\xe1 en tu canal de Telegram"):alert("❌ "+(e.data.message||"Error al publicar"))}catch(s){var e,t;console.error("Publish error:",s),alert("❌ Error: "+((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al publicar en Telegram"))}finally{eq(null),ty(null)}}},tZ=()=>{tb(!1),ty(null)};(0,r.useEffect)(()=>()=>{e6&&clearInterval(e6)},[e6]);let tW=()=>{$(null),X({title:"",description:"",priceCents:"",billingType:"ONE_TIME",subscriptionInterval:"MONTHLY",telegramChannelId:"",active:!0}),es(""),Z(!0)},t$=e=>{var t;$(e),X({title:e.title||"",description:e.description||"",priceCents:e.priceCents?(e.priceCents/100).toString():"",billingType:e.billingType||"ONE_TIME",subscriptionInterval:e.billingPeriod||"MONTHLY",telegramChannelId:e.telegramChannelId||"",active:null===(t=e.active)||void 0===t||t}),es(""),Z(!0)},tY=e=>{$(e),K(!0)},tG=async()=>{var e,t,s;try{if(!J.title.trim()){es("El t\xedtulo es obligatorio");return}let t=parseFloat(J.priceCents);if(isNaN(t)||t<0){es("El precio debe ser un n\xfamero v\xe1lido mayor o igual a 0");return}ee(!0),es("");let s={title:J.title.trim(),description:J.description.trim()||void 0,priceCents:Math.round(100*t),billingType:J.billingType,billingPeriod:"SUBSCRIPTION"===J.billingType?J.subscriptionInterval:void 0,telegramChannelId:J.telegramChannelId||void 0,currency:"EUR"};if(W)await n.fi.update(W.id,s),J.active!==W.active&&(J.active?await n.fi.publish(W.id):await n.fi.pause(W.id));else{let t=await n.fi.create(s);J.active&&(null===(e=t.data)||void 0===e?void 0:e.id)&&await n.fi.publish(t.data.id)}await tT(),tK()}catch(e){console.error("Error saving product:",e),es((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error al guardar el producto. Por favor, intenta de nuevo.")}finally{ee(!1)}},tK=()=>{Z(!1),K(!1),$(null),es("")},tJ=e=>{let t=ea.find(t=>t.channelId===e);return t?t.channelTitle:e};return V?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("aside",{className:"fixed top-0 left-0 w-64 h-full bg-white border-r border-gray-100",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Antia"}),(0,a.jsx)("div",{className:"mb-6 pb-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null==k?void 0:null===(e=k.tipsterProfile)||void 0===e?void 0:e.publicName)||(null==k?void 0:k.email)||"Cargando..."}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["#",(null==k?void 0:null===(s=k.tipsterProfile)||void 0===s?void 0:null===(t=s.id)||void 0===t?void 0:t.slice(-4))||"----"]})]})]})}),(0,a.jsxs)("nav",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>N("dashboard"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ".concat("dashboard"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Inicio"]}),H.forecasts&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>N("products"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ".concat("products"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Crear producto"]}),(0,a.jsxs)("button",{onClick:()=>N("telegram"),className:"w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm ".concat("telegram"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Telegram"]}),ea.length>0&&(0,a.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:ea.length})]})]}),H.affiliate&&(0,a.jsxs)("button",{onClick:()=>N("referrals"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ".concat("referrals"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Campa\xf1as"]}),(0,a.jsxs)("button",{onClick:()=>N("payouts"),className:"w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm ".concat("payouts"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Liquidaciones"]}),((null==I?void 0:I.netEarningsCents)||0)>0&&(0,a.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:p((null==I?void 0:I.netEarningsCents)||0)})]}),O.needsKyc&&(0,a.jsxs)("button",{onClick:()=>N("kyc"),className:"w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm ".concat("kyc"===v?"bg-orange-50 text-orange-600 font-medium":"text-orange-500 hover:bg-orange-50"),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Datos de Cobro"]}),(0,a.jsx)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full",children:"Pendiente"})]}),(0,a.jsxs)("button",{onClick:()=>N("profile"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ".concat("profile"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Perfil"]}),(0,a.jsxs)("button",{onClick:()=>N("support"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ".concat("support"===v?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Soporte"]}),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:tM,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-gray-600 hover:bg-gray-50",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Cerrar Sesi\xf3n"]})})]})]})}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:[(0,a.jsxs)("div",{className:"fixed top-4 right-8 z-50 flex items-center gap-3",children:[(0,a.jsx)(G,{}),(0,a.jsx)(j.Z,{variant:"pill"})]}),O.needsKyc&&"kyc"!==v&&(0,a.jsx)(f,{onComplete:()=>N("kyc")}),"kyc"===v&&(0,a.jsx)(T,{onComplete:tP,onCancel:()=>N("dashboard"),initialData:O.kycData}),"dashboard"===v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Hola ",(null==k?void 0:null===(o=k.tipsterProfile)||void 0===o?void 0:null===(c=o.publicName)||void 0===c?void 0:c.split(" ")[0])||"Tipster"]}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Bienvenido de nuevo!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-8",children:[H.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Afiliados"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==A?void 0:A.ftds)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"12%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Clicks \xdanicos"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==A?void 0:A.uniqueClicks)||(null==I?void 0:I.uniqueVisitors)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"8%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Clicks Totales"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==A?void 0:A.clicks)||(null==I?void 0:I.totalVisits)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-red-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"3%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),H.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Campa\xf1as activas"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==A?void 0:A.campaigns)||E.filter(e=>e.active).length||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"5%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 mb-8",children:[H.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Campa\xf1as mas populares"}),(0,a.jsxs)("div",{className:"space-y-4",children:[E.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.title}),(0,a.jsxs)("span",{className:"text-gray-400",children:[Math.round(85-15*t),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(85-15*t,"%")}})})]},e.id)),0===E.length&&(0,a.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"Sin campa\xf1as"})]})]}),H.forecasts&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"AntiaPay"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ingresos Brutos"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:p((null==I?void 0:I.grossEarningsCents)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ventas"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(null==I?void 0:I.totalSales)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Productos"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:E.length})]})]})]}),H.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Afiliados"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ganancias"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:p((null==A?void 0:A.totalEarnings)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Referidos FTD"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(null==A?void 0:A.ftds)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Pr\xf3xima liquidaci\xf3n"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(()=>{let e=new Date,t=e.getDay(),s=new Date(e);return s.setDate(e.getDate()+((7-t)%7||7)),s.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})()})]})]})]})]}),H.forecasts&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-medium text-gray-900",children:"Mis Productos"}),(0,a.jsx)("button",{onClick:tW,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm",children:"+ Crear Producto"})]}),(0,a.jsx)("div",{className:"p-6",children:0===E.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No tienes productos a\xfan"}),(0,a.jsx)("button",{onClick:tW,className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Crear tu primer producto"})]}):(0,a.jsx)("div",{className:"space-y-4",children:E.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:p(e.priceCents)}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"),children:e.active?"Activo":"Pausado"}),e.telegramChannelId&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-blue-50 text-blue-700",children:["\uD83D\uDCF1 ",tJ(e.telegramChannelId)]})]})]}),(0,a.jsx)("button",{onClick:()=>tY(e),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Ver"})]},e.id))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Ventas Recientes"})}),(0,a.jsx)("div",{className:"p-6",children:0===z.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No hay ventas a\xfan"})}):(0,a.jsx)("div",{className:"space-y-4",children:z.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.productTitle||"Producto"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.emailBackup||"Cliente"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-green-600",children:p(e.amountCents||0)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]},e.id))})})]})]}),H.affiliate&&!H.forecasts&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83E\uDD1D Resumen de Afiliaci\xf3n"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Clics"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==A?void 0:A.clicks)||0})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Registros"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==A?void 0:A.registers)||0})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"FTDs"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==A?void 0:A.ftds)||0})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:()=>N("referrals"),className:"text-purple-600 hover:underline",children:"Ver detalle de afiliaci\xf3n →"})})]})]})]}),"products"===v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Productos"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona tus pron\xf3sticos y suscripciones"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Lista de Productos"}),(0,a.jsx)("button",{onClick:tW,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium",children:"+ Crear Producto"})]})}),(0,a.jsx)("div",{className:"p-6",children:0===E.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No tienes productos a\xfan"}),(0,a.jsx)("button",{onClick:tW,className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Crear tu primer producto"})]}):(0,a.jsx)("div",{className:"space-y-4",children:E.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["€",(e.priceCents/100).toFixed(2)]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"),children:e.active?"Activo":"Pausado"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"SUBSCRIPTION"===e.billingType?"Suscripci\xf3n":"Pago \xfanico"}),e.telegramChannelId&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-blue-50 text-blue-700",children:["\uD83D\uDCF1 ",tJ(e.telegramChannelId)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let t="".concat(window.location.origin,"/checkout/").concat(e.id),s="\uD83D\uDD25 ".concat(e.title,"\n\n").concat(e.description||"","\n\n\uD83D\uDCB0 Precio: €").concat((e.priceCents/100).toFixed(2),"\n\n\uD83D\uDC49 Comprar aqu\xed: ").concat(t);navigator.clipboard.writeText(s),alert("✅ Texto copiado al portapapeles!\n\nP\xe9galo en tu canal de Telegram, Instagram, o donde quieras.")},className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm flex items-center gap-2 hover:bg-green-700",title:"Copiar link de checkout con texto sugerido",children:"\uD83D\uDCCB Copiar Link"}),(0,a.jsx)("button",{onClick:()=>t$(e),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>tY(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Ver"})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium mb-1",children:"\uD83D\uDCB3 Link de Pago Directo (para tu canal)"}),(0,a.jsxs)("code",{className:"text-xs text-green-800 bg-white px-2 py-1 rounded border border-green-200 block truncate",children:[window.location.origin,"/checkout/",e.id]})]}),(0,a.jsx)("button",{onClick:()=>{let t=window.location.origin;navigator.clipboard.writeText("".concat(t,"/checkout/").concat(e.id)),alert("✅ Link de checkout copiado")},className:"flex-shrink-0 px-3 py-1.5 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"\uD83D\uDCCB Copiar"})]}),(0,a.jsx)("p",{className:"text-xs text-green-700 mt-2",children:"\uD83D\uDCE2 Publica este link en tu canal. El cliente paga y autom\xe1ticamente recibe acceso via Telegram."})]})]},e.id))})})]})]}),"telegram"===v&&(0,a.jsxs)(a.Fragment,{children:["idle"!==tD&&(0,a.jsxs)("div",{className:"mb-6 p-4 rounded-xl flex items-center gap-3 ".concat("linking"===tD?"bg-blue-50 border border-blue-200":"success"===tD?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:["linking"===tD&&(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"success"===tD&&(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===tD&&(0,a.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,a.jsx)("span",{className:"font-medium ".concat("linking"===tD?"text-blue-700":"success"===tD?"text-green-700":"text-red-700"),children:tS}),"linking"!==tD&&(0,a.jsx)("button",{onClick:()=>tE("idle"),className:"ml-auto text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,a.jsx)(el,{channels:ea.map(e=>({...e,connectionType:e.connectionType})),botUsername:"Antiabetbot",onConnectChannel:tU,onDisconnectChannel:tR,onRefreshLink:async e=>{let t=ea.find(t=>t.channelId===e);return t&&await tO(t.id),""},onTelegramAuth:tF,onTelegramDisconnect:tH,onConnectWithCode:tq,authStatus:ef,loading:en,onRefreshStatus:tV})]}),"referrals"===v&&(0,a.jsx)(b,{}),"payouts"===v&&(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"AntiaPay"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{children:"Liquidaciones"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:(0,a.jsx)("div",{className:"border-b border-gray-100",children:(0,a.jsxs)("nav",{className:"flex",children:[(0,a.jsx)("button",{onClick:()=>C("liquidaciones"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("liquidaciones"===w?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Liquidaciones"}),(0,a.jsx)("button",{onClick:()=>C("facturas"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("facturas"===w?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Facturas"}),(0,a.jsx)("button",{onClick:()=>C("pagos"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("pagos"===w?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Informe de saldo"})]})})}),"liquidaciones"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Cartera"}),(0,a.jsxs)("select",{className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{children:"Todas"}),(0,a.jsx)("option",{children:"Pron\xf3sticos"}),(0,a.jsx)("option",{children:"Afiliaci\xf3n"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"A\xf1o"}),(0,a.jsxs)("select",{className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{children:"2025"}),(0,a.jsx)("option",{children:"2024"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Liquidaciones"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingresos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deducidos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gastos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:(null==B?void 0:null===(d=B.settlements)||void 0===d?void 0:d.length)>0?B.settlements.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.reference||"LIQ-".concat(String(t+1).padStart(4,"0"))}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.date?new Date(e.date).toLocaleDateString("es-ES"):"-"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("PAID"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"PROCESSING"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:"PAID"===e.status?"Pagado":"PENDING"===e.status?"Pendiente":"PROCESSING"===e.status?"En proceso":e.status||"Abandonado"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:p(e.grossAmount||0)}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-right text-red-600",children:["-",p(e.deductions||0)]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-right text-orange-600",children:["-",p(e.expenses||0)]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-right font-semibold text-gray-900",children:p(e.netAmount||0)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{className:"text-gray-400 hover:text-red-600 transition",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})})})]},e.id||t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay liquidaciones procesadas a\xfan"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Tu primera liquidaci\xf3n se procesar\xe1 autom\xe1ticamente"})]})})})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Balance Pendiente"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:p((null==I?void 0:I.netEarningsCents)||0)}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Pr\xf3xima liquidaci\xf3n: ",(()=>{let e=new Date,t=e.getDay(),s=new Date(e);return s.setDate(e.getDate()+((7-t)%7||7)),s.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})()]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Liquidado"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"€0.00"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Hist\xf3rico total"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Comisiones Antia"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:p((null==I?void 0:I.platformFeesCents)||0)}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"10% de las ventas"})]})]})]}),"facturas"===w&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay facturas disponibles"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Las facturas se generan con cada liquidaci\xf3n"})]})})})})]})}),"pagos"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen de Saldo"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"Ingresos Brutos"}),(0,a.jsx)("div",{className:"text-xl font-bold text-blue-700",children:p((null==I?void 0:I.grossEarningsCents)||0)})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-red-600",children:"Comisi\xf3n Pasarela"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-red-700",children:["-",p((null==I?void 0:I.gatewayFeesCents)||0)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-orange-600",children:"Comisi\xf3n Antia"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-orange-700",children:["-",p((null==I?void 0:I.platformFeesCents)||0)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Neto a Recibir"}),(0,a.jsx)("div",{className:"text-xl font-bold text-green-700",children:p((null==I?void 0:I.netEarningsCents)||0)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Historial de Transferencias"})}),(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xe9todo"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase",children:"Importe"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay transferencias registradas"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Las transferencias aparecer\xe1n aqu\xed cuando se procesen"})]})})})})]})]})]})]})]}),"profile"===v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mi Perfil"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configuraci\xf3n de tu cuenta"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Informaci\xf3n Personal"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("input",{type:"text",value:(null==k?void 0:null===(x=k.tipsterProfile)||void 0===x?void 0:x.publicName)||"",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:(null==k?void 0:k.email)||"",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("input",{type:"text",value:(null==k?void 0:k.phone)||"No configurado",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario de Telegram"}),(0,a.jsx)("input",{type:"text",value:(null==k?void 0:null===(m=k.tipsterProfile)||void 0===m?void 0:m.telegramUsername)||"No configurado",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado de la cuenta"}),(0,a.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium ".concat((null==k?void 0:k.status)==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==k?void 0:k.status)==="ACTIVE"?"✓ Activa":null==k?void 0:k.status})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Para modificar tu informaci\xf3n de perfil, contacta con el administrador."})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83C\uDFE6 Datos de Cobro"}),O.kycCompleted?(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"✓ Completo"}):(0,a.jsx)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:"Pendiente"})]}),O.kycCompleted&&O.kycData?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre/Raz\xf3n Social"}),(0,a.jsx)("input",{type:"text",value:O.kycData.legalName||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Documento"}),(0,a.jsx)("input",{type:"text",value:O.kycData.documentType||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero"}),(0,a.jsx)("input",{type:"text",value:O.kycData.documentNumber||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xeds"}),(0,a.jsx)("input",{type:"text",value:O.kycData.country||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de Cobro"}),(0,a.jsx)("input",{type:"text",value:O.kycData.bankAccountType||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("button",{onClick:()=>N("kyc"),className:"w-full px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 font-medium transition",children:"✏️ Modificar Datos de Cobro"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCCB"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Datos no configurados"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"Completa tus datos de cobro para poder recibir tus ganancias"}),(0,a.jsx)("button",{onClick:()=>N("kyc"),className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition",children:"Completar Ahora"})]})]})]})]}),"support"===v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"❓ Soporte"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Centro de ayuda y tickets de soporte"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCDD Nuevo Ticket"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),(0,a.jsx)("input",{type:"text",value:tn.subject,onChange:e=>ti({...tn,subject:e.target.value}),placeholder:"Describe brevemente tu problema",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),(0,a.jsx)("textarea",{value:tn.message,onChange:e=>ti({...tn,message:e.target.value}),placeholder:"Explica tu problema con detalle...",rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjuntar archivos (opcional)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition cursor-pointer",onClick:()=>{var e;return null===(e=document.getElementById("ticket-file-input"))||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{id:"ticket-file-input",type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"hidden",onChange:e=>{let t=Array.from(e.target.files||[]);tu(e=>[...e,...t].slice(0,5))}}),(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCE"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Haz clic para adjuntar capturas o documentos"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"M\xe1x. 5 archivos (im\xe1genes, PDF, DOC)"})]})]}),tm.length>0&&(0,a.jsx)("div",{className:"mt-3 space-y-2",children:tm.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{children:e.type.startsWith("image/")?"\uD83D\uDDBC️":"\uD83D\uDCC4"}),(0,a.jsx)("span",{className:"truncate max-w-[150px]",children:e.name}),(0,a.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),(0,a.jsx)("button",{onClick:()=>tu(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700 text-sm",children:"✕"})]},t))})]}),(0,a.jsx)("button",{onClick:tL,disabled:!tn.subject.trim()||!tn.message.trim()||td,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:td?"Enviando...":"Enviar Ticket"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"❓ Preguntas Frecuentes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfC\xf3mo conecto mi canal de Telegram?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:"Ve a la secci\xf3n Telegram, a\xf1ade @Antiabetbot como admin de tu canal y luego conecta el canal desde el panel."})]}),(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfCu\xe1ndo recibo mis pagos?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:"Las liquidaciones se procesan el d\xeda 28 de cada mes. Aseg\xfarate de tener tus datos de cobro completos."})]}),(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfC\xf3mo creo un producto sin canal?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:'Al crear un producto, selecciona "Sin canal" en la opci\xf3n de canal. Los clientes recibir\xe1n confirmaci\xf3n por email.'})]})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCCB Mis Tickets"})}),te?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Cargando tickets..."})]}):0===e8.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCED"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tienes tickets"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Cuando crees un ticket, aparecer\xe1 aqu\xed"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:e8.map(e=>{var t,s,r;return(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition ".concat((null==tr?void 0:tr.id)===e.id?"bg-blue-50":""),onClick:()=>tl(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.subject}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("OPEN"===e.status?"bg-yellow-100 text-yellow-800":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-800":"RESOLVED"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"OPEN"===e.status?"Abierto":"IN_PROGRESS"===e.status?"En proceso":"RESOLVED"===e.status?"Resuelto":e.status})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:(null===(s=e.messages)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.message)||e.message}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Creado: ",new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(null===(r=e.responses)||void 0===r?void 0:r.length)>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:[e.responses.length+1," mensajes"]})})]})},e.id)})})]}),tr&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mt-6",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:tr.subject}),(0,a.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium mt-1 ".concat("OPEN"===tr.status?"bg-yellow-100 text-yellow-800":"IN_PROGRESS"===tr.status?"bg-blue-100 text-blue-800":"RESOLVED"===tr.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"OPEN"===tr.status?"Abierto":"IN_PROGRESS"===tr.status?"En proceso":"RESOLVED"===tr.status?"Resuelto":tr.status})]}),(0,a.jsx)("button",{onClick:()=>tl(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,a.jsxs)("div",{className:"p-6 max-h-80 overflow-y-auto space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 mr-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDC64 T\xfa"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(tr.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:tr.message})]}),null===(u=tr.responses)||void 0===u?void 0:u.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isAdmin?"bg-blue-50 ml-8":"bg-gray-50 mr-8"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.isAdmin?"text-blue-600":"text-gray-700"),children:e.isAdmin?"\uD83D\uDC64 Soporte Antia":"\uD83D\uDC64 T\xfa"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.message})]},t))]}),"RESOLVED"!==tr.status&&(0,a.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:tc,onChange:e=>to(e.target.value),placeholder:"Escribe tu respuesta...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&tz()}),(0,a.jsx)("button",{onClick:tz,disabled:!tc.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition disabled:opacity-50",children:"Enviar"})]})})]})]})]})]})]}),tp&&tj&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:tZ,children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCF1"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Compartir en Telegram"}),(0,a.jsx)("p",{className:"text-green-100 text-sm",children:"Publicaci\xf3n autom\xe1tica"})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:"\xbfEst\xe1s seguro que quieres compartir este producto en tu canal de Telegram?"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Producto:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:tj.title})]}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl",children:"ℹ️"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Se publicar\xe1 autom\xe1ticamente"})," en tu canal:"]}),(0,a.jsxs)("p",{className:"text-sm text-blue-600 font-medium mt-1",children:[eY.channelTitle," ",eY.channelUsername&&"(".concat(eY.channelUsername,")")]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:tZ,className:"px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700 font-medium transition",children:"Cancelar"}),(0,a.jsxs)("button",{onClick:t_,className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE4"})," S\xed, Publicar Ahora"]})]})]})}),ec&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>eo(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Conectar Canal de Telegram"}),(0,a.jsx)("button",{onClick:()=>{eo(!1),ey(""),ex(""),eh("")},className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCB Requisito previo:"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["A\xf1ade el bot ",(0,a.jsx)("strong",{children:"@Antiabetbot"})," como ",(0,a.jsx)("strong",{children:"administrador"})," de tu canal y env\xeda un mensaje en el canal."]})]}),ej&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 whitespace-pre-line",children:ej})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre del canal ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:ed,onChange:e=>ex(e.target.value),placeholder:"Ej: Pronosticos Futbol",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Escribe el nombre exacto de tu canal (como aparece en Telegram)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Link de invitaci\xf3n ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:eg,onChange:e=>eh(e.target.value),placeholder:"https://t.me/+abc123xyz",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pega el link de invitaci\xf3n de tu canal (sirve para diferenciar canales con el mismo nombre)"})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,a.jsx)("button",{onClick:()=>{eo(!1),ey(""),ex(""),eh("")},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:tB,disabled:ep||!ed.trim()||!eg.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:ep?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Conectando..."]}):"Conectar Canal"})]})]})]})}),_&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:tK,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:W?"Editar Producto":"Crear Nuevo Producto"}),(0,a.jsx)("button",{onClick:tK,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[et&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:et})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T\xedtulo del Producto ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:J.title,onChange:e=>X({...J,title:e.target.value}),placeholder:"Ej: Pron\xf3sticos Premium Mensuales",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{rows:3,value:J.description,onChange:e=>X({...J,description:e.target.value}),placeholder:"Describe tu producto...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Precio (€) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:J.priceCents,onChange:e=>X({...J,priceCents:e.target.value}),placeholder:"29.99",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Facturaci\xf3n"}),(0,a.jsxs)("select",{value:J.billingType,onChange:e=>X({...J,billingType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"ONE_TIME",children:"Pago \xfanico"}),(0,a.jsx)("option",{value:"SUBSCRIPTION",children:"Suscripci\xf3n"})]})]}),"SUBSCRIPTION"===J.billingType&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frecuencia de Cobro"}),(0,a.jsxs)("select",{value:J.subscriptionInterval,onChange:e=>X({...J,subscriptionInterval:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"MONTHLY",children:"Mensual"}),(0,a.jsx)("option",{value:"QUARTERLY",children:"Trimestral (cada 3 meses)"}),(0,a.jsx)("option",{value:"ANNUAL",children:"Anual"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Si el cliente no renueva, perder\xe1 acceso autom\xe1ticamente al canal"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Canal de Telegram ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),0===ea.length?(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-yellow-800 mb-2",children:"⚠️ No tienes canales conectados"}),(0,a.jsx)("p",{className:"text-xs text-yellow-700 mb-3",children:"Debes conectar al menos un canal de Telegram para asignarlo a tus productos."}),(0,a.jsx)("button",{type:"button",onClick:()=>{tK(),N("telegram")},className:"text-sm text-blue-600 hover:underline font-medium",children:"Ir a conectar un canal →"})]}):(0,a.jsxs)("select",{value:J.telegramChannelId,onChange:e=>X({...J,telegramChannelId:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"\uD83D\uDEAB Sin canal (solo confirmaci\xf3n de pago)"}),ea.map(e=>(0,a.jsxs)("option",{value:e.channelId,children:["public"===e.channelType?"\uD83C\uDF10":"\uD83D\uDD12"," ",e.channelTitle,e.channelName&&" (@".concat(e.channelName,")")]},e.id))]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:J.telegramChannelId?"Los clientes recibir\xe1n acceso a este canal despu\xe9s de pagar":"Sin canal: Los clientes solo recibir\xe1n confirmaci\xf3n de pago"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"active",checked:J.active,onChange:e=>X({...J,active:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"active",className:"ml-2 text-sm text-gray-700",children:"Producto activo"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:tK,disabled:Q,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:tG,disabled:Q,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:Q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):W?"Guardar Cambios":"Crear Producto"})]})]})]})}),Y&&W&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:tK,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:W.title}),(0,a.jsx)("button",{onClick:tK,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900",children:W.description||"Sin descripci\xf3n"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Precio"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["€",(W.priceCents/100).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Estado"}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded text-sm font-medium ".concat(W.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"),children:W.active?"Activo":"Pausado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tipo de Facturaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900",children:"SUBSCRIPTION"===W.billingType?"Suscripci\xf3n":"Pago \xfanico"})]}),W.telegramChannelId&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Telegram"}),(0,a.jsxs)("p",{className:"text-gray-900 flex items-center gap-2",children:["\uD83D\uDCF1 ",tJ(W.telegramChannelId),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",W.telegramChannelId,")"]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Estad\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Ventas"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"€0.00"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Ingresos"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Suscriptores"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:tK,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cerrar"}),(0,a.jsx)("button",{onClick:()=>{K(!1),t$(W)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Editar Producto"})]})]})]})})]})}function ei(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:(0,a.jsx)(en,{})})}}},function(e){e.O(0,[464,675,80,971,117,744],function(){return e(e.s=4275)}),_N_E=e.O()}]);