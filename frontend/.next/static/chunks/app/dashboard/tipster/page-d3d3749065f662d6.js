(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{4275:function(e,t,s){Promise.resolve().then(s.bind(s,641))},641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var a=s(7437),r=s(2265),l=s(9376),n=s(1837),i=s(7120),c=s(4766),o=s(875),d=s(525),x=s(9397),m=s(3247),u=s(8335),h=s(5805),g=s(2489),p=s(3113),b=s(7689);let j={ES:{name:"Espa\xf1a",flag:"\uD83C\uDDEA\uD83C\uDDF8"},MX:{name:"M\xe9xico",flag:"\uD83C\uDDF2\uD83C\uDDFD"},AR:{name:"Argentina",flag:"\uD83C\uDDE6\uD83C\uDDF7"},CO:{name:"Colombia",flag:"\uD83C\uDDE8\uD83C\uDDF4"},CL:{name:"Chile",flag:"\uD83C\uDDE8\uD83C\uDDF1"},PE:{name:"Per\xfa",flag:"\uD83C\uDDF5\uD83C\uDDEA"},US:{name:"Estados Unidos",flag:"\uD83C\uDDFA\uD83C\uDDF8"},UK:{name:"Reino Unido",flag:"\uD83C\uDDEC\uD83C\uDDE7"},PT:{name:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},DE:{name:"Alemania",flag:"\uD83C\uDDE9\uD83C\uDDEA"}},f=()=>"";function y(e){let{userName:t="Usuario",userHandle:s="@usuario",userAvatar:l}=e,{formatPrice:y}=(0,i.U)(),[v,N]=(0,r.useState)([]),[w,C]=(0,r.useState)([]),[k,D]=(0,r.useState)(null),[S,E]=(0,r.useState)(!0),[A,P]=(0,r.useState)(!1),[T,L]=(0,r.useState)("campaigns"),[I,M]=(0,r.useState)(null),[B,U]=(0,r.useState)(null),[R,z]=(0,r.useState)({country:"",house:"",search:""}),[O,F]=(0,r.useState)(!1),[H,V]=(0,r.useState)({title:"",description:"",channel:"Telegram",imageUrl:"",countriesEnabled:[],countryConfigs:[]}),[W,_]=(0,r.useState)({}),[q,Z]=(0,r.useState)(""),[G,Y]=(0,r.useState)(!1),K=(0,r.useRef)(null),[J,$]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null),[es,ea]=(0,r.useState)({title:"",description:"",imageUrl:"",countriesEnabled:[],countryConfigs:[]}),[er,el]=(0,r.useState)({}),[en,ei]=(0,r.useState)(""),[ec,eo]=(0,r.useState)(!1),ed=(0,r.useRef)(null),ex=window.location.origin,em=(null==k?void 0:k.stats.totalEarningsEur)||0,eu=(null==k?void 0:k.stats.total)||0,eh=w.reduce((e,t)=>e+t.totalClicks,0);(0,r.useEffect)(()=>{eg()},[]),(0,r.useEffect)(()=>{"affiliates"!==T||k||ep()},[T]);let eg=async()=>{E(!0),M(null);try{let e=await n.Qm.getHousesWithLinks();N(e.data||[]);let t=localStorage.getItem("access_token"),s=await fetch("".concat(f(),"/api/tipster/landings"),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let t=(await s.json()).map(t=>{let s=new Set;t.countryConfigs&&Object.values(t.countryConfigs).forEach(e=>{Array.isArray(e)&&e.forEach(e=>{e.bettingHouseId&&s.add(e.bettingHouseId)})});let a=Array.from(s).map(t=>{var s;let a=null===(s=e.data)||void 0===s?void 0:s.find(e=>e.house.id===t);return a?{id:a.house.id,name:a.house.name,logoUrl:a.house.logoUrl}:null}).filter(Boolean);return{id:t.id,title:t.title||"Campa\xf1a sin t\xedtulo",description:t.description,imageUrl:t.imageUrl,channel:"Telegram",isActive:t.isActive,slug:t.slug,totalClicks:t.totalClicks,totalImpressions:t.totalImpressions,countriesEnabled:t.countriesEnabled||[],countryConfigs:t.countryConfigs||[],createdAt:t.createdAt,bettingHouses:a}});C(t)}}catch(s){var e,t;console.error("Error loading data:",s),M((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al cargar datos")}finally{E(!1)}},ep=async()=>{P(!0);try{let e=localStorage.getItem("access_token"),t=await fetch("".concat(f(),"/api/affiliate/my-referrals"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();D(e)}}catch(e){console.error("Error loading referrals:",e)}finally{P(!1)}},eb=async(e,t)=>{try{await navigator.clipboard.writeText(e),U(t),setTimeout(()=>U(null),2e3)}catch(e){console.error("Error copying:",e)}},ej=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let s=localStorage.getItem("access_token"),a=await fetch("".concat(f(),"/api/tipster/landings/houses/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){let s=await a.json();t?el(t=>({...t,[e]:s})):_(t=>({...t,[e]:s}))}}catch(e){console.error("Error loading houses for country:",e)}},ef=async e=>{H.countriesEnabled.includes(e)?V(t=>({...t,countriesEnabled:t.countriesEnabled.filter(t=>t!==e),countryConfigs:t.countryConfigs.filter(t=>t.country!==e)})):(V(t=>({...t,countriesEnabled:[...t.countriesEnabled,e],countryConfigs:[...t.countryConfigs,{country:e,items:[]}]})),W[e]||await ej(e,!1))},ey=(e,t)=>{V(s=>{let a;let r=s.countryConfigs.find(t=>t.country===e);return r?(a=r.items.some(e=>e.bettingHouseId===t)?r.items.filter(e=>e.bettingHouseId!==t):[...r.items,{bettingHouseId:t,orderIndex:r.items.length}],{...s,countryConfigs:s.countryConfigs.map(t=>t.country===e?{...t,items:a}:t)}):s})},ev=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){Y(!0);try{let e=new FormData;e.append("file",s);let t=localStorage.getItem("access_token"),a=await fetch("".concat(f(),"/api/upload/campaign"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e});if(a.ok){let e=await a.json();V(t=>({...t,imageUrl:e.imageUrl}))}}catch(e){console.error("Error uploading image:",e)}finally{Y(!1)}}},eN=async e=>{es.countriesEnabled.includes(e)?ea(t=>({...t,countriesEnabled:t.countriesEnabled.filter(t=>t!==e),countryConfigs:t.countryConfigs.filter(t=>t.country!==e)})):(ea(t=>({...t,countriesEnabled:[...t.countriesEnabled,e],countryConfigs:[...t.countryConfigs,{country:e,items:[]}]})),er[e]||await ej(e,!0))},ew=(e,t)=>{ea(s=>{let a;let r=s.countryConfigs.find(t=>t.country===e);return r?(a=r.items.some(e=>e.bettingHouseId===t)?r.items.filter(e=>e.bettingHouseId!==t):[...r.items,{bettingHouseId:t,orderIndex:r.items.length}],{...s,countryConfigs:s.countryConfigs.map(t=>t.country===e?{...t,items:a}:t)}):s})},eC=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){eo(!0);try{let e=new FormData;e.append("file",s);let t=localStorage.getItem("access_token"),a=await fetch("".concat(f(),"/api/upload/campaign"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e});if(a.ok){let e=await a.json();ea(t=>({...t,imageUrl:e.imageUrl}))}}catch(e){console.error("Error uploading image:",e)}finally{eo(!1)}}},ek=async e=>{for(let t of(et(e),ea({title:e.title,description:e.description||"",imageUrl:e.imageUrl||"",countriesEnabled:e.countriesEnabled||[],countryConfigs:e.countryConfigs||[]}),el({}),ei(""),X(!0),e.countriesEnabled||[]))await ej(t,!0)},eD=async()=>{if(ee){if(ei(""),!es.title.trim()){ei("El nombre de la campa\xf1a es obligatorio");return}if(0===es.countriesEnabled.length){ei("Selecciona al menos un pa\xeds");return}for(let t of es.countriesEnabled){let s=es.countryConfigs.find(e=>e.country===t);if(!s||0===s.items.length){var e;ei("A\xf1ade al menos una casa de apuestas para ".concat((null===(e=j[t])||void 0===e?void 0:e.name)||t));return}}$(!0);try{let e=localStorage.getItem("access_token"),t=await fetch("".concat(f(),"/api/tipster/landings/").concat(ee.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:es.title,description:es.description||void 0,imageUrl:es.imageUrl||void 0,countriesEnabled:es.countriesEnabled,countryConfigs:es.countryConfigs})});if(!t.ok){let e=await t.json();throw Error(e.message||"Error al guardar")}await eg(),X(!1),et(null)}catch(e){ei(e.message)}finally{$(!1)}}},eS=async()=>{if(Z(""),!H.title.trim()){Z("El nombre de la campa\xf1a es obligatorio");return}if(0===H.countriesEnabled.length){Z("Selecciona al menos un pa\xeds");return}for(let t of H.countriesEnabled){let s=H.countryConfigs.find(e=>e.country===t);if(!s||0===s.items.length){var e;Z("A\xf1ade al menos una casa de apuestas para ".concat((null===(e=j[t])||void 0===e?void 0:e.name)||t));return}}$(!0);try{let e=localStorage.getItem("access_token"),t=await fetch("".concat(f(),"/api/tipster/landings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:H.title,description:H.description||void 0,imageUrl:H.imageUrl||void 0,countriesEnabled:H.countriesEnabled,countryConfigs:H.countryConfigs})});if(!t.ok){let e=await t.json();throw Error(e.message||"Error al crear")}await eg(),F(!1),V({title:"",description:"",channel:"Telegram",imageUrl:"",countriesEnabled:[],countryConfigs:[]}),_({})}catch(e){Z(e.message)}finally{$(!1)}},eE=w.filter(e=>(!R.search||!!e.title.toLowerCase().includes(R.search.toLowerCase()))&&(!R.country||!!e.countriesEnabled.includes(R.country))),eA=v.filter(e=>{var t;return!!((!R.search||e.house.name.toLowerCase().includes(R.search.toLowerCase()))&&(!R.country||(null===(t=e.house.allowedCountries)||void 0===t?void 0:t.includes(R.country))))}),eP=(null==k?void 0:k.referrals.filter(e=>(!R.search||!!e.userName.toLowerCase().includes(R.search.toLowerCase()))&&(!R.country||e.country===R.country)))||[];return S?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"bg-[#f5f7fa] min-h-full",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-8 py-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-[22px] font-semibold text-gray-900",children:["Hola ",t]}),(0,a.jsx)("p",{className:"text-[14px] text-gray-400 mt-0.5",children:"Me alegro de verte de nuevo"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsxs)("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-5 border-l border-gray-200",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:l?(0,a.jsx)("img",{src:l,alt:t,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:t.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-[12px] text-gray-400",children:s})]}),(0,a.jsx)(o.Z,{className:"w-4 h-4 text-gray-400 ml-1"})]})]})]})}),(0,a.jsx)("div",{className:"px-8 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-5",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[13px] text-gray-400 font-medium",children:"Total generado"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-3 mt-2",children:[(0,a.jsx)("span",{className:"text-[28px] font-bold text-gray-900",children:y(em)}),(0,a.jsxs)("span",{className:"text-green-500 text-[12px] font-medium flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3 mr-0.5"}),"+ 6.9%"]})]}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-300 mt-1",children:[y(em)," generado"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[13px] text-gray-400 font-medium",children:"Afiliados"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-3 mt-2",children:[(0,a.jsx)("span",{className:"text-[28px] font-bold text-gray-900",children:eu}),(0,a.jsxs)("span",{className:"text-green-500 text-[12px] font-medium flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3 mr-0.5"}),"+ 6.9%"]})]}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-300 mt-1",children:[eu," Afiliados"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-[13px] text-gray-400 font-medium",children:"Clicks totales"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-3 mt-2",children:[(0,a.jsx)("span",{className:"text-[28px] font-bold text-gray-900",children:eh}),(0,a.jsxs)("span",{className:"text-green-500 text-[12px] font-medium flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3 mr-0.5"}),"+ 6.9%"]})]}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-300 mt-1",children:[eh," Clicks"]})]})]})}),(0,a.jsx)("div",{className:"px-8 pb-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:R.country,onChange:e=>z(t=>({...t,country:e.target.value})),className:"appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-[14px] text-gray-600 focus:outline-none focus:border-blue-500 min-w-[140px]",children:[(0,a.jsx)("option",{value:"",children:"Pais"}),Object.entries(j).map(e=>{let[t,s]=e;return(0,a.jsxs)("option",{value:t,children:[s.flag," ",s.name]},t)})]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative flex-1 max-w-[200px]",children:[(0,a.jsxs)("select",{value:R.house,onChange:e=>z(t=>({...t,house:e.target.value})),className:"appearance-none w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 pr-10 text-[14px] text-gray-600 focus:outline-none focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Casa de afiliaci\xf3n"}),v.map(e=>(0,a.jsx)("option",{value:e.house.id,children:e.house.name},e.house.id))]}),(0,a.jsx)(o.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("button",{onClick:()=>F(!0),className:"ml-auto bg-blue-500 hover:bg-blue-600 text-white px-5 py-2.5 rounded-lg text-[14px] font-medium flex items-center gap-2 transition-colors",children:["Crear Campa\xf1a ",(0,a.jsx)(x.Z,{className:"w-4 h-4"})]})]}),(0,a.jsx)("div",{className:"px-6 pb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar",value:R.search,onChange:e=>z(t=>({...t,search:e.target.value})),className:"w-full pl-11 pr-4 py-2.5 bg-[#f5f7fa] border-0 rounded-lg text-[14px] text-gray-600 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,a.jsxs)("div",{className:"flex px-6 border-b border-gray-100",children:[(0,a.jsx)("button",{onClick:()=>L("campaigns"),className:"px-1 py-4 text-[14px] font-medium border-b-2 -mb-px transition-colors mr-8 ".concat("campaigns"===T?"text-blue-600 border-blue-500":"text-gray-400 border-transparent hover:text-gray-600"),children:"Campa\xf1as activas"}),(0,a.jsx)("button",{onClick:()=>L("houses"),className:"px-1 py-4 text-[14px] font-medium border-b-2 -mb-px transition-colors mr-8 ".concat("houses"===T?"text-blue-600 border-blue-500":"text-gray-400 border-transparent hover:text-gray-600"),children:"Casas de apuestas"}),(0,a.jsx)("button",{onClick:()=>L("affiliates"),className:"px-1 py-4 text-[14px] font-medium border-b-2 -mb-px transition-colors ".concat("affiliates"===T?"text-blue-600 border-blue-500":"text-gray-400 border-transparent hover:text-gray-600"),children:"Afiliados"})]}),(0,a.jsxs)("div",{className:"px-6 py-5",children:["campaigns"===T&&(0,a.jsx)("div",{children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide",children:"Nombre"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[100px]",children:"Pa\xeds"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[100px]",children:"Afiliados"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[100px]",children:"Total"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-blue-500 uppercase tracking-wide w-[120px]",children:"URL"})]})}),(0,a.jsx)("tbody",{children:eE.length>0?eE.map(e=>(0,a.jsxs)("tr",{className:"border-t border-gray-50 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>ek(e),children:[(0,a.jsx)("td",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-[72px] h-[72px] bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl flex items-center justify-center overflow-hidden flex-shrink-0",children:e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}):e.bettingHouses&&e.bettingHouses.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-1 p-2",children:e.bettingHouses.slice(0,2).map(e=>(0,a.jsx)("div",{className:"w-6 h-6 bg-white rounded flex items-center justify-center",children:e.logoUrl?(0,a.jsx)("img",{src:e.logoUrl,alt:e.name,className:"w-5 h-5 object-contain"}):(0,a.jsx)("span",{className:"text-[8px] text-gray-600",children:e.name.slice(0,2)})},e.id))}):(0,a.jsx)("span",{className:"text-white text-sm font-semibold",children:e.title.slice(0,3)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[15px] font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-400 mt-0.5",children:["ID",e.id.slice(-4)]})]})]})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("div",{className:"flex flex-col gap-0.5",children:e.countriesEnabled.slice(0,4).map(e=>{var t;return(0,a.jsx)("span",{className:"text-[18px] leading-tight",children:(null===(t=j[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("span",{className:"text-[15px] font-semibold text-gray-900",children:e.totalImpressions||0})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("span",{className:"text-[15px] font-semibold text-gray-900",children:y(10*e.totalClicks)})}),(0,a.jsx)("td",{className:"py-4",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("button",{onClick:()=>eb("".concat(ex,"/go/").concat(e.slug),e.id),className:"inline-flex items-center gap-2 bg-blue-50 hover:bg-blue-100 text-blue-600 px-4 py-2 rounded-lg text-[13px] font-medium transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),B===e.id?"Copiado!":"Copiar"]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:5,className:"py-16 text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay campa\xf1as activas"}),(0,a.jsx)("button",{onClick:()=>F(!0),className:"mt-4 text-blue-500 hover:text-blue-600 font-medium text-[14px]",children:"Crear primera campa\xf1a"})]})})})]})}),"houses"===T&&(0,a.jsx)("div",{children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide",children:"Casa de apuestas"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[100px]",children:"Paises"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[120px]",children:"Nombre"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[150px]",children:"Tipo de comisi\xf3n"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[150px]",children:"Categor\xeda"})]})}),(0,a.jsx)("tbody",{children:eA.length>0?eA.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-t border-gray-50",children:[(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("div",{className:"w-[100px] h-[50px] bg-[#1a2332] rounded-lg flex items-center justify-center overflow-hidden",children:e.house.logoUrl?(0,a.jsx)("img",{src:e.house.logoUrl,alt:e.house.name,className:"max-w-[90%] max-h-[90%] object-contain"}):(0,a.jsx)("span",{className:"text-white font-bold text-[14px]",children:e.house.name})})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("div",{className:"flex flex-col gap-0.5",children:null===(t=e.house.allowedCountries)||void 0===t?void 0:t.slice(0,4).map(e=>{var t;return(0,a.jsx)("span",{className:"text-[18px] leading-tight",children:(null===(t=j[e])||void 0===t?void 0:t.flag)||"\uD83C\uDFF3️"},e)})})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("span",{className:"text-[14px] text-gray-900",children:e.house.name})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsxs)("span",{className:"text-[14px] text-gray-900",children:["CPA ",y(e.house.commissionPerReferralEur)]})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("span",{className:"text-[14px] text-gray-500",children:e.house.category||"Casa de apuestas"})})]},e.house.id)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-16 text-center text-gray-500",children:"No hay casas de apuestas disponibles"})})})]})}),"affiliates"===T&&(0,a.jsx)("div",{children:A?(0,a.jsx)("div",{className:"text-center py-16",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"})}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide",children:"Nombre"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[180px]",children:"Fecha"}),(0,a.jsx)("th",{className:"text-left py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[150px]",children:"Pais"}),(0,a.jsx)("th",{className:"text-right py-3 text-[13px] font-semibold text-gray-500 uppercase tracking-wide w-[100px]",children:"CPA"})]})}),(0,a.jsx)("tbody",{children:eP.length>0?eP.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"border-t border-gray-50",children:[(0,a.jsx)("td",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-[50px] h-[40px] bg-[#1a2332] rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:e.houseLogoUrl?(0,a.jsx)("img",{src:e.houseLogoUrl,alt:e.houseName,className:"max-w-[90%] max-h-[90%] object-contain"}):(0,a.jsx)("span",{className:"text-white font-bold text-[11px]",children:e.houseName.slice(0,3)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[14px] font-medium text-gray-900",children:e.userName}),(0,a.jsx)("p",{className:"text-[12px] text-gray-400",children:e.campaignName||e.houseName})]})]})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsx)("span",{className:"text-[14px] text-gray-900",children:e.convertedAt?new Date(e.convertedAt).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"-"})}),(0,a.jsx)("td",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[20px]",children:(null===(t=j[e.country])||void 0===t?void 0:t.flag)||"\uD83C\uDF0D"}),(0,a.jsx)("span",{className:"text-[14px] text-gray-900",children:(null===(s=j[e.country])||void 0===s?void 0:s.name)||e.country})]})}),(0,a.jsx)("td",{className:"py-4 text-right",children:(0,a.jsxs)("span",{className:"text-[15px] font-semibold ".concat("APPROVED"===e.status?"text-gray-900":"text-gray-400"),children:[Math.round(e.commissionEur),"€"]})})]},e.id)}):(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:4,className:"py-16 text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No tienes afiliados registrados"})]})})})]})})]})]})}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-[18px] font-semibold text-gray-900",children:"Nueva Campa\xf1a"}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-gray-500"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-5",children:[q&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-[13px]",children:q}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Nombre de la campa\xf1a"}),(0,a.jsx)("input",{type:"text",value:H.title,onChange:e=>V(t=>({...t,title:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mi campa\xf1a"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Descripci\xf3n (opcional)"}),(0,a.jsx)("textarea",{value:H.description,onChange:e=>V(t=>({...t,description:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripci\xf3n de la campa\xf1a"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Imagen de portada"}),(0,a.jsx)("input",{ref:K,type:"file",accept:"image/*",onChange:ev,className:"hidden"}),H.imageUrl?(0,a.jsxs)("div",{className:"relative w-32 h-24 rounded-lg overflow-hidden",children:[(0,a.jsx)("img",{src:H.imageUrl,alt:"Cover",className:"w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:()=>V(e=>({...e,imageUrl:""})),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:(0,a.jsx)(g.Z,{className:"w-3 h-3"})})]}):(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=K.current)||void 0===e?void 0:e.click()},disabled:G,className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-200 rounded-lg text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-colors text-[13px]",children:G?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Subir imagen"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Seleccionar pa\xedses"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(j).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{onClick:()=>ef(t),className:"px-3 py-1.5 rounded-full text-[13px] flex items-center gap-1.5 transition-colors ".concat(H.countriesEnabled.includes(t)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.flag," ",s.name]},t)})})]}),H.countriesEnabled.map(e=>{var t,s,r;let l=W[e]||[],n=(null===(t=H.countryConfigs.find(t=>t.country===e))||void 0===t?void 0:t.items.map(e=>e.bettingHouseId))||[];return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 text-[14px]",children:[null===(s=j[e])||void 0===s?void 0:s.flag," ",null===(r=j[e])||void 0===r?void 0:r.name]}),l.length>0?(0,a.jsx)("div",{className:"space-y-2",children:l.map(t=>(0,a.jsxs)("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.includes(t.id),onChange:()=>ey(e,t.id),className:"w-4 h-4 text-blue-500 rounded"}),(0,a.jsx)("div",{className:"w-10 h-8 bg-[#1a2332] rounded flex items-center justify-center",children:t.logoUrl?(0,a.jsx)("img",{src:t.logoUrl,alt:t.name,className:"max-w-[90%] max-h-[90%] object-contain"}):(0,a.jsx)("span",{className:"text-white text-[10px]",children:t.name.slice(0,2)})}),(0,a.jsx)("span",{className:"text-[13px] text-gray-900",children:t.name})]},t.id))}):(0,a.jsx)("p",{className:"text-[13px] text-gray-500 italic",children:"Cargando..."})]},e)})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50 text-[14px] font-medium",children:"Cancelar"}),(0,a.jsx)("button",{onClick:eS,disabled:J,className:"flex-1 px-4 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 text-[14px] font-medium",children:J?"Creando...":"Crear Campa\xf1a"})]})]})}),Q&&ee&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-[18px] font-semibold text-gray-900",children:"Editar Campa\xf1a"}),(0,a.jsx)("button",{onClick:()=>X(!1),className:"p-1 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-gray-500"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-5",children:[en&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-[13px]",children:en}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Nombre de la campa\xf1a"}),(0,a.jsx)("input",{type:"text",value:es.title,onChange:e=>ea(t=>({...t,title:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:es.description,onChange:e=>ea(t=>({...t,description:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Imagen de portada"}),(0,a.jsx)("input",{ref:ed,type:"file",accept:"image/*",onChange:eC,className:"hidden"}),es.imageUrl?(0,a.jsxs)("div",{className:"relative w-32 h-24 rounded-lg overflow-hidden",children:[(0,a.jsx)("img",{src:es.imageUrl,alt:"Cover",className:"w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:()=>ea(e=>({...e,imageUrl:""})),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:(0,a.jsx)(g.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=ed.current)||void 0===e?void 0:e.click()},className:"absolute bottom-1 right-1 bg-blue-500 text-white rounded-full p-1",children:(0,a.jsx)(b.Z,{className:"w-3 h-3"})})]}):(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=ed.current)||void 0===e?void 0:e.click()},disabled:ec,className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-200 rounded-lg text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-colors text-[13px]",children:ec?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Subir imagen"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[13px] font-medium text-gray-700 mb-2",children:"Seleccionar pa\xedses"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(j).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{onClick:()=>eN(t),className:"px-3 py-1.5 rounded-full text-[13px] flex items-center gap-1.5 transition-colors ".concat(es.countriesEnabled.includes(t)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.flag," ",s.name]},t)})})]}),es.countriesEnabled.map(e=>{var t,s,r;let l=er[e]||[],n=(null===(t=es.countryConfigs.find(t=>t.country===e))||void 0===t?void 0:t.items.map(e=>e.bettingHouseId))||[];return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 text-[14px]",children:[null===(s=j[e])||void 0===s?void 0:s.flag," ",null===(r=j[e])||void 0===r?void 0:r.name]}),l.length>0?(0,a.jsx)("div",{className:"space-y-2",children:l.map(t=>(0,a.jsxs)("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.includes(t.id),onChange:()=>ew(e,t.id),className:"w-4 h-4 text-blue-500 rounded"}),(0,a.jsx)("div",{className:"w-10 h-8 bg-[#1a2332] rounded flex items-center justify-center",children:t.logoUrl?(0,a.jsx)("img",{src:t.logoUrl,alt:t.name,className:"max-w-[90%] max-h-[90%] object-contain"}):(0,a.jsx)("span",{className:"text-white text-[10px]",children:t.name.slice(0,2)})}),(0,a.jsx)("span",{className:"text-[13px] text-gray-900",children:t.name})]},t.id))}):(0,a.jsx)("p",{className:"text-[13px] text-gray-500 italic",children:"Cargando..."})]},e)})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>X(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50 text-[14px] font-medium",children:"Cancelar"}),(0,a.jsx)("button",{onClick:eD,disabled:J,className:"flex-1 px-4 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 text-[14px] font-medium",children:J?"Guardando...":"Guardar Cambios"})]})]})})]})}var v=s(4646),N=s(3639);function w(e){let{onComplete:t}=e;return(0,a.jsx)("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 mb-6 rounded-r-lg",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(N.Z,{className:"h-5 w-5 text-orange-400"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-orange-800",children:"\xa1Completa tus datos de cobro!"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-orange-700",children:(0,a.jsx)("p",{children:"Para poder recibir tus ganancias, necesitas completar tus datos bancarios/KYC. Esto solo te llevar\xe1 unos minutos."})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"-mx-2 -my-1.5 flex",children:(0,a.jsx)("button",{onClick:t,className:"bg-orange-100 px-4 py-2 rounded-md text-sm font-medium text-orange-800 hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-orange-50 focus:ring-orange-600 transition",children:"Completar ahora →"})})})]})]})})}var C=s(5302),k=s(2369),D=s(3774),S=s(8226),E=s(8736),A=s(5863);let P=[{value:"DNI",label:"DNI (Espa\xf1a)"},{value:"NIE",label:"NIE (Extranjero en Espa\xf1a)"},{value:"PASSPORT",label:"Pasaporte"},{value:"CIF",label:"CIF (Empresa)"}],T=[{value:"IBAN",label:"Transferencia Bancaria (IBAN)"},{value:"PAYPAL",label:"PayPal"},{value:"CRYPTO",label:"Criptomonedas (USDT)"},{value:"OTHER",label:"Otro"}],L=["Espa\xf1a","M\xe9xico","Argentina","Colombia","Chile","Per\xfa","Ecuador","Venezuela","Uruguay","Paraguay","Bolivia","Costa Rica","Panam\xe1","Guatemala","Honduras","El Salvador","Nicaragua","Rep\xfablica Dominicana","Puerto Rico","Cuba","Otro"];function I(e){let{onComplete:t,onCancel:s,initialData:l}=e,[i,c]=(0,r.useState)({legalName:(null==l?void 0:l.legalName)||"",documentType:(null==l?void 0:l.documentType)||"DNI",documentNumber:"",country:(null==l?void 0:l.country)||"Espa\xf1a",bankAccountType:(null==l?void 0:l.bankAccountType)||"IBAN",bankAccountDetails:{iban:"",bankName:"",paypalEmail:"",cryptoAddress:"",cryptoNetwork:"TRC20",otherDetails:""}}),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),g=async e=>{if(e.preventDefault(),m(""),d(!0),!i.legalName.trim()){m("El nombre o raz\xf3n social es obligatorio"),d(!1);return}if(!i.documentNumber.trim()){m("El n\xfamero de documento es obligatorio"),d(!1);return}if("IBAN"===i.bankAccountType&&!i.bankAccountDetails.iban.trim()){m("El IBAN es obligatorio"),d(!1);return}if("PAYPAL"===i.bankAccountType&&!i.bankAccountDetails.paypalEmail.trim()){m("El email de PayPal es obligatorio"),d(!1);return}if("CRYPTO"===i.bankAccountType&&!i.bankAccountDetails.cryptoAddress.trim()){m("La direcci\xf3n de wallet es obligatoria"),d(!1);return}try{let e={};switch(i.bankAccountType){case"IBAN":e={iban:i.bankAccountDetails.iban.replace(/\s/g,"").toUpperCase(),bankName:i.bankAccountDetails.bankName};break;case"PAYPAL":e={email:i.bankAccountDetails.paypalEmail};break;case"CRYPTO":e={address:i.bankAccountDetails.cryptoAddress,network:i.bankAccountDetails.cryptoNetwork};break;case"OTHER":e={details:i.bankAccountDetails.otherDetails}}await n.bs.updateKyc({legalName:i.legalName.trim(),documentType:i.documentType,documentNumber:i.documentNumber.trim(),country:i.country,bankAccountType:i.bankAccountType,bankAccountDetails:e}),h(!0),setTimeout(()=>{t()},2e3)}catch(e){var s,a;m((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Error al guardar los datos")}finally{d(!1)}};return u?(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(C.Z,{className:"w-8 h-8 text-green-500"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\xa1Datos guardados!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Tus datos de cobro han sido registrados correctamente."})]})}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Datos de Cobro (KYC)"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Completa tus datos para poder recibir tus ganancias"})]}),(0,a.jsxs)("form",{onSubmit:g,className:"bg-white rounded-xl shadow-lg p-8",children:[x&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm mb-6",children:x}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Informaci\xf3n Personal / Fiscal"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo / Raz\xf3n Social *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Juan P\xe9rez Garc\xeda o Mi Empresa S.L.",value:i.legalName,onChange:e=>c({...i,legalName:e.target.value})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Nombre tal como aparece en tu documento de identidad"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Documento *"}),(0,a.jsx)("select",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.documentType,onChange:e=>c({...i,documentType:e.target.value}),children:P.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xfamero de Documento *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345678A",value:i.documentNumber,onChange:e=>c({...i,documentNumber:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 inline mr-1"}),"Pa\xeds de Residencia Fiscal *"]}),(0,a.jsx)("select",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.country,onChange:e=>c({...i,country:e.target.value}),children:L.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"M\xe9todo de Cobro"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xbfC\xf3mo quieres recibir tus pagos? *"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:T.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>c({...i,bankAccountType:e.value}),className:"p-3 rounded-lg border-2 transition text-left ".concat(i.bankAccountType===e.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)("div",{className:"font-medium text-sm",children:e.label})},e.value))})]}),"IBAN"===i.bankAccountType&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"ES12 3456 7890 1234 5678 9012",value:i.bankAccountDetails.iban,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,iban:e.target.value}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Banco (opcional)"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banco Santander, BBVA, etc.",value:i.bankAccountDetails.bankName,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,bankName:e.target.value}})})]})]}),"PAYPAL"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de PayPal *"}),(0,a.jsx)("input",{type:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"tu@email.com",value:i.bankAccountDetails.paypalEmail,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,paypalEmail:e.target.value}})})]}),"CRYPTO"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Red / Network *"}),(0,a.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i.bankAccountDetails.cryptoNetwork,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,cryptoNetwork:e.target.value}}),children:[(0,a.jsx)("option",{value:"TRC20",children:"USDT (TRC20 - Tron)"}),(0,a.jsx)("option",{value:"ERC20",children:"USDT (ERC20 - Ethereum)"}),(0,a.jsx)("option",{value:"BEP20",children:"USDT (BEP20 - BSC)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci\xf3n de Wallet *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"TXxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",value:i.bankAccountDetails.cryptoAddress,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,cryptoAddress:e.target.value}})})]})]}),"OTHER"===i.bankAccountType&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detalles del m\xe9todo de pago *"}),(0,a.jsx)("textarea",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe c\xf3mo quieres recibir tus pagos...",rows:3,value:i.bankAccountDetails.otherDetails,onChange:e=>c({...i,bankAccountDetails:{...i.bankAccountDetails,otherDetails:e.target.value}})})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(E.Z,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Informaci\xf3n importante"}),(0,a.jsxs)("ul",{className:"mt-1 list-disc list-inside space-y-1 text-blue-700",children:[(0,a.jsx)("li",{children:"Tus datos est\xe1n protegidos y solo se usar\xe1n para procesar tus pagos"}),(0,a.jsx)("li",{children:"Las liquidaciones se procesan los domingos"}),(0,a.jsx)("li",{children:"Podr\xe1s modificar estos datos desde tu perfil"})]})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar Datos"})]})]})]})}var M=s(9196),B=s(7495),U=s(535),R=s(1994),z=s(3335);function O(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,z.m6)((0,R.W)(t))}let F=(0,U.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...i}=e,c=n?B.g7:"button";return(0,a.jsx)(c,{className:O(F({variant:r,size:l,className:s})),ref:t,...i})});H.displayName="Button";var V=s(3732);let W=V.fC,_=V.xz,q=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...n}=e;return(0,a.jsx)(V.h_,{children:(0,a.jsx)(V.VY,{ref:t,align:r,sideOffset:l,className:O("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});q.displayName=V.VY.displayName;var Z=s(6255);let G=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(Z.fC,{ref:t,className:O("relative overflow-hidden",s),...l,children:[(0,a.jsx)(Z.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(Y,{}),(0,a.jsx)(Z.Ns,{})]})});G.displayName=Z.fC.displayName;let Y=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(Z.gb,{ref:t,orientation:r,className:O("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(Z.q4,{className:"relative flex-1 rounded-full bg-border"})})});Y.displayName=Z.gb.displayName;let K=e=>{switch(e){case"SALE":return"Pagos e informes \xb7 Ventas";case"SUBSCRIPTION_NEW":return"Suscripciones \xb7 Nueva";case"SUBSCRIPTION_CANCELLED":return"Suscripciones \xb7 Cancelada";case"SUBSCRIPTION_EXPIRED":return"Suscripciones \xb7 Expirada";case"SETTLEMENT":return"Pagos e informes \xb7 Liquidaci\xf3n";case"PAYOUT":return"Pagos e informes \xb7 Pagos";default:return"General"}},J=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/1e3);return a<60?"ahora":a<3600?"hace ".concat(Math.floor(a/60)," min"):a<86400?"hace ".concat(Math.floor(a/3600)," horas"):a<604800?"hace ".concat(Math.floor(a/86400)," d\xedas"):s.toLocaleDateString("es-ES")};function $(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(0),[i,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)("notificaciones"),h=(0,r.useRef)(null),g=async()=>{try{let[e,s]=await Promise.all([n.hi.get("/notifications?limit=20"),n.hi.get("/notifications/unread-count")]);t(e.data.notifications||[]),l(s.data.count||0)}catch(e){console.error("Error fetching notifications:",e)}},p=async e=>{try{await n.hi.post("/notifications/".concat(e,"/read")),t(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),l(e=>Math.max(0,e-1))}catch(e){console.error("Error marking notification as read:",e)}},b=async()=>{try{x(!0),await n.hi.post("/notifications/read-all"),t(e=>e.map(e=>({...e,is_read:!0}))),l(0)}catch(e){console.error("Error marking all as read:",e)}finally{x(!1)}};(0,r.useEffect)(()=>(g(),h.current=setInterval(g,3e4),()=>{h.current&&clearInterval(h.current)}),[]);let j="principales"===m?e.filter(e=>!e.is_read).slice(0,5):e;return(0,a.jsxs)(W,{open:i,onOpenChange:o,children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsxs)(H,{variant:"ghost",size:"icon",className:"relative","aria-label":"Notificaciones",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),s>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-xs font-medium text-white flex items-center justify-center",children:s>9?"9+":s})]})}),(0,a.jsxs)(q,{className:"w-96 p-0 z-[100]",align:"end",sideOffset:8,children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pt-3",children:[(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("button",{onClick:()=>u("principales"),className:"pb-3 text-sm font-medium border-b-2 transition-colors ".concat("principales"===m?"text-slate-900 border-slate-900":"text-gray-500 border-transparent hover:text-gray-700"),children:"Principales"}),(0,a.jsx)("button",{onClick:()=>u("notificaciones"),className:"pb-3 text-sm font-medium border-b-2 transition-colors ".concat("notificaciones"===m?"text-slate-900 border-slate-900":"text-gray-500 border-transparent hover:text-gray-700"),children:"Notificaciones"})]}),s>0&&(0,a.jsx)("button",{onClick:b,disabled:d,className:"pb-3 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Ver todo"})]})}),(0,a.jsx)(G,{className:"h-[350px]",children:0===j.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[250px] text-gray-500",children:[(0,a.jsx)(c.Z,{className:"h-10 w-10 mb-3 opacity-30"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"No hay notificaciones"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"principales"===m?"No tienes notificaciones importantes":"Cuando tengas actividad aparecer\xe1 aqu\xed"})]}):(0,a.jsx)("div",{children:j.map(e=>(0,a.jsx)("div",{className:"px-4 py-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ".concat(e.is_read?"":"bg-blue-50/50"),onClick:()=>!e.is_read&&p(e.id),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-1",children:[K(e.type)," \xb7 ",J(e.created_at)]}),(0,a.jsx)("p",{className:"text-sm ".concat(e.is_read?"font-medium":"font-semibold"," text-gray-900 mb-0.5"),children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.message})]}),(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(e.is_read?"bg-gray-100":"bg-blue-100"),children:(0,a.jsx)(c.Z,{className:"h-4 w-4 ".concat(e.is_read?"text-gray-400":"text-blue-600")})})})]})},e.id))})}),e.length>0&&(0,a.jsx)("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:(0,a.jsxs)("button",{onClick:b,disabled:d||0===s,className:"w-full text-center text-sm text-gray-600 hover:text-gray-900 font-medium disabled:opacity-50",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 inline mr-1.5"}),"Marcar todas como le\xeddas"]})})]})]})}var Q=s(3119);function X(){var e,t,s,c,o,d,x,m,u,h,g,p,b,j,f,N,C,k,D,S,E,A;(0,l.useSearchParams)();let P=(0,l.useRouter)(),{formatPrice:T,symbol:L}=(0,i.U)(),[M,B]=(0,r.useState)("dashboard"),[U,R]=(0,r.useState)("retiros"),[z,O]=(0,r.useState)("productos"),[F,H]=(0,r.useState)(null),[V,W]=(0,r.useState)([]),[_,q]=(0,r.useState)(null),[Z,G]=(0,r.useState)(null),[Y,K]=(0,r.useState)([]),[J,X]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[es,ea]=(0,r.useState)([]),[er,el]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)(""),[ed,ex]=(0,r.useState)(""),[em,eu]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)({kycCompleted:!1,needsKyc:!1,applicationStatus:"PENDING"}),[ep,eb]=(0,r.useState)({forecasts:!0,affiliate:!1}),[ej,ef]=(0,r.useState)(!0),[ey,ev]=(0,r.useState)(!1),[eN,ew]=(0,r.useState)(null),[eC,ek]=(0,r.useState)(!1),[eD,eS]=(0,r.useState)(!1),eE=(0,r.useRef)(null),[eA,eP]=(0,r.useState)({title:"",description:"",priceCents:"",billingType:"ONE_TIME",subscriptionInterval:"MONTHLY",telegramChannelId:"",active:!0}),[eT,eL]=(0,r.useState)(!1),[eI,eM]=(0,r.useState)(""),[eB,eU]=(0,r.useState)(!1),[eR,ez]=(0,r.useState)(null),[eO,eF]=(0,r.useState)([]),[eH,eV]=(0,r.useState)(!1),[eW,e_]=(0,r.useState)(!1),[eq,eZ]=(0,r.useState)(""),[eG,eY]=(0,r.useState)("title"),[eK,eJ]=(0,r.useState)(""),[e$,eQ]=(0,r.useState)(!1),[eX,e0]=(0,r.useState)(""),[e2,e1]=(0,r.useState)(null),[e4,e5]=(0,r.useState)(""),[e3,e6]=(0,r.useState)({channelId:"",channelTitle:"",channelType:"private",inviteLink:""}),[e7,e8]=(0,r.useState)(!1),[e9,te]=(0,r.useState)(null),[tt,ts]=(0,r.useState)(!1),[ta,tr]=(0,r.useState)(null),[tl,tn]=(0,r.useState)(!1),[ti,tc]=(0,r.useState)(!1),[to,td]=(0,r.useState)(""),[tx,tm]=(0,r.useState)(""),[tu,th]=(0,r.useState)(null),[tg,tp]=(0,r.useState)(""),[tb,tj]=(0,r.useState)(!1),[tf,ty]=(0,r.useState)({configured:!1,pending:!1,channelId:null,channelTitle:null,channelUsername:null}),[tv,tN]=(0,r.useState)(null),[tw,tC]=(0,r.useState)(""),[tk,tD]=(0,r.useState)(""),[tS,tE]=(0,r.useState)(!1),[tA,tP]=(0,r.useState)(""),[tT,tL]=(0,r.useState)(null),[tI,tM]=(0,r.useState)([]),[tB,tU]=(0,r.useState)(!1),[tR,tz]=(0,r.useState)(!1),[tO,tF]=(0,r.useState)(null),[tH,tV]=(0,r.useState)({subject:"",message:""}),[tW,t_]=(0,r.useState)(""),[tq,tZ]=(0,r.useState)(!1),[tG,tY]=(0,r.useState)([]),[tK,tJ]=(0,r.useState)(!1),[t$,tQ]=(0,r.useState)(!1),[tX,t0]=(0,r.useState)(null),[t2,t1]=(0,r.useState)(!1),[t4,t5]=(0,r.useState)(1),[t3,t6]=(0,r.useState)(!1),[t7,t8]=(0,r.useState)("idle"),[t9,se]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(await new Promise(e=>setTimeout(e,50)),!localStorage.getItem("access_token")){P.push("/login");return}st()})()},[]);let st=async()=>{try{try{let e=await n.g8.getMe();H(e.data),console.log("Loaded user profile:",e.data)}catch(e){console.error("Error loading user profile:",e)}try{let e=await n.fi.getMy();W(e.data)}catch(e){console.error("Error loading products:",e)}try{let e=await n.Q4.getMetrics();q(e.data)}catch(e){console.error("Error loading metrics:",e),q({clicks:0,registers:0,ftds:0,deposits:0,totalDeposits:0,conversionRate:0})}try{let e=await n.$z.channels.getAll();eF(e.data.channels||[])}catch(e){console.error("Error loading Telegram channels:",e)}try{let e=await n.$z.auth.getStatus();e1(e.data)}catch(e){console.error("Error loading Telegram auth status:",e)}try{let e=await n.$z.getChannelInfo();e.data.connected&&(tn(!0),tr(e.data.channel)),e.data.premiumChannelLink&&tp(e.data.premiumChannelLink)}catch(e){console.error("Error loading Telegram info:",e)}try{let e=await n.$z.publicationChannel.get();console.log("Loaded publication channel:",e.data),ty(e.data)}catch(e){console.error("Error loading publication channel:",e)}try{let e=await n.kn.getMyStats();G(e.data)}catch(e){console.error("Error loading sales stats:",e),G({totalSales:0,totalEarningsCents:0,currency:"EUR"})}try{let e=await n.kn.getMySales();K(e.data.slice(0,10))}catch(e){console.error("Error loading recent sales:",e),K([])}try{let e=await n.lY.getAll();X(e.data)}catch(e){console.error("Error loading settlements:",e)}try{let e=await n.wT.getMyModules();e.data.modules&&eb(e.data.modules)}catch(e){console.error("Error loading modules:",e)}try{let e=await n.bs.getKycStatus();eg(e.data),console.log("Loaded KYC status:",e.data)}catch(e){console.error("Error loading KYC status:",e)}try{let[e,t]=await Promise.all([n.yM.getBalance(),n.yM.getMy()]);et(e.data),ea(t.data.withdrawals||[])}catch(e){console.error("Error loading withdrawals:",e)}}catch(e){console.error("Error loading dashboard:",e)}finally{ef(!1)}},ss=async()=>{try{let e=await n.bs.getKycStatus();eg(e.data),B("dashboard")}catch(e){console.error("Error reloading KYC status:",e)}},sa=async()=>{el(!0);try{let[e,t]=await Promise.all([n.yM.getBalance(),n.yM.getMy()]);et(e.data),ea(t.data.withdrawals||[])}catch(e){console.error("Error loading withdrawals:",e)}finally{el(!1)}},sr=async()=>{let e=parseFloat(ec);if(isNaN(e)||e<5){alert("El monto m\xednimo de retiro es €5.00");return}let t=Math.round(100*e);if(ee&&t>ee.availableBalanceCents){alert("Saldo insuficiente. Disponible: €".concat((ee.availableBalanceCents/100).toFixed(2)));return}eu(!0);try{let e=await n.yM.createRequest({amountCents:t,notes:ed||void 0});e.data.success&&(alert("✅ Solicitud de retiro creada\nN\xfamero de factura: ".concat(e.data.invoiceNumber)),ei(!1),eo(""),ex(""),await sa())}catch(e){var s,a;console.error("Error creating withdrawal:",e),alert("❌ Error: "+((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"No se pudo crear la solicitud"))}finally{eu(!1)}},sl=async()=>{tU(!0);try{let e=await fetch("".concat("https://campaign-tracker-47.preview.emergentagent.com/api","/tickets/my"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}),t=await e.json();tM(t.tickets||[])}catch(e){console.error("Error loading tickets:",e)}finally{tU(!1)}},sn=async()=>{if(tH.subject.trim()&&tH.message.trim()){tZ(!0);try{let e=[];if(tG.length>0){let t=new FormData;tG.forEach(e=>{t.append("files",e)});try{let s=await fetch("".concat("https://campaign-tracker-47.preview.emergentagent.com/api","/upload/tickets"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:t});s.ok&&(e=(await s.json()).urls||[])}catch(e){console.error("Error uploading attachments:",e)}}(await fetch("".concat("https://campaign-tracker-47.preview.emergentagent.com/api","/tickets"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({...tH,attachments:e})})).ok&&(tV({subject:"",message:""}),tY([]),tz(!1),await sl(),alert("✅ Ticket creado exitosamente"))}catch(e){console.error("Error creating ticket:",e),alert("Error al crear el ticket")}finally{tZ(!1)}}},si=async()=>{if(tO&&tW.trim()){tZ(!0);try{await fetch("".concat("https://campaign-tracker-47.preview.emergentagent.com/api","/tickets/").concat(tO.id,"/reply"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({message:tW})}),t_(""),await sl();let e=tI.find(e=>e.id===tO.id);e&&tF(e)}catch(e){console.error("Error replying to ticket:",e)}finally{tZ(!1)}}};(0,r.useEffect)(()=>{"support"===M&&sl()},[M]);let sc=async()=>{try{await n.iJ.logout(),localStorage.removeItem("access_token"),P.push("/")}catch(e){console.error("Error logging out:",e),localStorage.removeItem("access_token"),P.push("/")}},so=async()=>{if(!eq.trim()){e0("Por favor, ingresa el nombre del canal");return}eQ(!0),e0("");try{let e=await n.$z.channels.connectByName(eq.trim(),eK.trim()||void 0);if(e.data.success){let e=await n.$z.channels.getAll();eF(e.data.channels||[]),e_(!1),eZ(""),eJ(""),alert("✅ Canal conectado correctamente")}else e0(e.data.message||"No se encontr\xf3 el canal. Verifica que el bot sea administrador y el nombre sea correcto.")}catch(s){var e,t;e0((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al conectar el canal. Verifica el nombre.")}finally{eQ(!1)}},sd=async()=>{if(tX){tQ(!1),th(tX.id);try{let e=await n.$z.publishProduct(tX.id);console.log("Publish response:",e.data),e.data.success?alert("✅ \xa1Publicado! Tu producto ya est\xe1 en tu canal de Telegram"):alert("❌ "+(e.data.message||"Error al publicar"))}catch(s){var e,t;console.error("Publish error:",s),alert("❌ Error: "+((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Error al publicar en Telegram"))}finally{th(null),t0(null)}}},sx=()=>{tQ(!1),t0(null)};(0,r.useEffect)(()=>()=>{tT&&clearInterval(tT)},[tT]);let sm=()=>{ew(null),eP({title:"",description:"",priceCents:"",billingType:"ONE_TIME",subscriptionInterval:"MONTHLY",telegramChannelId:"",active:!0}),eM(""),ev(!0)},su=async e=>{var t,s,a;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(r.type)){alert("Solo se permiten im\xe1genes (JPG, PNG, GIF, WEBP)");return}if(r.size>2097152){alert("La imagen no puede superar 2MB");return}eS(!0);try{let e=await n.aq.uploadAvatar(r);e.data.success&&(H(t=>({...t,tipsterProfile:{...null==t?void 0:t.tipsterProfile,avatarUrl:e.data.avatarUrl}})),alert("✅ Foto de perfil actualizada"))}catch(e){console.error("Error uploading avatar:",e),alert("Error al subir la imagen: "+((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Int\xe9ntalo de nuevo"))}finally{eS(!1),eE.current&&(eE.current.value="")}}},sh=e=>{var t;ew(e),eP({title:e.title||"",description:e.description||"",priceCents:e.priceCents?(e.priceCents/100).toString():"",billingType:e.billingType||"ONE_TIME",subscriptionInterval:e.billingPeriod||"MONTHLY",telegramChannelId:e.telegramChannelId||"",active:null===(t=e.active)||void 0===t||t}),eM(""),ev(!0)},sg=e=>{ew(e),ek(!0)},sp=async()=>{var e,t,s;try{if(!eA.title.trim()){eM("El t\xedtulo es obligatorio");return}let t=parseFloat(eA.priceCents);if(isNaN(t)||t<0){eM("El precio debe ser un n\xfamero v\xe1lido mayor o igual a 0");return}eL(!0),eM("");let s={title:eA.title.trim(),description:eA.description.trim()||void 0,priceCents:Math.round(100*t),billingType:eA.billingType,billingPeriod:"SUBSCRIPTION"===eA.billingType?eA.subscriptionInterval:void 0,telegramChannelId:eA.telegramChannelId||void 0,currency:"EUR"};if(eN)await n.fi.update(eN.id,s),eA.active!==eN.active&&(eA.active?await n.fi.publish(eN.id):await n.fi.pause(eN.id)),await st(),sb();else{let t=await n.fi.create(s);eA.active&&(null===(e=t.data)||void 0===e?void 0:e.id)&&await n.fi.publish(t.data.id),ez(t.data),ev(!1),eU(!0),await st()}}catch(e){console.error("Error saving product:",e),eM((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error al guardar el producto. Por favor, intenta de nuevo.")}finally{eL(!1)}},sb=()=>{ev(!1),ek(!1),eU(!1),ew(null),ez(null),eM("")};if(ej)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})});let sj=(()=>{let e=[{id:"dashboard",label:"Inicio",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}];return ep.forecasts&&e.push({id:"products",label:"Mis productos",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),ep.affiliate&&e.push({id:"referrals",label:"Campa\xf1as",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.push({id:"payouts",label:"Liquidaciones",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),badge:((null==Z?void 0:Z.netEarningsCents)||0)>0?T((null==Z?void 0:Z.netEarningsCents)||0):void 0,badgeColor:"bg-green-100 text-green-700"}),eh.needsKyc&&e.push({id:"kyc",label:"Datos de Cobro",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),badge:"Pendiente",badgeColor:"bg-orange-100 text-orange-700"}),e.push({id:"profile",label:"Perfil",icon:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"support",label:"Soporte",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e})();return(0,a.jsxs)(Q.Z,{navItems:sj,activeView:M,onNavChange:e=>B(e),userInfo:{name:(null==F?void 0:null===(e=F.tipsterProfile)||void 0===e?void 0:e.publicName)||(null==F?void 0:F.email)||"Cargando...",subtitle:"#".concat((null==F?void 0:null===(s=F.tipsterProfile)||void 0===s?void 0:null===(t=s.id)||void 0===t?void 0:t.slice(-4))||"----")},onLogout:sc,brandName:"Antia",brandColor:"blue",headerActions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($,{}),(0,a.jsx)(v.Z,{variant:"pill"})]}),children:[eh.needsKyc&&"kyc"!==M&&(0,a.jsx)(w,{onComplete:()=>B("kyc")}),"kyc"===M&&(0,a.jsx)(I,{onComplete:ss,onCancel:()=>B("dashboard"),initialData:eh.kycData}),"dashboard"===M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Hola ",(null==F?void 0:null===(o=F.tipsterProfile)||void 0===o?void 0:null===(c=o.publicName)||void 0===c?void 0:c.split(" ")[0])||"Tipster"]}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Bienvenido de nuevo!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-8",children:[ep.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Afiliados"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==_?void 0:_.ftds)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"12%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Clicks \xdanicos"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==_?void 0:_.uniqueClicks)||(null==Z?void 0:Z.uniqueVisitors)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"8%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Clicks Totales"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==_?void 0:_.clicks)||(null==Z?void 0:Z.totalVisits)||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-red-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"3%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]}),ep.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Campa\xf1as activas"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==_?void 0:_.campaigns)||V.filter(e=>e.active).length||0})]}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-green-500 flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"5%"]}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 mb-8",children:[ep.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Campa\xf1as mas populares"}),(0,a.jsxs)("div",{className:"space-y-4",children:[V.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.title}),(0,a.jsxs)("span",{className:"text-gray-400",children:[Math.round(85-15*t),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(85-15*t,"%")}})})]},e.id)),0===V.length&&(0,a.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"Sin campa\xf1as"})]})]}),ep.forecasts&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"AntiaPay"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ingresos Brutos"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:T((null==Z?void 0:Z.grossEarningsCents)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ventas"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(null==Z?void 0:Z.totalSales)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Productos"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:V.length})]})]})]}),ep.affiliate&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-100",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Afiliados"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Ganancias"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:T((null==_?void 0:_.totalEarnings)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Referidos FTD"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(null==_?void 0:_.ftds)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Pr\xf3xima liquidaci\xf3n"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:(()=>{let e=new Date,t=e.getDay(),s=new Date(e);return s.setDate(e.getDate()+((7-t)%7||7)),s.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})()})]})]})]})]}),ep.forecasts&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-medium text-gray-900",children:"Mis Productos"}),(0,a.jsx)("button",{onClick:sm,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm",children:"+ Crear Producto"})]}),(0,a.jsx)("div",{className:"p-6",children:0===V.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No tienes productos a\xfan"}),(0,a.jsx)("button",{onClick:sm,className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Crear tu primer producto"})]}):(0,a.jsx)("div",{className:"space-y-4",children:V.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[e.telegramChannelId?(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}):(0,a.jsx)("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"A"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:T(e.priceCents)}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"),children:e.active?"Activo":"Pausado"})]})]})]}),(0,a.jsx)("button",{onClick:()=>sg(e),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Ver"})]},e.id))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Ventas Recientes"})}),(0,a.jsx)("div",{className:"p-6",children:0===Y.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No hay ventas a\xfan"})}):(0,a.jsx)("div",{className:"space-y-4",children:Y.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.productTitle||"Producto"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.emailBackup||"Cliente"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-green-600",children:T(e.amountCents||0)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("es-ES")})]})]},e.id))})})]})]}),ep.affiliate&&!ep.forecasts&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83E\uDD1D Resumen de Afiliaci\xf3n"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Clics"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==_?void 0:_.clicks)||0})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Registros"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==_?void 0:_.registers)||0})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"FTDs"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==_?void 0:_.ftds)||0})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:()=>B("referrals"),className:"text-purple-600 hover:underline",children:"Ver detalle de afiliaci\xf3n →"})})]})]})]}),"products"===M&&(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 -mx-6 -mt-6 px-6 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Productos"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Gestiona tus productos y ventas"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center overflow-hidden",children:(null==F?void 0:null===(d=F.tipsterProfile)||void 0===d?void 0:d.avatarUrl)?(0,a.jsx)("img",{src:F.tipsterProfile.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):(0,a.jsx)("span",{className:"text-white font-bold",children:(null==F?void 0:null===(u=F.tipsterProfile)||void 0===u?void 0:null===(m=u.publicName)||void 0===m?void 0:null===(x=m.charAt(0))||void 0===x?void 0:x.toUpperCase())||"T"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==F?void 0:null===(h=F.tipsterProfile)||void 0===h?void 0:h.publicName)||"Usuario"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["@",(null==F?void 0:null===(g=F.email)||void 0===g?void 0:g.split("@")[0])||"usuario"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total ventas"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[(null==Z?void 0:Z.totalSales)||0," sold"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[T((null==Z?void 0:Z.grossEarningsCents)||0).replace("€",""),"€"]}),(0,a.jsx)("p",{className:"text-xs text-emerald-500",children:"+ 6.9%"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Transacciones"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[(null==Z?void 0:Z.totalSales)||0," Ventas"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==Z?void 0:Z.totalSales)||0}),(0,a.jsx)("p",{className:"text-xs text-emerald-500",children:"+ 6.9%"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Suscripciones"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"0 suscripciones"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[T((null==Z?void 0:Z.netEarningsCents)||0).replace("€",""),"€"]}),(0,a.jsx)("p",{className:"text-xs text-emerald-500",children:"+ 6.9%"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 pt-4 pb-0 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("button",{onClick:()=>O("productos"),className:"pb-3 text-sm font-medium border-b-2 transition ".concat("productos"===z?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"),"data-testid":"tab-mis-productos",children:"Mis productos"}),(0,a.jsx)("button",{onClick:()=>O("ventas"),className:"pb-3 text-sm font-medium border-b-2 transition ".concat("ventas"===z?"border-blue-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"),"data-testid":"tab-ventas",children:"Ventas"})]}),"productos"===z&&(0,a.jsxs)("button",{onClick:sm,className:"mb-3 bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition text-sm font-medium flex items-center gap-2","data-testid":"create-product-btn",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Crear Producto"]})]}),"productos"===z&&(0,a.jsxs)(a.Fragment,{children:[0===V.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes productos a\xfan"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Crea tu primer producto para empezar a vender"}),(0,a.jsxs)("button",{onClick:sm,className:"inline-flex items-center gap-2 bg-slate-800 text-white px-6 py-3 rounded-lg hover:bg-slate-700 transition font-medium",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Crear Producto"]})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[700px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-700",children:"Nombre"}),(0,a.jsx)("th",{className:"px-4 py-4 text-center text-sm font-medium text-gray-700",children:"Pago"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Precio"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Ventas"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center text-sm font-medium text-gray-700",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:V.map(e=>{var t;let s=Y.filter(t=>t.productId===e.id),r=s.length,l=s.reduce((e,t)=>e+(t.amountCents||0),0);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50/50 transition group",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.telegramChannelId?(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}):(0,a.jsx)("div",{className:"w-10 h-10 bg-black rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"A"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["ID",(null===(t=e.id)||void 0===t?void 0:t.slice(-5))||"00000"]})]})]})}),(0,a.jsx)("td",{className:"px-4 py-4 text-center",children:(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"SUBSCRIPTION"===e.billingType?"Suscripci\xf3n":"Unico"})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("span",{className:"text-sm text-gray-900",children:T(e.priceCents)})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("span",{className:"text-sm text-gray-900",children:r>0?T(r*(e.priceCents||0)):"0€"})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:T(l)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>sh(e),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Editar","data-testid":"edit-product-".concat(e.id),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>sg(e),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Ver estad\xedsticas","data-testid":"view-product-".concat(e.id),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("button",{onClick:()=>{let t=window.location.origin;navigator.clipboard.writeText("".concat(t,"/checkout/").concat(e.id)),alert("✅ Link copiado")},className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition","data-testid":"copy-url-".concat(e.id),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Copiar"]})]})})]},e.id)})})]})}),V.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[V.length," producto",1!==V.length?"s":""," en total"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Acciones r\xe1pidas:"}),V.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>sh(e),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-white rounded transition",title:"Editar ".concat(e.title),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>sg(e),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-white rounded transition",title:"Ver ".concat(e.title),children:(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},e.id))]})]})})]}),"ventas"===z&&(0,a.jsx)(a.Fragment,{children:0===Y.length?(0,a.jsxs)("div",{className:"p-16 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"A\xfan no tienes ventas"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Comparte tus productos para empezar a vender"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-700",children:"Nombre"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-sm font-medium text-gray-700",children:"Fecha"}),(0,a.jsx)("th",{className:"px-4 py-4 text-left text-sm font-medium text-gray-700",children:"Usuario"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Precio"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Bruto"}),(0,a.jsx)("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-700",children:"Neto"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-700",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:Y.map(e=>{var t;let s=V.find(t=>t.id===e.productId),r=e.amountCents||0,l=Math.round(.9*r);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50/50 transition",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"stripe":return(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-[10px] font-bold",children:"Stripe"})});case"redsys":return(0,a.jsx)("div",{className:"w-10 h-10 bg-red-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-[10px] font-bold",children:"Redsys"})});default:return(0,a.jsx)("div",{className:"w-10 h-10 bg-black rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"A"})})}})(e.paymentProvider),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==s?void 0:s.title)||"Producto"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["ID",(null===(t=e.id)||void 0===t?void 0:t.slice(-5))||"00000"]})]})]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:new Date(e.paidAt||e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"long"})})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("p",{className:"text-sm text-blue-600",children:e.email||e.telegramUsername||"-"})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:T(r)})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:T(r)})}),(0,a.jsx)("td",{className:"px-4 py-4 text-right",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:T(l)})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:T(l)})})]},e.id)})})]})})})]})]}),"referrals"===M&&(0,a.jsx)(y,{userName:(null==F?void 0:F.name)||(null==F?void 0:null===(p=F.email)||void 0===p?void 0:p.split("@")[0])||"Usuario",userHandle:(null==F?void 0:F.email)?"@".concat(F.email.split("@")[0]):"@usuario",userAvatar:null==F?void 0:F.avatarUrl}),"payouts"===M&&(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"AntiaPay"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{children:"Liquidaciones"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:(0,a.jsx)("div",{className:"border-b border-gray-100",children:(0,a.jsxs)("nav",{className:"flex flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>R("retiros"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("retiros"===U?"border-green-500 text-green-600 bg-green-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"\uD83D\uDCB0 Solicitar Retiro"}),(0,a.jsx)("button",{onClick:()=>R("liquidaciones"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("liquidaciones"===U?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Liquidaciones"}),(0,a.jsx)("button",{onClick:()=>R("facturas"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("facturas"===U?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Facturas"}),(0,a.jsx)("button",{onClick:()=>R("pagos"),className:"px-6 py-4 text-sm font-medium border-b-2 transition ".concat("pagos"===U?"border-blue-500 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700"),children:"Informe de saldo"})]})})}),"retiros"===U&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCB8 Solicitar Retiro"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Solicita el pago de tus ganancias acumuladas"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-5 border-l-4 border-green-500",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\uD83D\uDCB0 Saldo Disponible"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T((null==ee?void 0:ee.availableBalanceCents)||0)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"\uD83D\uDCC8 Total Ganado"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:T((null==ee?void 0:ee.totalEarnedCents)||0)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"✅ Ya Retirado"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:T((null==ee?void 0:ee.totalWithdrawnCents)||0)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"⏳ Pendiente"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:T((null==ee?void 0:ee.pendingWithdrawalCents)||0)})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\xbfListo para retirar tus ganancias?"}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Puedes solicitar el retiro de tu saldo disponible. El monto m\xednimo es de €5.00.",(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Ventas totales: ",(null==ee?void 0:ee.orderCount)||0," | Retiros procesados: ",(null==ee?void 0:ee.withdrawalCount)||0]})]})]}),(0,a.jsx)("button",{onClick:()=>ei(!0),disabled:500>((null==ee?void 0:ee.availableBalanceCents)||0),className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:"\uD83D\uDCB0 Solicitar Retiro"})]}),500>((null==ee?void 0:ee.availableBalanceCents)||0)&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:"⚠️ Necesitas al menos €5.00 de saldo disponible para solicitar un retiro."})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDCCB Historial de Solicitudes"}),(0,a.jsx)("button",{onClick:sa,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:"\uD83D\uDD04 Actualizar"})]}),er?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"text-gray-500 mt-4",children:"Cargando solicitudes..."})]}):0===es.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay solicitudes de retiro"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Cuando solicites un retiro, aparecer\xe1 aqu\xed"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:es.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("span",{className:"font-mono font-medium text-gray-900",children:e.invoiceNumber}),"PENDING"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"⏳ Pendiente"}),"APPROVED"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:"✓ Aprobada"}),"PAID"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"✅ Pagada"}),"REJECTED"===e.status&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"❌ Rechazada"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Fecha Solicitud"}),(0,a.jsx)("p",{className:"font-medium text-gray-700",children:e.requestedAt?new Date(e.requestedAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Importe"}),(0,a.jsx)("p",{className:"font-bold text-green-600 text-lg",children:T(e.amountCents)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"M\xe9todo"}),(0,a.jsx)("p",{className:"font-medium text-gray-700",children:"IBAN"===e.bankAccountType?"\uD83C\uDFE6 Banco":"PAYPAL"===e.bankAccountType?"\uD83D\uDCB3 PayPal":"₿ Crypto"})]}),"PAID"===e.status&&e.paidAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400 block text-xs",children:"Fecha de Pago"}),(0,a.jsx)("p",{className:"font-medium text-green-600",children:new Date(e.paidAt).toLocaleDateString("es-ES")})]})]}),"REJECTED"===e.status&&e.rejectionReason&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-red-600 text-sm font-medium",children:"Motivo: "}),(0,a.jsx)("span",{className:"text-red-700 text-sm",children:e.rejectionReason})]}),"PAID"===e.status&&e.paymentReference&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-green-600 text-sm font-medium",children:"Ref. de pago: "}),(0,a.jsx)("span",{className:"text-green-700 text-sm font-mono",children:e.paymentReference})]})]}),(0,a.jsx)("div",{className:"ml-4",children:e.invoicePdfUrl&&(0,a.jsx)("a",{href:e.invoicePdfUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition inline-flex items-center gap-2",children:"\uD83D\uDCC4 Ver Factura"})})]})},e.id))})]})]}),"liquidaciones"===U&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Cartera"}),(0,a.jsxs)("select",{className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{children:"Todas"}),(0,a.jsx)("option",{children:"Pron\xf3sticos"}),(0,a.jsx)("option",{children:"Afiliaci\xf3n"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"A\xf1o"}),(0,a.jsxs)("select",{className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{children:"2025"}),(0,a.jsx)("option",{children:"2024"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Liquidaciones"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingresos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deducidos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gastos"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:(null==J?void 0:null===(b=J.settlements)||void 0===b?void 0:b.length)>0?J.settlements.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.reference||"LIQ-".concat(String(t+1).padStart(4,"0"))}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.date?new Date(e.date).toLocaleDateString("es-ES"):"-"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("PAID"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"PROCESSING"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:"PAID"===e.status?"Pagado":"PENDING"===e.status?"Pendiente":"PROCESSING"===e.status?"En proceso":e.status||"Abandonado"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:T(e.grossAmount||0)}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-right text-red-600",children:["-",T(e.deductions||0)]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-right text-orange-600",children:["-",T(e.expenses||0)]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-right font-semibold text-gray-900",children:T(e.netAmount||0)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("button",{className:"text-gray-400 hover:text-red-600 transition",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})})})]},e.id||t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay liquidaciones procesadas a\xfan"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Tu primera liquidaci\xf3n se procesar\xe1 autom\xe1ticamente"})]})})})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Balance Pendiente"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:T((null==Z?void 0:Z.netEarningsCents)||0)}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Pr\xf3xima liquidaci\xf3n: ",(()=>{let e=new Date,t=e.getDay(),s=new Date(e);return s.setDate(e.getDate()+((7-t)%7||7)),s.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})()]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Liquidado"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"€0.00"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Hist\xf3rico total"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Comisiones Antia"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:T((null==Z?void 0:Z.platformFeesCents)||0)}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"10% de las ventas"})]})]})]}),"facturas"===U&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay facturas disponibles"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Las facturas se generan con cada liquidaci\xf3n"})]})})})})]})}),"pagos"===U&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen de Saldo"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"Ingresos Brutos"}),(0,a.jsx)("div",{className:"text-xl font-bold text-blue-700",children:T((null==Z?void 0:Z.grossEarningsCents)||0)})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-red-600",children:"Comisi\xf3n Pasarela"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-red-700",children:["-",T((null==Z?void 0:Z.gatewayFeesCents)||0)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-orange-600",children:"Comisi\xf3n Antia"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-orange-700",children:["-",T((null==Z?void 0:Z.platformFeesCents)||0)]})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Neto a Recibir"}),(0,a.jsx)("div",{className:"text-xl font-bold text-green-700",children:T((null==Z?void 0:Z.netEarningsCents)||0)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Historial de Transferencias"})}),(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xe9todo"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase",children:"Importe"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay transferencias registradas"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Las transferencias aparecer\xe1n aqu\xed cuando se procesen"})]})})})})]})]})]})]})]}),"profile"===M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mi Perfil"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configuraci\xf3n de tu cuenta"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 lg:col-span-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Foto de Perfil"}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(null==F?void 0:null===(j=F.tipsterProfile)||void 0===j?void 0:j.avatarUrl)?(0,a.jsx)("img",{src:F.tipsterProfile.avatarUrl,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-blue-100"}):(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center border-4 border-blue-100",children:(0,a.jsx)("span",{className:"text-3xl font-bold text-white",children:(null==F?void 0:null===(C=F.tipsterProfile)||void 0===C?void 0:null===(N=C.publicName)||void 0===N?void 0:null===(f=N.charAt(0))||void 0===f?void 0:f.toUpperCase())||(null==F?void 0:null===(D=F.email)||void 0===D?void 0:null===(k=D.charAt(0))||void 0===k?void 0:k.toUpperCase())||"?"})}),eD&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",ref:eE,onChange:su,accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden"}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=eE.current)||void 0===e?void 0:e.click()},disabled:eD,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:eD?"Subiendo...":"Cambiar foto"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"JPG, PNG, GIF o WEBP. M\xe1ximo 2MB."})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Informaci\xf3n Personal"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre P\xfablico"}),(0,a.jsx)("input",{type:"text",value:(null==F?void 0:null===(S=F.tipsterProfile)||void 0===S?void 0:S.publicName)||"",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:(null==F?void 0:F.email)||"",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("input",{type:"text",value:(null==F?void 0:F.phone)||"No configurado",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario de Telegram"}),(0,a.jsx)("input",{type:"text",value:(null==F?void 0:null===(E=F.tipsterProfile)||void 0===E?void 0:E.telegramUsername)||"No configurado",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado de la cuenta"}),(0,a.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium ".concat((null==F?void 0:F.status)==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==F?void 0:F.status)==="ACTIVE"?"✓ Activa":null==F?void 0:F.status})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Para modificar tu informaci\xf3n de perfil, contacta con el administrador."})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83C\uDFE6 Datos de Cobro"}),eh.kycCompleted?(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"✓ Completo"}):(0,a.jsx)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:"Pendiente"})]}),eh.kycCompleted&&eh.kycData?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre/Raz\xf3n Social"}),(0,a.jsx)("input",{type:"text",value:eh.kycData.legalName||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Documento"}),(0,a.jsx)("input",{type:"text",value:eh.kycData.documentType||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero"}),(0,a.jsx)("input",{type:"text",value:eh.kycData.documentNumber||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pa\xeds"}),(0,a.jsx)("input",{type:"text",value:eh.kycData.country||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9todo de Cobro"}),(0,a.jsx)("input",{type:"text",value:eh.kycData.bankAccountType||"-",readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("button",{onClick:()=>B("kyc"),className:"w-full px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 font-medium transition",children:"✏️ Modificar Datos de Cobro"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCCB"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Datos no configurados"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"Completa tus datos de cobro para poder recibir tus ganancias"}),(0,a.jsx)("button",{onClick:()=>B("kyc"),className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium transition",children:"Completar Ahora"})]})]})]})]}),"support"===M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"❓ Soporte"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Centro de ayuda y tickets de soporte"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCDD Nuevo Ticket"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),(0,a.jsx)("input",{type:"text",value:tH.subject,onChange:e=>tV({...tH,subject:e.target.value}),placeholder:"Describe brevemente tu problema",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),(0,a.jsx)("textarea",{value:tH.message,onChange:e=>tV({...tH,message:e.target.value}),placeholder:"Explica tu problema con detalle...",rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjuntar archivos (opcional)"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition cursor-pointer",onClick:()=>{var e;return null===(e=document.getElementById("ticket-file-input"))||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{id:"ticket-file-input",type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"hidden",onChange:e=>{let t=Array.from(e.target.files||[]);tY(e=>[...e,...t].slice(0,5))}}),(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCE"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Haz clic para adjuntar capturas o documentos"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"M\xe1x. 5 archivos (im\xe1genes, PDF, DOC)"})]})]}),tG.length>0&&(0,a.jsx)("div",{className:"mt-3 space-y-2",children:tG.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{children:e.type.startsWith("image/")?"\uD83D\uDDBC️":"\uD83D\uDCC4"}),(0,a.jsx)("span",{className:"truncate max-w-[150px]",children:e.name}),(0,a.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),(0,a.jsx)("button",{onClick:()=>tY(e=>e.filter((e,s)=>s!==t)),className:"text-red-500 hover:text-red-700 text-sm",children:"✕"})]},t))})]}),(0,a.jsx)("button",{onClick:sn,disabled:!tH.subject.trim()||!tH.message.trim()||tq,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:tq?"Enviando...":"Enviar Ticket"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"❓ Preguntas Frecuentes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfC\xf3mo conecto mi canal de Telegram?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:"Ve a la secci\xf3n Telegram, a\xf1ade @Antiabetbot como admin de tu canal y luego conecta el canal desde el panel."})]}),(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfCu\xe1ndo recibo mis pagos?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:"Las liquidaciones se procesan el d\xeda 28 de cada mes. Aseg\xfarate de tener tus datos de cobro completos."})]}),(0,a.jsxs)("details",{className:"group",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-blue-600",children:"\xbfC\xf3mo creo un producto sin canal?"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 pl-4",children:'Al crear un producto, selecciona "Sin canal" en la opci\xf3n de canal. Los clientes recibir\xe1n confirmaci\xf3n por email.'})]})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCCB Mis Tickets"})}),tB?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Cargando tickets..."})]}):0===tI.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCED"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tienes tickets"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Cuando crees un ticket, aparecer\xe1 aqu\xed"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:tI.map(e=>{var t,s,r;return(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition ".concat((null==tO?void 0:tO.id)===e.id?"bg-blue-50":""),onClick:()=>tF(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.subject}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("OPEN"===e.status?"bg-yellow-100 text-yellow-800":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-800":"RESOLVED"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"OPEN"===e.status?"Abierto":"IN_PROGRESS"===e.status?"En proceso":"RESOLVED"===e.status?"Resuelto":e.status})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:(null===(s=e.messages)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.message)||e.message}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Creado: ",new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(null===(r=e.responses)||void 0===r?void 0:r.length)>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:[e.responses.length+1," mensajes"]})})]})},e.id)})})]}),tO&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mt-6",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:tO.subject}),(0,a.jsx)("span",{className:"inline-flex px-2 py-0.5 rounded-full text-xs font-medium mt-1 ".concat("OPEN"===tO.status?"bg-yellow-100 text-yellow-800":"IN_PROGRESS"===tO.status?"bg-blue-100 text-blue-800":"RESOLVED"===tO.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"OPEN"===tO.status?"Abierto":"IN_PROGRESS"===tO.status?"En proceso":"RESOLVED"===tO.status?"Resuelto":tO.status})]}),(0,a.jsx)("button",{onClick:()=>tF(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,a.jsxs)("div",{className:"p-6 max-h-80 overflow-y-auto space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 mr-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDC64 T\xfa"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(tO.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:tO.message})]}),null===(A=tO.responses)||void 0===A?void 0:A.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.isAdmin?"bg-blue-50 ml-8":"bg-gray-50 mr-8"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.isAdmin?"text-blue-600":"text-gray-700"),children:e.isAdmin?"\uD83D\uDC64 Soporte Antia":"\uD83D\uDC64 T\xfa"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString("es-ES")})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.message})]},t))]}),"RESOLVED"!==tO.status&&(0,a.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:tW,onChange:e=>t_(e.target.value),placeholder:"Escribe tu respuesta...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&si()}),(0,a.jsx)("button",{onClick:si,disabled:!tW.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition disabled:opacity-50",children:"Enviar"})]})})]})]})]})]}),t$&&tX&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:sx,children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCF1"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Compartir en Telegram"}),(0,a.jsx)("p",{className:"text-green-100 text-sm",children:"Publicaci\xf3n autom\xe1tica"})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:"\xbfEst\xe1s seguro que quieres compartir este producto en tu canal de Telegram?"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Producto:"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:tX.title})]}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl",children:"ℹ️"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Se publicar\xe1 autom\xe1ticamente"})," en tu canal:"]}),(0,a.jsxs)("p",{className:"text-sm text-blue-600 font-medium mt-1",children:[tf.channelTitle," ",tf.channelUsername&&"(".concat(tf.channelUsername,")")]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:sx,className:"px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700 font-medium transition",children:"Cancelar"}),(0,a.jsxs)("button",{onClick:sd,className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE4"})," S\xed, Publicar Ahora"]})]})]})}),en&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>ei(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCB0"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Solicitar Retiro"}),(0,a.jsxs)("p",{className:"text-green-100 text-sm",children:["Disponible: ",T((null==ee?void 0:ee.availableBalanceCents)||0)]})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[!eh.kycCompleted&&(0,a.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-xl",children:"⚠️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-orange-800 font-medium",children:"Datos bancarios pendientes"}),(0,a.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Debes completar tus datos de cobro antes de solicitar un retiro."}),(0,a.jsx)("button",{onClick:()=>{ei(!1),B("kyc")},className:"mt-2 text-sm text-orange-700 font-medium hover:underline",children:"Ir a Datos de Cobro →"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto a retirar (€)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"€"}),(0,a.jsx)("input",{type:"number",value:ec,onChange:e=>eo(e.target.value),placeholder:"0.00",min:"5",max:((null==ee?void 0:ee.availableBalanceCents)||0)/100,step:"0.01",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"M\xednimo: €5.00"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[[25,50,100].map(e=>(0,a.jsxs)("button",{onClick:()=>{eo(Math.min(e,((null==ee?void 0:ee.availableBalanceCents)||0)/100).toString())},disabled:((null==ee?void 0:ee.availableBalanceCents)||0)<100*e,className:"flex-1 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["€",e]},e)),(0,a.jsx)("button",{onClick:()=>eo((((null==ee?void 0:ee.availableBalanceCents)||0)/100).toFixed(2)),disabled:500>((null==ee?void 0:ee.availableBalanceCents)||0),className:"flex-1 py-2 bg-green-50 border border-green-200 rounded-lg text-sm font-medium text-green-700 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Todo"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),(0,a.jsx)("textarea",{value:ed,onChange:e=>ex(e.target.value),placeholder:"A\xf1ade cualquier informaci\xf3n relevante...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none"})]}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"ℹ️"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Al solicitar el retiro:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[(0,a.jsx)("li",{children:"Se generar\xe1 una factura autom\xe1ticamente"}),(0,a.jsx)("li",{children:"El equipo de Antia revisar\xe1 tu solicitud"}),(0,a.jsx)("li",{children:"Recibir\xe1s el pago en tu cuenta bancaria registrada"})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{ei(!1),eo(""),ex("")},className:"px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-100 text-gray-700 font-medium transition",children:"Cancelar"}),(0,a.jsx)("button",{onClick:sr,disabled:em||!ec||5>parseFloat(ec)||!eh.kycCompleted,className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:em?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDCB8"})," Solicitar Retiro"]})})]})]})}),eW&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>e_(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Conectar Canal de Telegram"}),(0,a.jsx)("button",{onClick:()=>{e_(!1),e0(""),eZ(""),eJ("")},className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCB Requisito previo:"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["A\xf1ade el bot ",(0,a.jsx)("strong",{children:"@Antiabetbot"})," como ",(0,a.jsx)("strong",{children:"administrador"})," de tu canal y env\xeda un mensaje en el canal."]})]}),eX&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 whitespace-pre-line",children:eX})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre del canal ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:eq,onChange:e=>eZ(e.target.value),placeholder:"Ej: Pronosticos Futbol",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Escribe el nombre exacto de tu canal (como aparece en Telegram)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Link de invitaci\xf3n ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:eK,onChange:e=>eJ(e.target.value),placeholder:"https://t.me/+abc123xyz",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pega el link de invitaci\xf3n de tu canal (sirve para diferenciar canales con el mismo nombre)"})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,a.jsx)("button",{onClick:()=>{e_(!1),e0(""),eZ(""),eJ("")},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:so,disabled:e$||!eq.trim()||!eK.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:e$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Conectando..."]}):"Conectar Canal"})]})]})]})}),ey&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:sb,children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-6 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:eN?"Editar Producto":"Crear nuevo producto"}),(0,a.jsx)("button",{onClick:sb,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Completa los datos de tu producto"})]}),(0,a.jsxs)("div",{className:"px-6 pb-6",children:[eI&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:eI})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T\xedtulo del Producto ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:eA.title,onChange:e=>eP({...eA,title:e.target.value}),placeholder:"Ej: Pron\xf3sticos Premium Mensuales",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{rows:3,value:eA.description,onChange:e=>eP({...eA,description:e.target.value}),placeholder:"Describe tu producto...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Precio (€) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:eA.priceCents,onChange:e=>eP({...eA,priceCents:e.target.value}),placeholder:"29.99",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Pago"}),(0,a.jsxs)("select",{value:eA.billingType,onChange:e=>eP({...eA,billingType:e.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"ONE_TIME",children:"Pago \xfanico"}),(0,a.jsx)("option",{value:"SUBSCRIPTION",children:"Suscripci\xf3n"})]})]})]}),"SUBSCRIPTION"===eA.billingType&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frecuencia de Cobro"}),(0,a.jsxs)("select",{value:eA.subscriptionInterval,onChange:e=>eP({...eA,subscriptionInterval:e.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"MONTHLY",children:"Mensual"}),(0,a.jsx)("option",{value:"QUARTERLY",children:"Trimestral (cada 3 meses)"}),(0,a.jsx)("option",{value:"ANNUAL",children:"Anual"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Si el cliente no renueva, perder\xe1 acceso autom\xe1ticamente al canal"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Canal de Telegram"}),0===eO.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800 mb-2",children:"⚠️ No tienes canales conectados"}),(0,a.jsxs)("p",{className:"text-xs text-amber-700 mb-3",children:["A\xf1ade el bot ",(0,a.jsx)("strong",{children:"@Antiabetbot"})," como administrador en tu canal."]}),(0,a.jsx)("a",{href:"https://t.me/Antiabetbot",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline font-medium",children:"Abrir @Antiabetbot →"})]}):(0,a.jsxs)("select",{value:eA.telegramChannelId,onChange:e=>eP({...eA,telegramChannelId:e.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition text-sm appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"Sin canal (solo confirmaci\xf3n de pago)"}),eO.map(e=>(0,a.jsxs)("option",{value:e.channelId,children:["public"===e.channelType?"\uD83C\uDF10":"\uD83D\uDD12"," ",e.channelTitle,e.channelName&&" (@".concat(e.channelName,")")]},e.id))]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:eA.telegramChannelId?"Los clientes recibir\xe1n acceso despu\xe9s de pagar":"Sin canal: Solo recibir\xe1n confirmaci\xf3n de pago"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eP({...eA,active:!eA.active}),className:"relative w-11 h-6 rounded-full transition-colors ".concat(eA.active?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("span",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(eA.active?"translate-x-5":"")})}),(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Producto activo"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,a.jsx)("button",{onClick:sb,disabled:eT,className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition text-sm font-medium text-gray-700 disabled:opacity-50",children:"Cancelar"}),(0,a.jsx)("button",{onClick:sp,disabled:eT,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition text-sm font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:eT?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Guardando..."]}):eN?"Guardar Cambios":"Crear Producto"})]})]})]})}),eB&&eR&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:sb,children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-5",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\xa1Producto creado exitosamente!"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-6",children:"Ya puedes compartir tu producto"}),(0,a.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>{let e=window.location.origin;navigator.clipboard.writeText("".concat(e,"/checkout/").concat(eR.id)),alert("✅ Link copiado")},className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-sm font-medium text-gray-700 flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copiar"]}),(0,a.jsxs)("button",{onClick:()=>{let e=window.location.origin,t="".concat(e,"/checkout/").concat(eR.id),s="\uD83D\uDD25 ".concat(eR.title,"\n\n\uD83D\uDCB0 Precio: €").concat((eR.priceCents/100).toFixed(2),"\n\n\uD83D\uDC49 Comprar: ").concat(t);navigator.clipboard.writeText(s),alert("✅ Texto promocional copiado")},className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-sm font-medium text-gray-700 flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Compartir"]})]}),(0,a.jsx)("button",{onClick:()=>{eU(!1),ez(null),eP({title:"",description:"",priceCents:"",billingType:"ONE_TIME",subscriptionInterval:"MONTHLY",telegramChannelId:"",active:!0}),ev(!0)},className:"w-full px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition text-sm font-medium mb-3",children:"Crear nuevo producto"}),(0,a.jsx)("button",{onClick:sb,className:"text-sm text-gray-500 hover:text-gray-700 transition",children:"Cerrar"})]})})}),eC&&eN&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:sb,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:eN.title}),(0,a.jsx)("button",{onClick:sb,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900",children:eN.description||"Sin descripci\xf3n"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Precio"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["€",(eN.priceCents/100).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Estado"}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded text-sm font-medium ".concat(eN.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"),children:eN.active?"Activo":"Pausado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tipo de Facturaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900",children:"SUBSCRIPTION"===eN.billingType?"Suscripci\xf3n":"Pago \xfanico"})]}),eN.telegramChannelId?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Telegram"}),(0,a.jsxs)("p",{className:"text-gray-900 flex items-center gap-2",children:["\uD83D\uDCF1 ",(e=>{let t=eO.find(t=>t.channelId===e);return t?t.channelTitle:e})(eN.telegramChannelId),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eN.telegramChannelId,")"]})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Canal de Telegram"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded text-sm font-medium",children:"SIN CANAL"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Solo pago, sin acceso a canal"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Estad\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Ventas"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"€0.00"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Ingresos"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Suscriptores"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:sb,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cerrar"}),(0,a.jsx)("button",{onClick:()=>{ek(!1),sh(eN)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Editar Producto"})]})]})]})})]})}function ee(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:(0,a.jsx)(X,{})})}},4646:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437),r=s(7120);function l(e){let{className:t="",size:s="md",variant:l="default"}=e,{currency:n,setCurrency:i,loading:c}=(0,r.U)();return c?(0,a.jsx)("div",{className:"animate-pulse bg-gray-200 rounded ".concat("sm"===s?"w-16 h-6":"w-20 h-8")}):"pill"===l?(0,a.jsxs)("div",{className:"inline-flex rounded-full bg-gray-100 p-1 ".concat(t),children:[(0,a.jsx)("button",{onClick:()=>i("EUR"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("EUR"===n?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"€ EUR"}),(0,a.jsx)("button",{onClick:()=>i("USD"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("USD"===n?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"$ USD"})]}):"minimal"===l?(0,a.jsxs)("div",{className:"inline-flex gap-1 ".concat(t),children:[(0,a.jsx)("button",{onClick:()=>i("EUR"),className:"p-1.5 rounded transition-colors ".concat("EUR"===n?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"Euro",children:"€"}),(0,a.jsx)("button",{onClick:()=>i("USD"),className:"p-1.5 rounded transition-colors ".concat("USD"===n?"bg-green-100 text-green-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"US Dollar",children:"$"})]}):(0,a.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer ".concat({sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[s]," ").concat(t),children:[(0,a.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,a.jsx)("option",{value:"USD",children:"$ USD"})]})}},3119:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437),r=s(2265);function l(e){let{children:t,navItems:s,activeView:l,onNavChange:n,userInfo:i,onLogout:c,headerActions:o,brandName:d="Antia",brandColor:x="blue",badgeText:m}=e,[u,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{p(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let b=(e,t)=>{t?t():n(e),g&&h(!1)},j="red"===x?"text-red-600":"text-blue-600",f="red"===x?"bg-red-50":"bg-blue-50",y="red"===x?"text-red-600":"text-blue-600";return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b border-gray-100 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>h(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg","aria-label":"Abrir men\xfa","data-testid":"mobile-menu-button",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsx)("span",{className:"text-xl font-bold ".concat(j),children:d})]}),o&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:o})]})}),u&&g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>{g&&h(!1)},"aria-hidden":"true"}),(0,a.jsx)("aside",{className:"\n          fixed top-0 left-0 h-full bg-white border-r border-gray-100 z-50\n          transition-transform duration-300 ease-in-out\n          w-64\n          ".concat(g?u?"translate-x-0":"-translate-x-full":"translate-x-0","\n        "),"data-testid":"sidebar",children:(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(j),children:d}),g&&(0,a.jsx)("button",{onClick:()=>h(!1),className:"p-2 -mr-2 text-gray-600 hover:bg-gray-100 rounded-lg lg:hidden","aria-label":"Cerrar men\xfa","data-testid":"close-sidebar-button",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m&&(0,a.jsx)("div",{className:"text-xs ".concat("red"===x?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"," px-2 py-1 rounded inline-block mb-6 w-fit"),children:m}),(0,a.jsx)("div",{className:"".concat(m?"":"mt-6"," mb-6 pb-6 border-b border-gray-100"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 ".concat("red"===x?"bg-red-100":"bg-blue-100"," rounded-full flex items-center justify-center flex-shrink-0"),children:i.avatar||(0,a.jsx)("svg",{className:"w-5 h-5 ".concat("red"===x?"text-red-600":"text-blue-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),i.subtitle&&(0,a.jsx)("div",{className:"text-xs text-gray-400 truncate",children:i.subtitle})]})]})}),(0,a.jsx)("nav",{className:"space-y-1 flex-1 overflow-y-auto",children:s.map(e=>(0,a.jsxs)("button",{onClick:()=>b(e.id,e.onClick),"data-testid":"nav-".concat(e.id),className:"\n                  w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm transition-colors\n                  ".concat(l===e.id?"".concat(f," ").concat(y," font-medium"):"text-gray-600 hover:bg-gray-50","\n                "),children:[(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[e.icon,(0,a.jsx)("span",{className:"truncate",children:e.label})]}),void 0!==e.badge&&null!==e.badge&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(e.badgeColor||"bg-green-100 text-green-700"),children:e.badge})]},e.id))}),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:()=>{c(),h(!1)},"data-testid":"logout-button",className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Cerrar Sesi\xf3n"]})})]})}),(0,a.jsxs)("main",{className:"pt-20 lg:pt-8 lg:ml-64 px-4 sm:px-6 lg:px-8 pb-8",children:[o&&(0,a.jsx)("div",{className:"hidden lg:flex fixed top-4 right-8 z-30 items-center gap-3",children:o}),(0,a.jsx)("div",{className:"mt-2 lg:mt-4",children:t})]})]})}}},function(e){e.O(0,[464,507,120,971,117,744],function(){return e(e.s=4275)}),_N_E=e.O()}]);