(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{4296:function(e,s,a){Promise.resolve().then(a.bind(a,7112))},9763:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let a=(0,t.forwardRef)((a,n)=>{let{color:c="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=a;return(0,t.createElement)("svg",{ref:n,...r,width:i,height:i,stroke:c,strokeWidth:d?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(l(e)),u].join(" "),...x},[...s.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},8226:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5863:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},7112:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(7437),r=a(2265),l=a(9376),n=a(1837),c=a(5863),i=a(9763);let o=(0,i.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d=(0,i.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var u=a(8226);let m=(0,i.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var x=a(4646),h=a(7120);function g(){let e=(0,l.useParams)(),s=(0,l.useSearchParams)(),{formatPrice:a,currency:i,symbol:g}=(0,h.U)(),p=e.productId,b=s.get("telegram_user_id")||"",y=s.get("telegram_username")||"",[j,f]=(0,r.useState)(null),[v,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[D,U]=(0,r.useState)("guest"),[E,P]=(0,r.useState)(""),[Z,M]=(0,r.useState)(""),[R,z]=(0,r.useState)(!1),[A,L]=(0,r.useState)(!1),[T,_]=(0,r.useState)(!1),[F,$]=(0,r.useState)(""),[q,I]=(0,r.useState)(""),[B,V]=(0,r.useState)(null),[O,W]=(0,r.useState)("card");(0,r.useEffect)(()=>{G(),X()},[p]);let X=async()=>{try{var e;let s=await n.hi.get("/checkout/detect-gateway");V(s.data),(null===(e=s.data.availableMethods)||void 0===e?void 0:e.length)>0&&W(s.data.availableMethods[0])}catch(e){console.error("Error detecting gateway:",e),V({gateway:"stripe",geo:{country:"XX",countryName:"Unknown",isSpain:!1},availableMethods:["card"]})}},G=async()=>{try{let e=await n.hi.get("/checkout/product/".concat(p));f(e.data)}catch(e){S("Producto no encontrado o no disponible")}finally{N(!1)}},H=async()=>{if(S(""),!E){S("El correo electr\xf3nico es obligatorio");return}if(!R||!A){S("Debes aceptar los t\xe9rminos y confirmar que eres mayor de edad");return}if("register"===D){if(!F||!q){S("La contrase\xf1a es obligatoria para registrarse");return}if(F!==q){S("Las contrase\xf1as no coinciden");return}if(F.length<8){S("La contrase\xf1a debe tener al menos 8 caracteres");return}}k(!0);try{let e=await n.hi.post("/checkout/session",{productId:p,originUrl:window.location.origin,isGuest:"guest"===D,email:E,phone:Z||void 0,telegramUserId:b||void 0,telegramUsername:y||void 0});e.data.url&&(window.location.href=e.data.url)}catch(a){var e,s;S((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al procesar el pago"),k(!1)}},J=async()=>{if(S(""),!E){S("El correo electr\xf3nico es obligatorio");return}if(!R||!A){S("Debes aceptar los t\xe9rminos y confirmar que eres mayor de edad");return}k(!0);try{let e=await n.hi.post("/checkout/test-purchase",{productId:p,email:E,phone:Z||void 0,telegramUserId:b||void 0,telegramUsername:y||void 0});e.data.success&&(window.location.href="/checkout/success?order_id=".concat(e.data.orderId))}catch(a){var e,s;S((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error al simular el pago"),k(!1)}};return v?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):C&&!j?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:C}),(0,t.jsx)("a",{href:"/",className:"text-blue-600 hover:underline",children:"Volver al inicio"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[B&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded-xl text-center text-sm ".concat(B.geo.isSpain?"bg-yellow-50 border border-yellow-200 text-yellow-800":"bg-blue-50 border border-blue-200 text-blue-800"),children:B.geo.isSpain?(0,t.jsxs)(t.Fragment,{children:["\uD83C\uDDEA\uD83C\uDDF8 Pago desde Espa\xf1a - Disponible: Tarjeta ",B.availableMethods.includes("bizum")&&"+ Bizum"]}):(0,t.jsxs)(t.Fragment,{children:["\uD83C\uDF0D Pago desde ",B.geo.countryName," - Tarjeta de cr\xe9dito/d\xe9bito"]})}),(0,t.jsxs)("div",{className:"bg-white rounded-t-2xl p-6 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Antia"}),(0,t.jsx)(x.Z,{variant:"pill"})]}),(0,t.jsxs)("div",{className:"text-center mt-4",children:[(0,t.jsx)("p",{className:"text-4xl font-bold text-gray-900",children:j&&a(j.priceCents)}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:null==j?void 0:j.title})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-b-2xl p-6 shadow-lg",children:[(0,t.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,t.jsxs)("label",{className:"flex items-center p-4 border rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"checkoutMode",value:"guest",checked:"guest"===D,onChange:()=>U("guest"),className:"w-4 h-4 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Pagar como invitado"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Solo necesitas tu email para acceder"})]})]}),(0,t.jsxs)("label",{className:"flex items-center p-4 border rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"checkoutMode",value:"register",checked:"register"===D,onChange:()=>U("register"),className:"w-4 h-4 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Registrarme para futuras compras"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Crea una cuenta para gestionar tus suscripciones"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"email",value:E,onChange:e=>P(e.target.value),placeholder:"tu@email.com",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono (opcional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"tel",value:Z,onChange:e=>M(e.target.value),placeholder:"+34 600 000 000",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(null==B?void 0:B.geo.isSpain)&&B.availableMethods.length>1&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9todo de pago"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center justify-center p-4 border-2 rounded-xl cursor-pointer transition-all ".concat("card"===O?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===O,onChange:()=>W("card"),className:"sr-only"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(u.Z,{className:"w-6 h-6 mx-auto mb-1"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Tarjeta"})]})]}),(0,t.jsxs)("label",{className:"flex items-center justify-center p-4 border-2 rounded-xl cursor-pointer transition-all ".concat("bizum"===O?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"bizum",checked:"bizum"===O,onChange:()=>W("bizum"),className:"sr-only"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCF1"}),(0,t.jsx)("span",{className:"text-sm font-medium block",children:"Bizum"})]})]})]})]}),"register"===D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-blue-50 p-4 rounded-xl mb-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Nota:"})," Al registrarte, podr\xe1s gestionar tus suscripciones y ver tu historial de compras."]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a *"}),(0,t.jsx)("input",{type:"password",value:F,onChange:e=>$(e.target.value),placeholder:"M\xednimo 8 caracteres",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contrase\xf1a *"}),(0,t.jsx)("input",{type:"password",value:q,onChange:e=>I(e.target.value),placeholder:"Repite la contrase\xf1a",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mt-6",children:[(0,t.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:A,onChange:e=>L(e.target.checked),className:"w-4 h-4 mt-1 text-blue-600 rounded"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Confirmo que soy mayor de 18 a\xf1os *"})]}),(0,t.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:R,onChange:e=>z(e.target.checked),className:"w-4 h-4 mt-1 text-blue-600 rounded"}),(0,t.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["Acepto los"," ",(0,t.jsx)("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"T\xe9rminos de Uso"})," ","y la"," ",(0,t.jsx)("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"Pol\xedtica de Privacidad"})," *"]})]}),(0,t.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:T,onChange:e=>_(e.target.checked),className:"w-4 h-4 mt-1 text-blue-600 rounded"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Acepto recibir comunicaciones sobre novedades y promociones"})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-xl",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("strong",{children:"\uD83D\uDCF1 Acceso a Telegram:"})," Despu\xe9s de pagar, ser\xe1s redirigido a Telegram donde recibir\xe1s autom\xe1ticamente el acceso al canal del tipster."]})}),C&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:C})}),(0,t.jsxs)("div",{className:"space-y-3 mt-6",children:[(0,t.jsx)("button",{onClick:H,disabled:w,className:"w-full bg-black text-white py-4 rounded-xl font-medium hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?(0,t.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),"Proceder al pago con Stripe"]})}),(0,t.jsx)("button",{onClick:J,disabled:w,className:"w-full bg-green-600 text-white py-4 rounded-xl font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?(0,t.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(t.Fragment,{children:"✅ Simular Pago (Testing)"})}),(0,t.jsx)("p",{className:"text-xs text-center text-gray-500",children:"El bot\xf3n verde es solo para pruebas. En producci\xf3n solo estar\xe1 el pago real."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4 text-gray-500",children:[(0,t.jsx)(m,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Pago seguro"})]})]}),j&&(0,t.jsxs)("div",{className:"mt-6 bg-white rounded-2xl p-6 shadow-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Resumen de compra"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:j.title}),(0,t.jsx)("span",{className:"font-medium",children:a(j.priceCents)})]}),j.validityDays&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Validez"}),(0,t.jsxs)("span",{className:"font-medium",children:[j.validityDays," d\xedas"]})]}),j.tipster&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Tipster"}),(0,t.jsx)("span",{className:"font-medium",children:j.tipster.publicName})]}),(0,t.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,t.jsx)("span",{className:"font-bold text-lg",children:a(j.priceCents)})]})]})]})]})})}},4646:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(7437),r=a(7120);function l(e){let{className:s="",size:a="md",variant:l="default"}=e,{currency:n,setCurrency:c,loading:i}=(0,r.U)();return i?(0,t.jsx)("div",{className:"animate-pulse bg-gray-200 rounded ".concat("sm"===a?"w-16 h-6":"w-20 h-8")}):"pill"===l?(0,t.jsxs)("div",{className:"inline-flex rounded-full bg-gray-100 p-1 ".concat(s),children:[(0,t.jsx)("button",{onClick:()=>c("EUR"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("EUR"===n?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"€ EUR"}),(0,t.jsx)("button",{onClick:()=>c("USD"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("USD"===n?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"$ USD"})]}):"minimal"===l?(0,t.jsxs)("div",{className:"inline-flex gap-1 ".concat(s),children:[(0,t.jsx)("button",{onClick:()=>c("EUR"),className:"p-1.5 rounded transition-colors ".concat("EUR"===n?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"Euro",children:"€"}),(0,t.jsx)("button",{onClick:()=>c("USD"),className:"p-1.5 rounded transition-colors ".concat("USD"===n?"bg-green-100 text-green-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),title:"US Dollar",children:"$"})]}):(0,t.jsxs)("select",{value:n,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer ".concat({sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"}[a]," ").concat(s),children:[(0,t.jsx)("option",{value:"EUR",children:"€ EUR"}),(0,t.jsx)("option",{value:"USD",children:"$ USD"})]})}}},function(e){e.O(0,[464,120,971,117,744],function(){return e(e.s=4296)}),_N_E=e.O()}]);